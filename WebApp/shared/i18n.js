// i18n dictionary and helpers (ES module)
import React from 'react';
const { useState, useEffect, useMemo } = React;

export const dict = {
  tr: {
    nav_quote: 'Teklif Ver',
    nav_admin: 'Admin',
    title_quote: 'Özel Üretim Teklif Formu',
    sub_quote:
      'Metal işleme ihtiyaçlarınız için detayları paylaşın. Maksimum 2 dosya yükleyebilirsiniz (PDF, PNG, JPG/JPEG, DXF, DWG, STEP/IGES).',
    title_admin: 'Teklif Yönetimi ve Raporlama',
    sub_admin:
      'Gelen talepleri görüntüleyin, durumlarını yönetin, içgörüler elde edin ve dışa aktarın.',
    submit: 'Teklifi Gönder',
    saved: 'Teklif alındı. Teşekkürler!',
    required: 'Zorunlu alan',
    files_limit: 'En fazla 2 dosya yükleyebilirsiniz.',
    file_too_big: 'Dosya çok büyük. Limit: 1.5MB',
    file_type_bad: 'Desteklenmeyen dosya türü',
    // Fields
    f_name: 'Ad Soyad',
    f_company: 'Firma (opsiyonel)',
    f_email: 'E‑posta',
    f_phone: 'Telefon',
    f_country: 'Ülke',
    f_city: 'Şehir',
    f_proj: 'Proje / Parça Adı',
    f_process: 'Süreçler (seçiniz)',
    f_material: 'Malzeme',
    f_grade: 'Kalite / Alaşım',
    f_thickness: 'Kalınlık (mm)',
    f_qty: 'Adet',
    f_dims: 'Boyutlar (L×W×H mm)',
    f_tolerance: 'Tolerans (örn. ±0.2mm)',
    f_finish: 'Yüzey İşlem',
    f_due: 'Hedef Teslim Tarihi',
    f_repeat: 'Tek Seferlik / Süreklilik',
    f_budget: 'Bütçe (opsiyonel)',
    f_address: 'Teslimat Adresi (opsiyonel)',
    f_desc: 'Teknik Açıklama / Notlar',
    f_drawing: 'Teknik çizim mevcut mu?',
    f_upload: 'Dosya Yükle (max 2)',
    f_prodimg: 'Ürün görselleri mevcut mu?',
    f_prod_upload: 'Ürün Görselleri (max 5)',
    yes: 'Evet',
    no: 'Hayır',
    // Admin
    a_status: 'Durum',
    s_new: 'Yeni',
    s_review: 'İncelemede',
    s_feasible: 'Uygun',
    s_not: 'Uygun Değil',
    s_quoted: 'Teklif Verildi',
    s_approved: 'Onaylandı',
    s_proforma_sent: 'Proforma Gönderildi',
    s_invoice_exported: 'Fatura Export Edildi',
    s_invoice_imported: 'Fatura İçe Aktarıldı',
    a_update: 'Güncelle',
    a_add: 'Kayıt Ekle',
    a_delete: 'Sil',
    a_export_json: 'JSON Dışa Aktar',
    a_export_csv: 'CSV Dışa Aktar',
    a_stats: 'İstatistikler',
    a_list: 'Gelen Talepler',
    a_detail: 'Detay',
    a_files: 'Dosyalar',
    a_close: 'Kapat',
    a_none: 'Kayıt bulunamadı',
    production_dashboard_btn: 'Production Dashboard',
    production_dashboard_title: 'Üretim Paneli',
    send_to_production_btn: 'Üretim Paneline Aktar',
    // Common UI
    select: 'Seçiniz',
    refresh: 'Yenile',
    download: 'İndir',
    info: 'Bilgi',
    confirm_delete: 'Silmek istediğinizden emin misiniz?',
    // Admin table headers
    th_date: 'Tarih',
    th_customer: 'Müşteri',
    th_project: 'Proje',
    th_material: 'Malzeme',
    th_process: 'Süreç',
    th_qty: 'Adet',
    th_thickness: 'Kalınlık (mm)',
    th_due: 'Termin',
    th_days_to_due: 'Termine Kalan (Gün)',
    th_est_price: 'Tahmini Fiyat',
    th_est_lead: 'Tahmini Üretim Süresi (Gün)',
    th_actions: 'İşlemler',
    // Extra field labels
    f_qty_tiers: 'Adet Kademeleri',
    f_tolerance_std: 'Tolerans Standardı',
    f_tolerance_crit: 'Kritik Toleranslar',
    f_surface_ra: 'Yüzey Pürüzlülüğü (Ra)',
    f_bend_count: 'Büküm Sayısı',
    f_weld_method: 'Kaynak Yöntemi',
    // Operation related
    f_expected_defect_rate: 'Yüzdelik Fire Oranı',
    f_defect_rate_short: 'Fire Oranı (%)',
    f_operation_output_code: 'Yarı Mamül Kodu',
    operation_defect_rate_help: 'Beklenen hata/fire oranı (örn: 1.5 = %1.5). Malzeme rezervasyonu hesaplamalarında kullanılır.',
    // Input field placeholders - Turkish
    ph_name: 'Örn. Ahmet Yılmaz',
    ph_company: 'Şirket adı',
    ph_email: 'ornek@firma.com',
    ph_phone_local: '5xx xxx xx xx',
    ph_city: 'Şehir',
    ph_proj: 'Proje/Parça adı',
    ph_grade: 'Örn. S235 / 304 / 5754',
    ph_thickness: 'Örn. 3.0 (mm)',
    ph_qty: 'Adet',
    ph_qty_t1: 'Örn. 10',
    ph_qty_t2: 'Örn. 50',
    ph_qty_t3: 'Örn. 100',
    ph_tolcrit: 'Örn. H7 delikler, +/-0.05mm yüzey',
    ph_finish_ral: 'RAL Kodu (örn. RAL 9005)',
    ph_desc: 'Teknik detaylar, özel istekler, termin vb.',
    ph_bend_count: 'Örn. 2',
    ph_budget_amount: 'Tutar',
    ph_address_optional: 'Opsiyonel',
    // Tekrar ve durum seçenekleri
    repeat_one: 'Tek Seferlik',
    repeat_recurrent: 'Süreklilik',
    // Stepper
    next: 'Devam',
    back: 'Geri',
    resume: 'Kaldığın yerden devam et',
    fill_required: 'Lütfen gerekli alanları doldurun.',
    confirm_optional_title: 'Gönderimi Onayla',
    confirm_optional_text: 'Tüm zorunlu alanları doldurdunuz. Ek detayları doldurmak istemediğinizden emin misiniz?',
    btn_continue: 'Devam Et',
    btn_submit: 'Gönder',
    // Validation
    invalid_email: 'Geçerli bir e‑posta girin.',
    invalid_phone: 'Geçerli bir telefon girin (sadece rakam).',
    phone_tr_len: 'Türkiye numarası 10 haneli olmalıdır.',
    only_numbers: 'Sadece sayı girin.',
    must_be_positive: 'Pozitif bir değer girin.',
    integer_required: 'Tam sayı girin.',
    invalid_ral: 'RAL formatı "RAL 9005" şeklinde olmalı.',
    invalid_date: 'Geçerli bir tarih seçin.',
    // Tooltips (Admin)
    tt_refresh: 'Listeyi yenileyin',
    tt_export_csv: 'Kayıtları CSV olarak dışa aktarın',
    tt_detail: 'Kaydı inceleyin',
    tt_change_status: 'Teklif durumunu güncelleyin',
    tt_download_txt: 'TXT özetini indirin',
    tt_delete: 'Bu kaydı kalıcı olarak silin',
    tt_close: 'Pencereyi kapatın',
    tt_status_review: 'Durumu “İncelemede” olarak ayarlayın',
    tt_status_feasible: 'Durumu “Uygun” olarak ayarlayın',
    tt_status_not: 'Durumu “Uygun Değil” olarak ayarlayın',
    tt_status_quoted: 'Durumu “Teklif Verildi” olarak ayarlayın',
    // Edit in details
    edit: 'Düzenle',
    save: 'Kaydet',
    cancel: 'İptal',
    add_tech_file: 'Teknik Resim / Dosya Ekle',
    add_prod_image: 'Ürün Görseli Ekle',
    // Login
    remember_me: 'Beni hatırla',
    login_btn: 'Giriş Yap',
    logout_btn: 'Çıkış Yap',
    // Settings Tabs
    settings_title: 'Ayarlar',
    settings_pricing_tab: 'Fiyatlandırma',
    settings_form_tab: 'Form Yapısı',
    settings_users_tab: 'Kullanıcılar',
    settings_form_subtitle: 'Müşteri teklif formunda gösterilecek alanları ve seçenekleri yönetin.',
    settings_form_loading: 'Form yapılandırması yükleniyor...',
    settings_form_config: 'Form Yapılandırması',
    formula_validate_params: 'Kullanılabilir parametreler:',
    pricing_param_type: 'Parametre Türü',
    pricing_fixed_param: 'Sabit Değer',
    pricing_form_param: 'Form Alanı',
    pricing_param_name: 'Parametre Adı',
    pricing_fixed_value: 'Sabit Değer',
    pricing_form_field: 'Form Alanı',
    pricing_param_name_auto: 'Parametre Adı (otomatik)',
    pricing_select: 'Seçiniz...',
    pricing_no_form_fields: 'Henüz form alanı bulunmuyor. Önce Form Düzenleme menüsünden form alanları oluşturun.',
    // User Management
    users_title: 'Kullanıcı Yönetimi',
    users_new_user: 'Yeni Kullanıcı',
    users_add_user: 'Kullanıcı Ekle',
    users_cancel: 'İptal',
    users_email: 'Email',
    users_password: 'Şifre',
    users_role: 'Rol',
    users_role_admin: 'Admin',
    users_role_user: 'Kullanıcı',
    users_actions: 'İşlemler',
    users_delete: 'Sil',
    users_edit: 'Düzenle',
    users_save: 'Kaydet',
    users_confirm_delete: 'kullanıcısını silmek istediğinizden emin misiniz?',
    users_no_users: 'Henüz kullanıcı eklenmemiş.',
    users_email_placeholder: 'kullanici@domain.com',
    users_password_placeholder: 'En az 6 karakter',
    users_email_required: 'Email ve şifre gerekli',
    users_password_min: 'Şifre en az 6 karakter olmalı',
    users_added: 'Kullanıcı eklendi',
    users_deleted: 'Kullanıcı silindi',
    users_updated: 'Kullanıcı güncellendi',
    users_load_error: 'Kullanıcılar yüklenemedi',
    users_add_error: 'Kullanıcı eklenemedi',
    users_delete_error: 'Kullanıcı silinemedi',
    users_update_error: 'Kullanıcı güncellenemedi',
    users_edit_user: 'Kullanıcı Düzenle',
    users_new_password: 'Yeni Şifre (Boş bırakılırsa değişmez)',
    users_status: 'Durum',
    users_active: 'Aktif',
    users_inactive: 'Pasif',
    users_deactivated: 'Kullanıcı devre dışı bırakıldı',
    users_activated: 'Kullanıcı aktifleştirildi',
    users_deactivate: 'Devre Dışı',
    users_activate: 'Aktifleştir',
    users_confirm_action: 'kullanıcısını',
    users_confirm_suffix: 'istediğinizden emin misiniz?',
    // Admin Access Control
    admin_access_title: 'Admin Erişim Kontrolü',
    admin_access_desc: 'Kullanıcı yönetimi bölümüne erişmek için admin kimlik bilgilerinizi girin:',
    admin_access_required: 'Email ve şifre gerekli',
    admin_access_invalid: 'Geçersiz kullanıcı bilgileri',
    admin_access_denied: 'Bu panele erişim yetkiniz yok. Sadece admin kullanıcıları bu bölüme erişebilir.',
    admin_access_granted: 'Admin erişimi onaylandı',
    admin_access_error: 'Erişim doğrulama hatası',
    admin_access_verify: 'Doğrula',
    admin_access_email_placeholder: 'admin@example.com',
    admin_access_password_placeholder: 'Admin şifreniz',
    users_toggle_error: 'Kullanıcı durumu değiştirilemedi',
    close: 'Kapat'
  },
  en: {
    nav_quote: 'Request Quote',
    nav_admin: 'Admin',
    title_quote: 'Custom Manufacturing Quote Form',
    sub_quote:
      'Share details for your metal fabrication needs. Upload up to 2 files (PDF, PNG, JPG/JPEG, DXF, DWG, STEP/IGES).',
    title_admin: 'Quote Management & Reporting',
    sub_admin:
      'Review submissions, update statuses, gain insights, and export.',
    submit: 'Submit Quote',
    saved: 'Quote received. Thank you!',
    required: 'Required',
    files_limit: 'You can upload up to 2 files.',
    file_too_big: 'File too large. Limit: 1.5MB',
    file_type_bad: 'Unsupported file type',
    f_name: 'Full Name',
    f_company: 'Company (optional)',
    f_email: 'Email',
    f_phone: 'Phone',
    f_country: 'Country',
    f_city: 'City',
    f_proj: 'Project / Part Name',
    f_process: 'Processes (select)',
    f_material: 'Material',
    f_grade: 'Grade / Alloy',
    f_thickness: 'Thickness (mm)',
    f_qty: 'Quantity',
    f_dims: 'Dimensions (L×W×H mm)',
    f_tolerance: 'Tolerance (e.g., ±0.2mm)',
    f_finish: 'Surface Finish',
    f_due: 'Target Delivery Date',
    f_repeat: 'One-off / Recurrent',
    f_budget: 'Budget (optional)',
    f_address: 'Delivery Address (optional)',
    f_desc: 'Technical Description / Notes',
    f_drawing: 'Has technical drawing?',
    f_upload: 'Upload Files (max 2)',
    f_prodimg: 'Has product images?',
    f_prod_upload: 'Product Images (max 5)',
    yes: 'Yes',
    no: 'No',
    a_status: 'Status',
    s_new: 'New',
    s_review: 'In Review',
    s_feasible: 'Feasible',
    s_not: 'Not Feasible',
    s_quoted: 'Quoted',
    s_approved: 'Approved',
    a_update: 'Update',
    a_add: 'Add Record',
    a_delete: 'Delete',
    a_export_json: 'Export JSON',
    a_export_csv: 'Export CSV',
    a_stats: 'Statistics',
    a_list: 'Submissions',
    a_detail: 'Detail',
    a_files: 'Files',
    a_close: 'Close',
    a_none: 'No records found',
    production_dashboard_btn: 'Production Dashboard',
    production_dashboard_title: 'Production Dashboard',
    send_to_production_btn: 'Send to Production',
    // Common UI
    select: 'Select',
    refresh: 'Refresh',
    download: 'Download',
    info: 'Info',
    confirm_delete: 'Are you sure you want to delete?',
    // Admin table headers
    th_date: 'Date',
    th_customer: 'Customer',
    th_project: 'Project',
    th_material: 'Material',
    th_process: 'Process',
    th_qty: 'Qty',
    th_thickness: 'Thickness (mm)',
    th_due: 'Due',
    th_days_to_due: 'Days to Due',
    th_est_price: 'Est. Price',
    th_est_lead: 'Est. Lead Time (Days)',
    th_actions: 'Actions',
    // Extra field labels
    f_qty_tiers: 'Quantity Tiers',
    f_tolerance_std: 'Tolerance Standard',
    f_tolerance_crit: 'Critical Tolerances',
    f_surface_ra: 'Surface Roughness (Ra)',
    f_bend_count: 'Bend Count',
    f_weld_method: 'Weld Method',
    // Operation related
    f_expected_defect_rate: 'Expected Defect Rate',
    f_defect_rate_short: 'Defect Rate (%)',
    f_operation_output_code: 'Semi-finished Code',
    operation_defect_rate_help: 'Expected defect/waste rate (e.g., 1.5 = 1.5%). Used in material reservation calculations.',
    // Input field placeholders - English
    ph_name: 'e.g., John Smith',
    ph_company: 'Company name',
    ph_email: 'example@company.com',
    ph_phone_local: 'e.g., 555 123 45 67',
    ph_city: 'City',
    ph_proj: 'Project/Part name',
    ph_grade: 'e.g., S235 / 304 / 5754',
    ph_thickness: 'e.g., 3.0 (mm)',
    ph_qty: 'Quantity',
    ph_qty_t1: 'e.g., 10',
    ph_qty_t2: 'e.g., 50',
    ph_qty_t3: 'e.g., 100',
    ph_tolcrit: 'e.g., H7 holes, +/-0.05mm surface',
    ph_finish_ral: 'RAL Code (e.g., RAL 9005)',
    ph_desc: 'Technical details, special requests, delivery, etc.',
    ph_bend_count: 'e.g., 2',
    ph_budget_amount: 'Amount',
    ph_address_optional: 'Optional',
    // Repetition options
    repeat_one: 'One-off',
    repeat_recurrent: 'Recurrent',
    // Stepper
    next: 'Next',
    back: 'Back',
    resume: 'Resume from where you left',
    fill_required: 'Please fill the required fields.',
    confirm_optional_title: 'Confirm Submission',
    confirm_optional_text: 'You filled all required fields. Are you sure you want to skip optional details?',
    btn_continue: 'Continue Filling',
    btn_submit: 'Submit',
    // Validation
    invalid_email: 'Enter a valid email.',
    invalid_phone: 'Enter a valid phone (digits only).',
    phone_tr_len: 'Turkish phone must be 10 digits.',
    only_numbers: 'Numbers only.',
    must_be_positive: 'Enter a positive value.',
    integer_required: 'Enter an integer.',
    invalid_ral: 'RAL format should be like "RAL 9005".',
    invalid_date: 'Select a valid date.',
    // Tooltips (Admin)
    tt_refresh: 'Refresh the list',
    tt_export_csv: 'Export records as CSV',
    tt_detail: 'Inspect the record',
    tt_change_status: 'Update the quote status',
    tt_download_txt: 'Download TXT summary',
    tt_delete: 'Permanently delete this record',
    tt_close: 'Close the dialog',
    tt_status_review: 'Set status to “In Review”',
    tt_status_feasible: 'Set status to “Feasible”',
    tt_status_not: 'Set status to “Not Feasible”',
    tt_status_quoted: 'Set status to “Quoted”',
    // Edit in details
    edit: 'Edit',
    save: 'Save',
    cancel: 'Cancel',
    add_tech_file: 'Add Technical File(s)',
    add_prod_image: 'Add Product Image(s)',
    // Login
    remember_me: 'Remember me',
    login_btn: 'Login',
    logout_btn: 'Logout',
    // Settings Tabs
    settings_title: 'Settings',
    settings_pricing_tab: 'Pricing',
    settings_form_tab: 'Form Structure',
    settings_users_tab: 'Users',
    settings_form_subtitle: 'Manage fields and options displayed in the customer quote form.',
    settings_form_loading: 'Loading form configuration...',
    settings_form_config: 'Form Configuration',
    formula_validate_params: 'Available parameters:',
    pricing_param_type: 'Parameter Type',
    pricing_fixed_param: 'Fixed Value',
    pricing_form_param: 'Form Field',
    pricing_param_name: 'Parameter Name',
    pricing_fixed_value: 'Fixed Value',
    pricing_form_field: 'Form Field',
    pricing_param_name_auto: 'Parameter Name (automatic)',
    pricing_select: 'Select...',
    pricing_no_form_fields: 'No form fields available yet. First create form fields from the Form Editing menu.',
    // User Management
    users_title: 'User Management',
    users_new_user: 'New User',
    users_add_user: 'Add User',
    users_cancel: 'Cancel',
    users_email: 'Email',
    users_password: 'Password',
    users_role: 'Role',
    users_role_admin: 'Admin',
    users_role_user: 'User',
    users_actions: 'Actions',
    users_delete: 'Delete',
    users_edit: 'Edit',
    users_save: 'Save',
    users_confirm_delete: 'Are you sure you want to delete user?',
    users_no_users: 'No users added yet.',
    users_email_placeholder: 'user@domain.com',
    users_password_placeholder: 'At least 6 characters',
    users_email_required: 'Email and password required',
    users_password_min: 'Password must be at least 6 characters',
    users_added: 'User added',
    users_deleted: 'User deleted',
    users_updated: 'User updated',
    users_load_error: 'Failed to load users',
    users_add_error: 'Failed to add user',
    users_delete_error: 'Failed to delete user',
    users_update_error: 'Failed to update user',
    users_edit_user: 'Edit User',
    users_new_password: 'New Password (Leave empty if unchanged)',
    users_status: 'Status',
    users_active: 'Active',
    users_inactive: 'Inactive',
    users_deactivated: 'User deactivated',
    users_activated: 'User activated',
    users_deactivate: 'Deactivate',
    users_activate: 'Activate',
    users_confirm_action: 'user',
    users_confirm_suffix: 'Are you sure?',
    // Admin Access Control
    admin_access_title: 'Admin Access Control',
    admin_access_desc: 'Enter your admin credentials to access user management:',
    admin_access_required: 'Email and password required',
    admin_access_invalid: 'Invalid credentials',
    admin_access_denied: 'Access denied. Only admin users can access this section.',
    admin_access_granted: 'Admin access granted',
    admin_access_error: 'Access verification error',
    admin_access_verify: 'Verify',
    admin_access_email_placeholder: 'admin@example.com',
    admin_access_password_placeholder: 'Your admin password',
    users_toggle_error: 'Failed to change user status',
    close: 'Close'
  },
}

// Dinamik sistem için helper fonksiyonlar
export function procLabel(p, t) { return p }
export function materialLabel(m, t) { return m }
export function finishLabel(f, t) { return f }
export function tFor(lang) { return dict[lang] || dict.tr }
export function statusLabel(s, t) {
  if (s === 'new') return t.s_new
  if (s === 'review') return t.s_review
  if (s === 'feasible') return t.s_feasible
  if (s === 'not') return t.s_not
  if (s === 'quoted') return t.s_quoted
  if (s === 'approved') return t.s_approved || 'Approved'
  if (s === 'proformaSent') return t.s_proforma_sent || 'Proforma Sent'
  if (s === 'invoiceExported') return t.s_invoice_exported || 'Invoice Exported'
  if (s === 'invoiceImported') return t.s_invoice_imported || 'Invoice Imported'
  return s
}

const initialLang = (localStorage.getItem('bk_lang') || 'tr')
export function useI18n() {
  const [lang, setLang] = useState(initialLang)
  useEffect(() => {
    localStorage.setItem('bk_lang', lang)
    try { document.documentElement.setAttribute('lang', lang) } catch { }
  }, [lang])
  const t = useMemo(() => dict[lang] || dict.tr, [lang])
  return { t, lang, setLang }
}
