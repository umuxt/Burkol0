// i18n dictionary and helpers (ES module)
const { useState, useEffect, useMemo } = React

export const dict = {
  tr: {
    nav_quote: 'Teklif Ver',
    nav_admin: 'Admin',
    title_quote: 'Özel Üretim Teklif Formu',
    sub_quote:
      'Metal işleme ihtiyaçlarınız için detayları paylaşın. Maksimum 2 dosya yükleyebilirsiniz (PDF, PNG, JPG/JPEG, DXF, DWG, STEP/IGES).',
    title_admin: 'Teklif Yönetimi ve Analitik',
    sub_admin:
      'Gelen talepleri görüntüleyin, durumlarını yönetin, içgörüler elde edin ve dışa aktarın.',
    submit: 'Teklifi Gönder',
    saved: 'Teklif alındı. Teşekkürler!',
    required: 'Zorunlu alan',
    files_limit: 'En fazla 2 dosya yükleyebilirsiniz.',
    file_too_big: 'Dosya çok büyük. Limit: 1.5MB',
    file_type_bad: 'Desteklenmeyen dosya türü',
    // Fields
    f_name: 'Ad Soyad',
    f_company: 'Firma (opsiyonel)',
    f_email: 'E‑posta',
    f_phone: 'Telefon',
    f_country: 'Ülke',
    f_city: 'Şehir',
    f_proj: 'Proje / Parça Adı',
    f_process: 'Süreçler (seçiniz)',
    f_material: 'Malzeme',
    f_grade: 'Kalite / Alaşım',
    f_thickness: 'Kalınlık (mm)',
    f_qty: 'Adet',
    f_dims: 'Boyutlar (L×W×H mm)',
    f_tolerance: 'Tolerans (örn. ±0.2mm)',
    f_finish: 'Yüzey İşlem',
    f_due: 'Hedef Teslim Tarihi',
    f_repeat: 'Tek Seferlik / Süreklilik',
    f_budget: 'Bütçe (opsiyonel)',
    f_address: 'Teslimat Adresi (opsiyonel)',
    f_desc: 'Teknik Açıklama / Notlar',
    f_drawing: 'Teknik çizim mevcut mu?',
    f_upload: 'Dosya Yükle (max 2)',
    f_prodimg: 'Ürün görselleri mevcut mu?',
    f_prod_upload: 'Ürün Görselleri (max 5)',
    yes: 'Evet',
    no: 'Hayır',
    // Admin
    a_status: 'Durum',
    s_new: 'Yeni',
    s_review: 'İncelemede',
    s_feasible: 'Uygun',
    s_not: 'Uygun Değil',
    s_quoted: 'Teklif Verildi',
    s_approved: 'Onaylandı',
    a_update: 'Güncelle',
    a_add: 'Kayıt Ekle',
    a_delete: 'Sil',
    a_export_json: 'JSON Dışa Aktar',
    a_export_csv: 'CSV Dışa Aktar',
    a_stats: 'Analitik',
    a_list: 'Gelen Talepler',
    a_detail: 'Detay',
    a_files: 'Dosyalar',
    a_close: 'Kapat',
    a_none: 'Kayıt bulunamadı',
    // Common UI
    select: 'Seçiniz',
    refresh: 'Yenile',
    download: 'İndir',
    info: 'Bilgi',
    confirm_delete: 'Silmek istediğinizden emin misiniz?',
    // Admin table headers
    th_date: 'Tarih',
    th_customer: 'Müşteri',
    th_project: 'Proje',
    th_material: 'Malzeme',
    th_process: 'Süreç',
    th_qty: 'Adet',
    th_thickness: 'Kalınlık (mm)',
    th_due: 'Termin',
    th_days_to_due: 'Termine Kalan (Gün)',
    th_est_price: 'Tahmini Fiyat',
    th_est_lead: 'Tahmini Üretim Süresi (Gün)',
    th_actions: 'İşlemler',
    // Extra field labels
    f_qty_tiers: 'Adet Kademeleri',
    f_tolerance_std: 'Tolerans Standardı',
    f_tolerance_crit: 'Kritik Toleranslar',
    f_surface_ra: 'Yüzey Pürüzlülüğü (Ra)',
    f_bend_count: 'Büküm Sayısı',
    f_weld_method: 'Kaynak Yöntemi',
    // Placeholders
    ph_name: 'Örn. Ahmet Yılmaz',
    ph_company: 'Şirket adı',
    ph_email: 'ornek@firma.com',
    ph_phone_local: '5xx xxx xx xx',
    ph_city: 'Şehir',
    ph_proj: 'Proje/Parça adı',
    ph_grade: 'Örn. S235 / 304 / 5754',
    ph_thickness: 'Örn. 3.0 (mm)',
    ph_qty: 'Adet',
    ph_qty_t1: 'Örn. 10',
    ph_qty_t2: 'Örn. 50',
    ph_qty_t3: 'Örn. 100',
    ph_tolcrit: 'Örn. H7 delikler, +/-0.05mm yüzey',
    ph_finish_ral: 'RAL Kodu (örn. RAL 9005)',
    ph_desc: 'Teknik detaylar, özel istekler, termin vb.',
    ph_bend_count: 'Örn. 2',
    ph_budget_amount: 'Tutar',
    ph_address_optional: 'Opsiyonel',
    // Dropdown option labels
    opt_process: {
      'Lazer Kesim': 'Lazer Kesim',
      'Abkant Büküm': 'Abkant Büküm',
      'Kaynak': 'Kaynak',
      'CNC İşleme': 'CNC İşleme',
      'Montaj': 'Montaj',
      'Toz Boya': 'Toz Boya',
      'Galvaniz': 'Galvaniz',
      'Anodize': 'Anodize',
    },
    opt_material: {
      'Mild Steel (S235/S355)': 'Yumuşak Çelik (S235/S355)',
      'Stainless Steel (304/316)': 'Paslanmaz Çelik (304/316)',
      'Aluminum (5052/6061/6082)': 'Alüminyum (5052/6061/6082)',
      'Galvanized Steel': 'Galvanizli Çelik',
      'Copper/Brass': 'Bakır/Pirinç',
      'Other': 'Diğer',
    },
    opt_finish: {
      'Ham': 'Ham',
      'Zımpara': 'Zımpara',
      'Toz Boya': 'Toz Boya',
      'Galvaniz': 'Galvaniz',
      'Anodize': 'Anodize',
      'Diğer': 'Diğer',
    },
    repeat_one: 'Tek Seferlik',
    repeat_recurrent: 'Süreklilik',
    anodize_clear: 'Şeffaf',
    anodize_black: 'Siyah',
    anodize_colored: 'Renkli',
    // Stepper
    next: 'Devam',
    back: 'Geri',
    resume: 'Kaldığın yerden devam et',
    fill_required: 'Lütfen gerekli alanları doldurun.',
    confirm_optional_title: 'Gönderimi Onayla',
    confirm_optional_text: 'Tüm zorunlu alanları doldurdunuz. Ek detayları doldurmak istemediğinizden emin misiniz?',
    btn_continue: 'Devam Et',
    btn_submit: 'Gönder',
    // Validation
    invalid_email: 'Geçerli bir e‑posta girin.',
    invalid_phone: 'Geçerli bir telefon girin (sadece rakam).',
    phone_tr_len: 'Türkiye numarası 10 haneli olmalıdır.',
    only_numbers: 'Sadece sayı girin.',
    must_be_positive: 'Pozitif bir değer girin.',
    integer_required: 'Tam sayı girin.',
    invalid_ral: 'RAL formatı "RAL 9005" şeklinde olmalı.',
    invalid_date: 'Geçerli bir tarih seçin.',
    // Charts / Pivot
    a_charts: 'Analitik Gösterge',
    a_metric: 'Metri̇k',
    a_dimension: 'Boyut',
    a_chart_type: 'Grafik Türü',
    metric_count: 'Kayıt Sayısı',
    dim_status: 'Durum',
    dim_process: 'Süreç',
    dim_material: 'Malzeme',
    dim_day: 'Gün',
    chart_bar: 'Bar',
    chart_line: 'Çizgi',
    empty_data: 'Veri yok',
    // Tooltips (Admin)
    tt_refresh: 'Listeyi yenileyin',
    tt_export_csv: 'Kayıtları CSV olarak dışa aktarın',
    tt_detail: 'Kaydı inceleyin',
    tt_change_status: 'Teklif durumunu güncelleyin',
    tt_download_txt: 'TXT özetini indirin',
    tt_delete: 'Bu kaydı kalıcı olarak silin',
    tt_close: 'Pencereyi kapatın',
    tt_status_review: 'Durumu “İncelemede” olarak ayarlayın',
    tt_status_feasible: 'Durumu “Uygun” olarak ayarlayın',
    tt_status_not: 'Durumu “Uygun Değil” olarak ayarlayın',
    tt_status_quoted: 'Durumu “Teklif Verildi” olarak ayarlayın',
    // Edit in details
    edit: 'Düzenle',
    save: 'Kaydet',
    cancel: 'İptal',
    add_tech_file: 'Teknik Resim / Dosya Ekle',
    add_prod_image: 'Ürün Görseli Ekle'
  },
  en: {
    nav_quote: 'Request Quote',
    nav_admin: 'Admin',
    title_quote: 'Custom Manufacturing Quote Form',
    sub_quote:
      'Share details for your metal fabrication needs. Upload up to 2 files (PDF, PNG, JPG/JPEG, DXF, DWG, STEP/IGES).',
    title_admin: 'Quote Management & Analytics',
    sub_admin:
      'Review submissions, update statuses, gain insights, and export.',
    submit: 'Submit Quote',
    saved: 'Quote received. Thank you!',
    required: 'Required',
    files_limit: 'You can upload up to 2 files.',
    file_too_big: 'File too large. Limit: 1.5MB',
    file_type_bad: 'Unsupported file type',
    f_name: 'Full Name',
    f_company: 'Company (optional)',
    f_email: 'Email',
    f_phone: 'Phone',
    f_country: 'Country',
    f_city: 'City',
    f_proj: 'Project / Part Name',
    f_process: 'Processes (select)',
    f_material: 'Material',
    f_grade: 'Grade / Alloy',
    f_thickness: 'Thickness (mm)',
    f_qty: 'Quantity',
    f_dims: 'Dimensions (L×W×H mm)',
    f_tolerance: 'Tolerance (e.g., ±0.2mm)',
    f_finish: 'Surface Finish',
    f_due: 'Target Delivery Date',
    f_repeat: 'One-off / Recurrent',
    f_budget: 'Budget (optional)',
    f_address: 'Delivery Address (optional)',
    f_desc: 'Technical Description / Notes',
    f_drawing: 'Has technical drawing?',
    f_upload: 'Upload Files (max 2)',
    f_prodimg: 'Has product images?',
    f_prod_upload: 'Product Images (max 5)',
    yes: 'Yes',
    no: 'No',
    a_status: 'Status',
    s_new: 'New',
    s_review: 'In Review',
    s_feasible: 'Feasible',
    s_not: 'Not Feasible',
    s_quoted: 'Quoted',
    s_approved: 'Approved',
    a_update: 'Update',
    a_add: 'Add Record',
    a_delete: 'Delete',
    a_export_json: 'Export JSON',
    a_export_csv: 'Export CSV',
    a_stats: 'Analytics',
    a_list: 'Submissions',
    a_detail: 'Detail',
    a_files: 'Files',
    a_close: 'Close',
    a_none: 'No records found',
    // Common UI
    select: 'Select',
    refresh: 'Refresh',
    download: 'Download',
    info: 'Info',
    confirm_delete: 'Are you sure you want to delete?',
    // Admin table headers
    th_date: 'Date',
    th_customer: 'Customer',
    th_project: 'Project',
    th_material: 'Material',
    th_process: 'Process',
    th_qty: 'Qty',
    th_thickness: 'Thickness (mm)',
    th_due: 'Due',
    th_days_to_due: 'Days to Due',
    th_est_price: 'Est. Price',
    th_est_lead: 'Est. Lead Time (Days)',
    th_actions: 'Actions',
    // Extra field labels
    f_qty_tiers: 'Quantity Tiers',
    f_tolerance_std: 'Tolerance Standard',
    f_tolerance_crit: 'Critical Tolerances',
    f_surface_ra: 'Surface Roughness (Ra)',
    f_bend_count: 'Bend Count',
    f_weld_method: 'Weld Method',
    // Placeholders
    ph_name: 'e.g., John Smith',
    ph_company: 'Company name',
    ph_email: 'example@company.com',
    ph_phone_local: 'e.g., 555 123 45 67',
    ph_city: 'City',
    ph_proj: 'Project/Part name',
    ph_grade: 'e.g., S235 / 304 / 5754',
    ph_thickness: 'e.g., 3.0 (mm)',
    ph_qty: 'Quantity',
    ph_qty_t1: 'e.g., 10',
    ph_qty_t2: 'e.g., 50',
    ph_qty_t3: 'e.g., 100',
    ph_tolcrit: 'e.g., H7 holes, +/-0.05mm surface',
    ph_finish_ral: 'RAL Code (e.g., RAL 9005)',
    ph_desc: 'Technical details, special requests, delivery, etc.',
    ph_bend_count: 'e.g., 2',
    ph_budget_amount: 'Amount',
    ph_address_optional: 'Optional',
    // Dropdown option labels
    opt_process: {
      'Lazer Kesim': 'Laser Cutting',
      'Abkant Büküm': 'Bending',
      'Kaynak': 'Welding',
      'CNC İşleme': 'CNC Machining',
      'Montaj': 'Assembly',
      'Toz Boya': 'Powder Coating',
      'Galvaniz': 'Galvanization',
      'Anodize': 'Anodizing',
    },
    opt_material: {
      'Mild Steel (S235/S355)': 'Mild Steel (S235/S355)',
      'Stainless Steel (304/316)': 'Stainless Steel (304/316)',
      'Aluminum (5052/6061/6082)': 'Aluminum (5052/6061/6082)',
      'Galvanized Steel': 'Galvanized Steel',
      'Copper/Brass': 'Copper/Brass',
      'Other': 'Other',
    },
    opt_finish: {
      'Ham': 'As-machined',
      'Zımpara': 'Sanded',
      'Toz Boya': 'Powder Coating',
      'Galvaniz': 'Galvanized',
      'Anodize': 'Anodized',
      'Diğer': 'Other',
    },
    repeat_one: 'One-off',
    repeat_recurrent: 'Recurrent',
    anodize_clear: 'Clear',
    anodize_black: 'Black',
    anodize_colored: 'Colored',
    // Stepper
    next: 'Next',
    back: 'Back',
    resume: 'Resume from where you left',
    fill_required: 'Please fill the required fields.',
    confirm_optional_title: 'Confirm Submission',
    confirm_optional_text: 'You filled all required fields. Are you sure you want to skip optional details?',
    btn_continue: 'Continue Filling',
    btn_submit: 'Submit',
    // Validation
    invalid_email: 'Enter a valid email.',
    invalid_phone: 'Enter a valid phone (digits only).',
    phone_tr_len: 'Turkish phone must be 10 digits.',
    only_numbers: 'Numbers only.',
    must_be_positive: 'Enter a positive value.',
    integer_required: 'Enter an integer.',
    invalid_ral: 'RAL format should be like "RAL 9005".',
    invalid_date: 'Select a valid date.',
    // Charts / Pivot
    a_charts: 'Analytics Chart',
    a_metric: 'Metric',
    a_dimension: 'Dimension',
    a_chart_type: 'Chart Type',
    metric_count: 'Record Count',
    dim_status: 'Status',
    dim_process: 'Process',
    dim_material: 'Material',
    dim_day: 'Day',
    chart_bar: 'Bar',
    chart_line: 'Line',
    empty_data: 'No data',
    // Tooltips (Admin)
    tt_refresh: 'Refresh the list',
    tt_export_csv: 'Export records as CSV',
    tt_detail: 'Inspect the record',
    tt_change_status: 'Update the quote status',
    tt_download_txt: 'Download TXT summary',
    tt_delete: 'Permanently delete this record',
    tt_close: 'Close the dialog',
    tt_status_review: 'Set status to “In Review”',
    tt_status_feasible: 'Set status to “Feasible”',
    tt_status_not: 'Set status to “Not Feasible”',
    tt_status_quoted: 'Set status to “Quoted”',
    // Edit in details
    edit: 'Edit',
    save: 'Save',
    cancel: 'Cancel',
    add_tech_file: 'Add Technical File(s)',
    add_prod_image: 'Add Product Image(s)'
  },
}

export function procLabel(p, t) { return (t.opt_process && t.opt_process[p]) || p }
export function materialLabel(m, t) { return (t.opt_material && t.opt_material[m]) || m }
export function finishLabel(f, t) { return (t.opt_finish && t.opt_finish[f]) || f }
export function tFor(lang) { return dict[lang] || dict.tr }
export function statusLabel(s, t) {
  if (s === 'new') return t.s_new
  if (s === 'review') return t.s_review
  if (s === 'feasible') return t.s_feasible
  if (s === 'not') return t.s_not
  if (s === 'quoted') return t.s_quoted
  if (s === 'approved') return t.s_approved || 'Approved'
  return s
}

const initialLang = (localStorage.getItem('bk_lang') || 'tr')
export function useI18n() {
  const [lang, setLang] = useState(initialLang)
  useEffect(() => {
    localStorage.setItem('bk_lang', lang)
    try { document.documentElement.setAttribute('lang', lang) } catch {}
  }, [lang])
  const t = useMemo(() => dict[lang] || dict.tr, [lang])
  return { t, lang, setLang }
}
