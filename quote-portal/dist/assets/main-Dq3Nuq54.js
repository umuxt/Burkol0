(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const f of o)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function i(o){const f={};return o.integrity&&(f.integrity=o.integrity),o.referrerPolicy&&(f.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?f.credentials="include":o.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(o){if(o.ep)return;o.ep=!0;const f=i(o);fetch(o.href,f)}})();function R_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var hh={exports:{}},Gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg;function ME(){if(Zg)return Gl;Zg=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(s,o,f){var d=null;if(f!==void 0&&(d=""+f),o.key!==void 0&&(d=""+o.key),"key"in o){f={};for(var p in o)p!=="key"&&(f[p]=o[p])}else f=o;return o=f.ref,{$$typeof:r,type:s,key:d,ref:o!==void 0?o:null,props:f}}return Gl.Fragment=e,Gl.jsx=i,Gl.jsxs=i,Gl}var Jg;function kE(){return Jg||(Jg=1,hh.exports=ME()),hh.exports}var Qt=kE(),dh={exports:{}},Vt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg;function zE(){if(Wg)return Vt;Wg=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.iterator;function M(x){return x===null||typeof x!="object"?null:(x=A&&x[A]||x["@@iterator"],typeof x=="function"?x:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},at=Object.assign,ot={};function it(x,J,lt){this.props=x,this.context=J,this.refs=ot,this.updater=lt||F}it.prototype.isReactComponent={},it.prototype.setState=function(x,J){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,J,"setState")},it.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function St(){}St.prototype=it.prototype;function Nt(x,J,lt){this.props=x,this.context=J,this.refs=ot,this.updater=lt||F}var Tt=Nt.prototype=new St;Tt.constructor=Nt,at(Tt,it.prototype),Tt.isPureReactComponent=!0;var Xt=Array.isArray,gt={H:null,A:null,T:null,S:null,V:null},kt=Object.prototype.hasOwnProperty;function I(x,J,lt,k,Y,W){return lt=W.ref,{$$typeof:r,type:x,key:J,ref:lt!==void 0?lt:null,props:W}}function S(x,J){return I(x.type,J,void 0,void 0,void 0,x.props)}function C(x){return typeof x=="object"&&x!==null&&x.$$typeof===r}function O(x){var J={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(lt){return J[lt]})}var N=/\/+/g;function z(x,J){return typeof x=="object"&&x!==null&&x.key!=null?O(""+x.key):J.toString(36)}function R(){}function Jt(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(R,R):(x.status="pending",x.then(function(J){x.status==="pending"&&(x.status="fulfilled",x.value=J)},function(J){x.status==="pending"&&(x.status="rejected",x.reason=J)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function Wt(x,J,lt,k,Y){var W=typeof x;(W==="undefined"||W==="boolean")&&(x=null);var q=!1;if(x===null)q=!0;else switch(W){case"bigint":case"string":case"number":q=!0;break;case"object":switch(x.$$typeof){case r:case e:q=!0;break;case T:return q=x._init,Wt(q(x._payload),J,lt,k,Y)}}if(q)return Y=Y(x),q=k===""?"."+z(x,0):k,Xt(Y)?(lt="",q!=null&&(lt=q.replace(N,"$&/")+"/"),Wt(Y,J,lt,"",function(Bt){return Bt})):Y!=null&&(C(Y)&&(Y=S(Y,lt+(Y.key==null||x&&x.key===Y.key?"":(""+Y.key).replace(N,"$&/")+"/")+q)),J.push(Y)),1;q=0;var ut=k===""?".":k+":";if(Xt(x))for(var yt=0;yt<x.length;yt++)k=x[yt],W=ut+z(k,yt),q+=Wt(k,J,lt,W,Y);else if(yt=M(x),typeof yt=="function")for(x=yt.call(x),yt=0;!(k=x.next()).done;)k=k.value,W=ut+z(k,yt++),q+=Wt(k,J,lt,W,Y);else if(W==="object"){if(typeof x.then=="function")return Wt(Jt(x),J,lt,k,Y);throw J=String(x),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return q}function Q(x,J,lt){if(x==null)return x;var k=[],Y=0;return Wt(x,k,"","",function(W){return J.call(lt,W,Y++)}),k}function st(x){if(x._status===-1){var J=x._result;J=J(),J.then(function(lt){(x._status===0||x._status===-1)&&(x._status=1,x._result=lt)},function(lt){(x._status===0||x._status===-1)&&(x._status=2,x._result=lt)}),x._status===-1&&(x._status=0,x._result=J)}if(x._status===1)return x._result.default;throw x._result}var mt=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)};function Lt(){}return Vt.Children={map:Q,forEach:function(x,J,lt){Q(x,function(){J.apply(this,arguments)},lt)},count:function(x){var J=0;return Q(x,function(){J++}),J},toArray:function(x){return Q(x,function(J){return J})||[]},only:function(x){if(!C(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},Vt.Component=it,Vt.Fragment=i,Vt.Profiler=o,Vt.PureComponent=Nt,Vt.StrictMode=s,Vt.Suspense=g,Vt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=gt,Vt.__COMPILER_RUNTIME={__proto__:null,c:function(x){return gt.H.useMemoCache(x)}},Vt.cache=function(x){return function(){return x.apply(null,arguments)}},Vt.cloneElement=function(x,J,lt){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var k=at({},x.props),Y=x.key,W=void 0;if(J!=null)for(q in J.ref!==void 0&&(W=void 0),J.key!==void 0&&(Y=""+J.key),J)!kt.call(J,q)||q==="key"||q==="__self"||q==="__source"||q==="ref"&&J.ref===void 0||(k[q]=J[q]);var q=arguments.length-2;if(q===1)k.children=lt;else if(1<q){for(var ut=Array(q),yt=0;yt<q;yt++)ut[yt]=arguments[yt+2];k.children=ut}return I(x.type,Y,void 0,void 0,W,k)},Vt.createContext=function(x){return x={$$typeof:d,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:f,_context:x},x},Vt.createElement=function(x,J,lt){var k,Y={},W=null;if(J!=null)for(k in J.key!==void 0&&(W=""+J.key),J)kt.call(J,k)&&k!=="key"&&k!=="__self"&&k!=="__source"&&(Y[k]=J[k]);var q=arguments.length-2;if(q===1)Y.children=lt;else if(1<q){for(var ut=Array(q),yt=0;yt<q;yt++)ut[yt]=arguments[yt+2];Y.children=ut}if(x&&x.defaultProps)for(k in q=x.defaultProps,q)Y[k]===void 0&&(Y[k]=q[k]);return I(x,W,void 0,void 0,null,Y)},Vt.createRef=function(){return{current:null}},Vt.forwardRef=function(x){return{$$typeof:p,render:x}},Vt.isValidElement=C,Vt.lazy=function(x){return{$$typeof:T,_payload:{_status:-1,_result:x},_init:st}},Vt.memo=function(x,J){return{$$typeof:v,type:x,compare:J===void 0?null:J}},Vt.startTransition=function(x){var J=gt.T,lt={};gt.T=lt;try{var k=x(),Y=gt.S;Y!==null&&Y(lt,k),typeof k=="object"&&k!==null&&typeof k.then=="function"&&k.then(Lt,mt)}catch(W){mt(W)}finally{gt.T=J}},Vt.unstable_useCacheRefresh=function(){return gt.H.useCacheRefresh()},Vt.use=function(x){return gt.H.use(x)},Vt.useActionState=function(x,J,lt){return gt.H.useActionState(x,J,lt)},Vt.useCallback=function(x,J){return gt.H.useCallback(x,J)},Vt.useContext=function(x){return gt.H.useContext(x)},Vt.useDebugValue=function(){},Vt.useDeferredValue=function(x,J){return gt.H.useDeferredValue(x,J)},Vt.useEffect=function(x,J,lt){var k=gt.H;if(typeof lt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return k.useEffect(x,J)},Vt.useId=function(){return gt.H.useId()},Vt.useImperativeHandle=function(x,J,lt){return gt.H.useImperativeHandle(x,J,lt)},Vt.useInsertionEffect=function(x,J){return gt.H.useInsertionEffect(x,J)},Vt.useLayoutEffect=function(x,J){return gt.H.useLayoutEffect(x,J)},Vt.useMemo=function(x,J){return gt.H.useMemo(x,J)},Vt.useOptimistic=function(x,J){return gt.H.useOptimistic(x,J)},Vt.useReducer=function(x,J,lt){return gt.H.useReducer(x,J,lt)},Vt.useRef=function(x){return gt.H.useRef(x)},Vt.useState=function(x){return gt.H.useState(x)},Vt.useSyncExternalStore=function(x,J,lt){return gt.H.useSyncExternalStore(x,J,lt)},Vt.useTransition=function(){return gt.H.useTransition()},Vt.version="19.1.1",Vt}var ty;function ad(){return ty||(ty=1,dh.exports=zE()),dh.exports}var vn=ad();const D=R_(vn);var mh={exports:{}},Ql={},ph={exports:{}},gh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ey;function UE(){return ey||(ey=1,(function(r){function e(Q,st){var mt=Q.length;Q.push(st);t:for(;0<mt;){var Lt=mt-1>>>1,x=Q[Lt];if(0<o(x,st))Q[Lt]=st,Q[mt]=x,mt=Lt;else break t}}function i(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var st=Q[0],mt=Q.pop();if(mt!==st){Q[0]=mt;t:for(var Lt=0,x=Q.length,J=x>>>1;Lt<J;){var lt=2*(Lt+1)-1,k=Q[lt],Y=lt+1,W=Q[Y];if(0>o(k,mt))Y<x&&0>o(W,k)?(Q[Lt]=W,Q[Y]=mt,Lt=Y):(Q[Lt]=k,Q[lt]=mt,Lt=lt);else if(Y<x&&0>o(W,mt))Q[Lt]=W,Q[Y]=mt,Lt=Y;else break t}}return st}function o(Q,st){var mt=Q.sortIndex-st.sortIndex;return mt!==0?mt:Q.id-st.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;r.unstable_now=function(){return f.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var g=[],v=[],T=1,A=null,M=3,F=!1,at=!1,ot=!1,it=!1,St=typeof setTimeout=="function"?setTimeout:null,Nt=typeof clearTimeout=="function"?clearTimeout:null,Tt=typeof setImmediate<"u"?setImmediate:null;function Xt(Q){for(var st=i(v);st!==null;){if(st.callback===null)s(v);else if(st.startTime<=Q)s(v),st.sortIndex=st.expirationTime,e(g,st);else break;st=i(v)}}function gt(Q){if(ot=!1,Xt(Q),!at)if(i(g)!==null)at=!0,kt||(kt=!0,z());else{var st=i(v);st!==null&&Wt(gt,st.startTime-Q)}}var kt=!1,I=-1,S=5,C=-1;function O(){return it?!0:!(r.unstable_now()-C<S)}function N(){if(it=!1,kt){var Q=r.unstable_now();C=Q;var st=!0;try{t:{at=!1,ot&&(ot=!1,Nt(I),I=-1),F=!0;var mt=M;try{e:{for(Xt(Q),A=i(g);A!==null&&!(A.expirationTime>Q&&O());){var Lt=A.callback;if(typeof Lt=="function"){A.callback=null,M=A.priorityLevel;var x=Lt(A.expirationTime<=Q);if(Q=r.unstable_now(),typeof x=="function"){A.callback=x,Xt(Q),st=!0;break e}A===i(g)&&s(g),Xt(Q)}else s(g);A=i(g)}if(A!==null)st=!0;else{var J=i(v);J!==null&&Wt(gt,J.startTime-Q),st=!1}}break t}finally{A=null,M=mt,F=!1}st=void 0}}finally{st?z():kt=!1}}}var z;if(typeof Tt=="function")z=function(){Tt(N)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Jt=R.port2;R.port1.onmessage=N,z=function(){Jt.postMessage(null)}}else z=function(){St(N,0)};function Wt(Q,st){I=St(function(){Q(r.unstable_now())},st)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return M},r.unstable_next=function(Q){switch(M){case 1:case 2:case 3:var st=3;break;default:st=M}var mt=M;M=st;try{return Q()}finally{M=mt}},r.unstable_requestPaint=function(){it=!0},r.unstable_runWithPriority=function(Q,st){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var mt=M;M=Q;try{return st()}finally{M=mt}},r.unstable_scheduleCallback=function(Q,st,mt){var Lt=r.unstable_now();switch(typeof mt=="object"&&mt!==null?(mt=mt.delay,mt=typeof mt=="number"&&0<mt?Lt+mt:Lt):mt=Lt,Q){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=mt+x,Q={id:T++,callback:st,priorityLevel:Q,startTime:mt,expirationTime:x,sortIndex:-1},mt>Lt?(Q.sortIndex=mt,e(v,Q),i(g)===null&&Q===i(v)&&(ot?(Nt(I),I=-1):ot=!0,Wt(gt,mt-Lt))):(Q.sortIndex=x,e(g,Q),at||F||(at=!0,kt||(kt=!0,z()))),Q},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(Q){var st=M;return function(){var mt=M;M=st;try{return Q.apply(this,arguments)}finally{M=mt}}}})(gh)),gh}var ny;function LE(){return ny||(ny=1,ph.exports=UE()),ph.exports}var yh={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iy;function PE(){if(iy)return on;iy=1;var r=ad();function e(g){var v="https://react.dev/errors/"+g;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)v+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function f(g,v,T){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:g,containerInfo:v,implementation:T}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,v){if(g==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,on.createPortal=function(g,v){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return f(g,v,null,T)},on.flushSync=function(g){var v=d.T,T=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=v,s.p=T,s.d.f()}},on.preconnect=function(g,v){typeof g=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,s.d.C(g,v))},on.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},on.preinit=function(g,v){if(typeof g=="string"&&v&&typeof v.as=="string"){var T=v.as,A=p(T,v.crossOrigin),M=typeof v.integrity=="string"?v.integrity:void 0,F=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;T==="style"?s.d.S(g,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:A,integrity:M,fetchPriority:F}):T==="script"&&s.d.X(g,{crossOrigin:A,integrity:M,fetchPriority:F,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},on.preinitModule=function(g,v){if(typeof g=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var T=p(v.as,v.crossOrigin);s.d.M(g,{crossOrigin:T,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&s.d.M(g)},on.preload=function(g,v){if(typeof g=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var T=v.as,A=p(T,v.crossOrigin);s.d.L(g,T,{crossOrigin:A,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},on.preloadModule=function(g,v){if(typeof g=="string")if(v){var T=p(v.as,v.crossOrigin);s.d.m(g,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:T,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else s.d.m(g)},on.requestFormReset=function(g){s.d.r(g)},on.unstable_batchedUpdates=function(g,v){return g(v)},on.useFormState=function(g,v,T){return d.H.useFormState(g,v,T)},on.useFormStatus=function(){return d.H.useHostTransitionStatus()},on.version="19.1.1",on}var ay;function BE(){if(ay)return yh.exports;ay=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),yh.exports=PE(),yh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ry;function qE(){if(ry)return Ql;ry=1;var r=LE(),e=ad(),i=BE();function s(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function f(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function d(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function p(t){if(f(t)!==t)throw Error(s(188))}function g(t){var n=t.alternate;if(!n){if(n=f(t),n===null)throw Error(s(188));return n!==t?null:t}for(var a=t,l=n;;){var c=a.return;if(c===null)break;var h=c.alternate;if(h===null){if(l=c.return,l!==null){a=l;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===a)return p(c),t;if(h===l)return p(c),n;h=h.sibling}throw Error(s(188))}if(a.return!==l.return)a=c,l=h;else{for(var _=!1,E=c.child;E;){if(E===a){_=!0,a=c,l=h;break}if(E===l){_=!0,l=c,a=h;break}E=E.sibling}if(!_){for(E=h.child;E;){if(E===a){_=!0,a=h,l=c;break}if(E===l){_=!0,l=h,a=c;break}E=E.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:n}function v(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=v(t),n!==null)return n;t=t.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),at=Symbol.for("react.fragment"),ot=Symbol.for("react.strict_mode"),it=Symbol.for("react.profiler"),St=Symbol.for("react.provider"),Nt=Symbol.for("react.consumer"),Tt=Symbol.for("react.context"),Xt=Symbol.for("react.forward_ref"),gt=Symbol.for("react.suspense"),kt=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function z(t){return t===null||typeof t!="object"?null:(t=N&&t[N]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function Jt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case at:return"Fragment";case it:return"Profiler";case ot:return"StrictMode";case gt:return"Suspense";case kt:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case F:return"Portal";case Tt:return(t.displayName||"Context")+".Provider";case Nt:return(t._context.displayName||"Context")+".Consumer";case Xt:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return n=t.displayName||null,n!==null?n:Jt(t.type)||"Memo";case S:n=t._payload,t=t._init;try{return Jt(t(n))}catch{}}return null}var Wt=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,st=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,mt={pending:!1,data:null,method:null,action:null},Lt=[],x=-1;function J(t){return{current:t}}function lt(t){0>x||(t.current=Lt[x],Lt[x]=null,x--)}function k(t,n){x++,Lt[x]=t.current,t.current=n}var Y=J(null),W=J(null),q=J(null),ut=J(null);function yt(t,n){switch(k(q,n),k(W,t),k(Y,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?wg(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=wg(n),t=Rg(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}lt(Y),k(Y,t)}function Bt(){lt(Y),lt(W),lt(q)}function En(t){t.memoizedState!==null&&k(ut,t);var n=Y.current,a=Rg(n,t.type);n!==a&&(k(W,t),k(Y,a))}function Oe(t){W.current===t&&(lt(Y),lt(W)),ut.current===t&&(lt(ut),Bl._currentValue=mt)}var Me=Object.prototype.hasOwnProperty,ue=r.unstable_scheduleCallback,ce=r.unstable_cancelCallback,Pa=r.unstable_shouldYield,It=r.unstable_requestPaint,tt=r.unstable_now,xt=r.unstable_getCurrentPriorityLevel,ct=r.unstable_ImmediatePriority,wt=r.unstable_UserBlockingPriority,te=r.unstable_NormalPriority,Tn=r.unstable_LowPriority,ai=r.unstable_IdlePriority,Ba=r.log,Si=r.unstable_setDisableYieldValue,kn=null,ke=null;function mn(t){if(typeof Ba=="function"&&Si(t),ke&&typeof ke.setStrictMode=="function")try{ke.setStrictMode(kn,t)}catch{}}var Ze=Math.clz32?Math.clz32:Nr,js=Math.log,xr=Math.LN2;function Nr(t){return t>>>=0,t===0?32:31-(js(t)/xr|0)|0}var Rn=256,et=4194304;function bt(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ae(t,n,a){var l=t.pendingLanes;if(l===0)return 0;var c=0,h=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~h,l!==0?c=bt(l):(_&=E,_!==0?c=bt(_):a||(a=E&~t,a!==0&&(c=bt(a))))):(E=l&~h,E!==0?c=bt(E):_!==0?c=bt(_):a||(a=l&~t,a!==0&&(c=bt(a)))),c===0?0:n!==0&&n!==c&&(n&h)===0&&(h=c&-c,a=n&-n,h>=a||h===32&&(a&4194048)!==0)?n:c}function Ge(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function zn(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yi(){var t=Rn;return Rn<<=1,(Rn&4194048)===0&&(Rn=256),t}function Ki(){var t=et;return et<<=1,(et&62914560)===0&&(et=4194304),t}function Vr(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function we(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function go(t,n,a,l,c,h){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,w=t.expirationTimes,B=t.hiddenUpdates;for(a=_&~a;0<a;){var K=31-Ze(a),X=1<<K;E[K]=0,w[K]=-1;var j=B[K];if(j!==null)for(B[K]=null,K=0;K<j.length;K++){var H=j[K];H!==null&&(H.lane&=-536870913)}a&=~X}l!==0&&$i(t,l,0),h!==0&&c===0&&t.tag!==0&&(t.suspendedLanes|=h&~(_&~n))}function $i(t,n,a){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-Ze(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Xi(t,n){var a=t.entangledLanes|=n;for(t=t.entanglements;a;){var l=31-Ze(a),c=1<<l;c&n|t[l]&n&&(t[l]|=n),a&=~c}}function Fs(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Hs(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function wi(){var t=st.p;return t!==0?t:(t=window.event,t===void 0?32:Gg(t.type))}function gc(t,n){var a=st.p;try{return st.p=t,n()}finally{st.p=a}}var ri=Math.random().toString(36).slice(2),Re="__reactFiber$"+ri,Je="__reactProps$"+ri,Ri="__reactContainer$"+ri,qa="__reactEvents$"+ri,ja="__reactListeners$"+ri,yc="__reactHandles$"+ri,Kn="__reactResources$"+ri,Zi="__reactMarker$"+ri;function Ir(t){delete t[Re],delete t[Je],delete t[qa],delete t[ja],delete t[yc]}function si(t){var n=t[Re];if(n)return n;for(var a=t.parentNode;a;){if(n=a[Ri]||a[Re]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=Ng(t);t!==null;){if(a=t[Re])return a;t=Ng(t)}return n}t=a,a=t.parentNode}return null}function li(t){if(t=t[Re]||t[Ri]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function Ji(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(s(33))}function Wi(t){var n=t[Kn];return n||(n=t[Kn]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Ce(t){t[Zi]=!0}var yo=new Set,Fa={};function oi(t,n){ui(t,n),ui(t+"Capture",n)}function ui(t,n){for(Fa[t]=n,t=0;t<n.length;t++)yo.add(n[t])}var Ha=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ci={},Or={};function _c(t){return Me.call(Or,t)?!0:Me.call(ci,t)?!1:Ha.test(t)?Or[t]=!0:(ci[t]=!0,!1)}function Ga(t,n,a){if(_c(n))if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+a)}}function Qa(t,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+a)}}function Un(t,n,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(n,a,""+l)}}var Ya,Mr;function Ci(t){if(Ya===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Ya=n&&n[1]||"",Mr=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ya+t+Mr}var kr=!1;function zr(t,n){if(!t||kr)return"";kr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(H){var j=H}Reflect.construct(t,[],X)}else{try{X.call()}catch(H){j=H}t.call(X.prototype)}}else{try{throw Error()}catch(H){j=H}(X=t())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(H){if(H&&j&&typeof H.stack=="string")return[H.stack,j.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=l.DetermineComponentFrameRoot(),_=h[0],E=h[1];if(_&&E){var w=_.split(`
`),B=E.split(`
`);for(c=l=0;l<w.length&&!w[l].includes("DetermineComponentFrameRoot");)l++;for(;c<B.length&&!B[c].includes("DetermineComponentFrameRoot");)c++;if(l===w.length||c===B.length)for(l=w.length-1,c=B.length-1;1<=l&&0<=c&&w[l]!==B[c];)c--;for(;1<=l&&0<=c;l--,c--)if(w[l]!==B[c]){if(l!==1||c!==1)do if(l--,c--,0>c||w[l]!==B[c]){var K=`
`+w[l].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=l&&0<=c);break}}}finally{kr=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ci(a):""}function vc(t){switch(t.tag){case 26:case 27:case 5:return Ci(t.type);case 16:return Ci("Lazy");case 13:return Ci("Suspense");case 19:return Ci("SuspenseList");case 0:case 15:return zr(t.type,!1);case 11:return zr(t.type.render,!1);case 1:return zr(t.type,!0);case 31:return Ci("Activity");default:return""}}function $n(t){try{var n="";do n+=vc(t),t=t.return;while(t);return n}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function ve(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ta(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Ka(t){var n=ta(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),l=""+t[n];if(!t.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,h=a.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return c.call(this)},set:function(_){l=""+_,h.call(this,_)}}),Object.defineProperty(t,n,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function ea(t){t._valueTracker||(t._valueTracker=Ka(t))}function re(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return t&&(l=ta(t)?t.checked?"true":"false":t.value),t=l,t!==a?(n.setValue(t),!0):!1}function Di(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var $a=/[\n"\\]/g;function Qe(t){return t.replace($a,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Gs(t,n,a,l,c,h,_,E){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),n!=null?_==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+ve(n)):t.value!==""+ve(n)&&(t.value=""+ve(n)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),n!=null?Ys(t,_,ve(n)):a!=null?Ys(t,_,ve(a)):l!=null&&t.removeAttribute("value"),c==null&&h!=null&&(t.defaultChecked=!!h),c!=null&&(t.checked=c&&typeof c!="function"&&typeof c!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+ve(E):t.removeAttribute("name")}function Qs(t,n,a,l,c,h,_,E){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.type=h),n!=null||a!=null){if(!(h!=="submit"&&h!=="reset"||n!=null))return;a=a!=null?""+ve(a):"",n=n!=null?""+ve(n):a,E||n===t.value||(t.value=n),t.defaultValue=n}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_)}function Ys(t,n,a){n==="number"&&Di(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function na(t,n,a,l){if(t=t.options,n){n={};for(var c=0;c<a.length;c++)n["$"+a[c]]=!0;for(a=0;a<t.length;a++)c=n.hasOwnProperty("$"+t[a].value),t[a].selected!==c&&(t[a].selected=c),c&&l&&(t[a].defaultSelected=!0)}else{for(a=""+ve(a),n=null,c=0;c<t.length;c++){if(t[c].value===a){t[c].selected=!0,l&&(t[c].defaultSelected=!0);return}n!==null||t[c].disabled||(n=t[c])}n!==null&&(n.selected=!0)}}function _o(t,n,a){if(n!=null&&(n=""+ve(n),n!==t.value&&(t.value=n),a==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=a!=null?""+ve(a):""}function vo(t,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(s(92));if(Wt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=ve(n),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Ln(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var xi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ks(t,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,a):typeof a!="number"||a===0||xi.has(n)?n==="float"?t.cssFloat=a:t[n]=(""+a).trim():t[n]=a+"px"}function $s(t,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var c in n)l=n[c],n.hasOwnProperty(c)&&a[c]!==l&&Ks(t,c,l)}else for(var h in n)n.hasOwnProperty(h)&&Ks(t,h,n[h])}function Ur(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),To=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xn(t){return To.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Xs=null;function Zs(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ia=null,pn=null;function bo(t){var n=li(t);if(n&&(t=n.stateNode)){var a=t[Je]||null;t:switch(t=n.stateNode,n.type){case"input":if(Gs(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Qe(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==t&&l.form===t.form){var c=l[Je]||null;if(!c)throw Error(s(90));Gs(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===t.form&&re(l)}break t;case"textarea":_o(t,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&na(t,!!a.multiple,n,!1)}}}var Xa=!1;function Za(t,n,a){if(Xa)return t(n,a);Xa=!0;try{var l=t(n);return l}finally{if(Xa=!1,(ia!==null||pn!==null)&&(fu(),ia&&(n=ia,t=pn,pn=ia=null,bo(n),t)))for(n=0;n<t.length;n++)bo(t[n])}}function aa(t,n){var a=t.stateNode;if(a===null)return null;var l=a[Je]||null;if(l===null)return null;a=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break t;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ni=!1;if(gn)try{var ra={};Object.defineProperty(ra,"passive",{get:function(){Ni=!0}}),window.addEventListener("test",ra,ra),window.removeEventListener("test",ra,ra)}catch{Ni=!1}var Pn=null,he=null,Lr=null;function Ao(){if(Lr)return Lr;var t,n=he,a=n.length,l,c="value"in Pn?Pn.value:Pn.textContent,h=c.length;for(t=0;t<a&&n[t]===c[t];t++);var _=a-t;for(l=1;l<=_&&n[a-l]===c[h-l];l++);return Lr=c.slice(t,1<l?1-l:void 0)}function Ja(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Wa(){return!0}function Js(){return!1}function qe(t){function n(a,l,c,h,_){this._reactName=a,this._targetInst=c,this.type=l,this.nativeEvent=h,this.target=_,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(h):h[E]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Wa:Js,this.isPropagationStopped=Js,this}return T(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wa)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wa)},persist:function(){},isPersistent:Wa}),n}var sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tr=qe(sn),er=T({},sn,{view:0,detail:0}),nr=qe(er),Pr,ir,fi,ar=T({},er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fi&&(fi&&t.type==="mousemove"?(Pr=t.screenX-fi.screenX,ir=t.screenY-fi.screenY):ir=Pr=0,fi=t),Pr)},movementY:function(t){return"movementY"in t?t.movementY:ir}}),rr=qe(ar),Ec=T({},ar,{dataTransfer:0}),So=qe(Ec),sr=T({},er,{relatedTarget:0}),Br=qe(sr),wo=T({},sn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ws=qe(wo),tl=T({},sn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ro=qe(tl),qr=T({},sn,{data:0}),el=qe(qr),Co={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Do={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xo(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Do[t])?!!n[t]:!1}function jr(){return xo}var No=T({},er,{key:function(t){if(t.key){var n=Co[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Ja(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vi[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jr,charCode:function(t){return t.type==="keypress"?Ja(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ja(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Fr=qe(No),yn=T({},ar,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nl=qe(yn),Vo=T({},er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jr}),sa=qe(Vo),u=T({},sn,{propertyName:0,elapsedTime:0,pseudoElement:0}),m=qe(u),y=T({},ar,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),b=qe(y),P=T({},sn,{newState:0,oldState:0}),G=qe(P),rt=[9,13,27,32],Rt=gn&&"CompositionEvent"in window,me=null;gn&&"documentMode"in document&&(me=document.documentMode);var ee=gn&&"TextEvent"in window&&!me,De=gn&&(!Rt||me&&8<me&&11>=me),Cn=" ",hi=!1;function Zn(t,n){switch(t){case"keyup":return rt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jn(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wn=!1;function il(t,n){switch(t){case"compositionend":return Jn(n);case"keypress":return n.which!==32?null:(hi=!0,Cn);case"textInput":return t=n.data,t===Cn&&hi?null:t;default:return null}}function l0(t,n){if(Wn)return t==="compositionend"||!Rt&&Zn(t,n)?(t=Ao(),Lr=he=Pn=null,Wn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return De&&n.locale!=="ko"?null:n.data;default:return null}}var o0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pd(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!o0[t.type]:n==="textarea"}function Bd(t,n,a,l){ia?pn?pn.push(l):pn=[l]:ia=l,n=yu(n,"onChange"),0<n.length&&(a=new tr("onChange","change",null,a,l),t.push({event:a,listeners:n}))}var al=null,rl=null;function u0(t){Eg(t,0)}function Io(t){var n=Ji(t);if(re(n))return t}function qd(t,n){if(t==="change")return n}var jd=!1;if(gn){var Tc;if(gn){var bc="oninput"in document;if(!bc){var Fd=document.createElement("div");Fd.setAttribute("oninput","return;"),bc=typeof Fd.oninput=="function"}Tc=bc}else Tc=!1;jd=Tc&&(!document.documentMode||9<document.documentMode)}function Hd(){al&&(al.detachEvent("onpropertychange",Gd),rl=al=null)}function Gd(t){if(t.propertyName==="value"&&Io(rl)){var n=[];Bd(n,rl,t,Zs(t)),Za(u0,n)}}function c0(t,n,a){t==="focusin"?(Hd(),al=n,rl=a,al.attachEvent("onpropertychange",Gd)):t==="focusout"&&Hd()}function f0(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Io(rl)}function h0(t,n){if(t==="click")return Io(n)}function d0(t,n){if(t==="input"||t==="change")return Io(n)}function m0(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Dn=typeof Object.is=="function"?Object.is:m0;function sl(t,n){if(Dn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var c=a[l];if(!Me.call(n,c)||!Dn(t[c],n[c]))return!1}return!0}function Qd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yd(t,n){var a=Qd(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=n&&l>=n)return{node:a,offset:n-t};t=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Qd(a)}}function Kd(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Kd(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function $d(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Di(t.document);n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=Di(t.document)}return n}function Ac(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var p0=gn&&"documentMode"in document&&11>=document.documentMode,Hr=null,Sc=null,ll=null,wc=!1;function Xd(t,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;wc||Hr==null||Hr!==Di(l)||(l=Hr,"selectionStart"in l&&Ac(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ll&&sl(ll,l)||(ll=l,l=yu(Sc,"onSelect"),0<l.length&&(n=new tr("onSelect","select",null,n,a),t.push({event:n,listeners:l}),n.target=Hr)))}function lr(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var Gr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},Rc={},Zd={};gn&&(Zd=document.createElement("div").style,"AnimationEvent"in window||(delete Gr.animationend.animation,delete Gr.animationiteration.animation,delete Gr.animationstart.animation),"TransitionEvent"in window||delete Gr.transitionend.transition);function or(t){if(Rc[t])return Rc[t];if(!Gr[t])return t;var n=Gr[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in Zd)return Rc[t]=n[a];return t}var Jd=or("animationend"),Wd=or("animationiteration"),tm=or("animationstart"),g0=or("transitionrun"),y0=or("transitionstart"),_0=or("transitioncancel"),em=or("transitionend"),nm=new Map,Cc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cc.push("scrollEnd");function ti(t,n){nm.set(t,n),oi(n,[t])}var im=new WeakMap;function Bn(t,n){if(typeof t=="object"&&t!==null){var a=im.get(t);return a!==void 0?a:(n={value:t,source:n,stack:$n(n)},im.set(t,n),n)}return{value:t,source:n,stack:$n(n)}}var qn=[],Qr=0,Dc=0;function Oo(){for(var t=Qr,n=Dc=Qr=0;n<t;){var a=qn[n];qn[n++]=null;var l=qn[n];qn[n++]=null;var c=qn[n];qn[n++]=null;var h=qn[n];if(qn[n++]=null,l!==null&&c!==null){var _=l.pending;_===null?c.next=c:(c.next=_.next,_.next=c),l.pending=c}h!==0&&am(a,c,h)}}function Mo(t,n,a,l){qn[Qr++]=t,qn[Qr++]=n,qn[Qr++]=a,qn[Qr++]=l,Dc|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function xc(t,n,a,l){return Mo(t,n,a,l),ko(t)}function Yr(t,n){return Mo(t,null,null,n),ko(t)}function am(t,n,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var c=!1,h=t.return;h!==null;)h.childLanes|=a,l=h.alternate,l!==null&&(l.childLanes|=a),h.tag===22&&(t=h.stateNode,t===null||t._visibility&1||(c=!0)),t=h,h=h.return;return t.tag===3?(h=t.stateNode,c&&n!==null&&(c=31-Ze(a),t=h.hiddenUpdates,l=t[c],l===null?t[c]=[n]:l.push(n),n.lane=a|536870912),h):null}function ko(t){if(50<Il)throw Il=0,zf=null,Error(s(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Kr={};function v0(t,n,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(t,n,a,l){return new v0(t,n,a,l)}function Nc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ii(t,n){var a=t.alternate;return a===null?(a=xn(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function rm(t,n){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,n=a.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function zo(t,n,a,l,c,h){var _=0;if(l=t,typeof t=="function")Nc(t)&&(_=1);else if(typeof t=="string")_=TE(t,a,Y.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case C:return t=xn(31,a,n,c),t.elementType=C,t.lanes=h,t;case at:return ur(a.children,c,h,n);case ot:_=8,c|=24;break;case it:return t=xn(12,a,n,c|2),t.elementType=it,t.lanes=h,t;case gt:return t=xn(13,a,n,c),t.elementType=gt,t.lanes=h,t;case kt:return t=xn(19,a,n,c),t.elementType=kt,t.lanes=h,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case St:case Tt:_=10;break t;case Nt:_=9;break t;case Xt:_=11;break t;case I:_=14;break t;case S:_=16,l=null;break t}_=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return n=xn(_,a,n,c),n.elementType=t,n.type=l,n.lanes=h,n}function ur(t,n,a,l){return t=xn(7,t,l,n),t.lanes=a,t}function Vc(t,n,a){return t=xn(6,t,null,n),t.lanes=a,t}function Ic(t,n,a){return n=xn(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var $r=[],Xr=0,Uo=null,Lo=0,jn=[],Fn=0,cr=null,Oi=1,Mi="";function fr(t,n){$r[Xr++]=Lo,$r[Xr++]=Uo,Uo=t,Lo=n}function sm(t,n,a){jn[Fn++]=Oi,jn[Fn++]=Mi,jn[Fn++]=cr,cr=t;var l=Oi;t=Mi;var c=32-Ze(l)-1;l&=~(1<<c),a+=1;var h=32-Ze(n)+c;if(30<h){var _=c-c%5;h=(l&(1<<_)-1).toString(32),l>>=_,c-=_,Oi=1<<32-Ze(n)+c|a<<c|l,Mi=h+t}else Oi=1<<h|a<<c|l,Mi=t}function Oc(t){t.return!==null&&(fr(t,1),sm(t,1,0))}function Mc(t){for(;t===Uo;)Uo=$r[--Xr],$r[Xr]=null,Lo=$r[--Xr],$r[Xr]=null;for(;t===cr;)cr=jn[--Fn],jn[Fn]=null,Mi=jn[--Fn],jn[Fn]=null,Oi=jn[--Fn],jn[Fn]=null}var _n=null,Ae=null,Zt=!1,hr=null,di=!1,kc=Error(s(519));function dr(t){var n=Error(s(418,""));throw cl(Bn(n,t)),kc}function lm(t){var n=t.stateNode,a=t.type,l=t.memoizedProps;switch(n[Re]=t,n[Je]=l,a){case"dialog":Ut("cancel",n),Ut("close",n);break;case"iframe":case"object":case"embed":Ut("load",n);break;case"video":case"audio":for(a=0;a<Ml.length;a++)Ut(Ml[a],n);break;case"source":Ut("error",n);break;case"img":case"image":case"link":Ut("error",n),Ut("load",n);break;case"details":Ut("toggle",n);break;case"input":Ut("invalid",n),Qs(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ea(n);break;case"select":Ut("invalid",n);break;case"textarea":Ut("invalid",n),vo(n,l.value,l.defaultValue,l.children),ea(n)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||Sg(n.textContent,a)?(l.popover!=null&&(Ut("beforetoggle",n),Ut("toggle",n)),l.onScroll!=null&&Ut("scroll",n),l.onScrollEnd!=null&&Ut("scrollend",n),l.onClick!=null&&(n.onclick=_u),n=!0):n=!1,n||dr(t)}function om(t){for(_n=t.return;_n;)switch(_n.tag){case 5:case 13:di=!1;return;case 27:case 3:di=!0;return;default:_n=_n.return}}function ol(t){if(t!==_n)return!1;if(!Zt)return om(t),Zt=!0,!1;var n=t.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Jf(t.type,t.memoizedProps)),a=!a),a&&Ae&&dr(t),om(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));t:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(n===0){Ae=ni(t.nextSibling);break t}n--}else a!=="$"&&a!=="$!"&&a!=="$?"||n++;t=t.nextSibling}Ae=null}}else n===27?(n=Ae,ba(t.type)?(t=nh,nh=null,Ae=t):Ae=n):Ae=_n?ni(t.stateNode.nextSibling):null;return!0}function ul(){Ae=_n=null,Zt=!1}function um(){var t=hr;return t!==null&&(Sn===null?Sn=t:Sn.push.apply(Sn,t),hr=null),t}function cl(t){hr===null?hr=[t]:hr.push(t)}var zc=J(null),mr=null,ki=null;function la(t,n,a){k(zc,n._currentValue),n._currentValue=a}function zi(t){t._currentValue=zc.current,lt(zc)}function Uc(t,n,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===a)break;t=t.return}}function Lc(t,n,a,l){var c=t.child;for(c!==null&&(c.return=t);c!==null;){var h=c.dependencies;if(h!==null){var _=c.child;h=h.firstContext;t:for(;h!==null;){var E=h;h=c;for(var w=0;w<n.length;w++)if(E.context===n[w]){h.lanes|=a,E=h.alternate,E!==null&&(E.lanes|=a),Uc(h.return,a,t),l||(_=null);break t}h=E.next}}else if(c.tag===18){if(_=c.return,_===null)throw Error(s(341));_.lanes|=a,h=_.alternate,h!==null&&(h.lanes|=a),Uc(_,a,t),_=null}else _=c.child;if(_!==null)_.return=c;else for(_=c;_!==null;){if(_===t){_=null;break}if(c=_.sibling,c!==null){c.return=_.return,_=c;break}_=_.return}c=_}}function fl(t,n,a,l){t=null;for(var c=n,h=!1;c!==null;){if(!h){if((c.flags&524288)!==0)h=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var _=c.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var E=c.type;Dn(c.pendingProps.value,_.value)||(t!==null?t.push(E):t=[E])}}else if(c===ut.current){if(_=c.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(t!==null?t.push(Bl):t=[Bl])}c=c.return}t!==null&&Lc(n,t,a,l),n.flags|=262144}function Po(t){for(t=t.firstContext;t!==null;){if(!Dn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function pr(t){mr=t,ki=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ln(t){return cm(mr,t)}function Bo(t,n){return mr===null&&pr(t),cm(t,n)}function cm(t,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},ki===null){if(t===null)throw Error(s(308));ki=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else ki=ki.next=n;return a}var E0=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(a){return a()})}},T0=r.unstable_scheduleCallback,b0=r.unstable_NormalPriority,je={$$typeof:Tt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pc(){return{controller:new E0,data:new Map,refCount:0}}function hl(t){t.refCount--,t.refCount===0&&T0(b0,function(){t.controller.abort()})}var dl=null,Bc=0,Zr=0,Jr=null;function A0(t,n){if(dl===null){var a=dl=[];Bc=0,Zr=Ff(),Jr={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Bc++,n.then(fm,fm),n}function fm(){if(--Bc===0&&dl!==null){Jr!==null&&(Jr.status="fulfilled");var t=dl;dl=null,Zr=0,Jr=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function S0(t,n){var a=[],l={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var c=0;c<a.length;c++)(0,a[c])(n)},function(c){for(l.status="rejected",l.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),l}var hm=Q.S;Q.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&A0(t,n),hm!==null&&hm(t,n)};var gr=J(null);function qc(){var t=gr.current;return t!==null?t:de.pooledCache}function qo(t,n){n===null?k(gr,gr.current):k(gr,n.pool)}function dm(){var t=qc();return t===null?null:{parent:je._currentValue,pool:t}}var ml=Error(s(460)),mm=Error(s(474)),jo=Error(s(542)),jc={then:function(){}};function pm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Fo(){}function gm(t,n,a){switch(a=t[a],a===void 0?t.push(n):a!==n&&(n.then(Fo,Fo),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,_m(t),t;default:if(typeof n.status=="string")n.then(Fo,Fo);else{if(t=de,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=l}},function(l){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,_m(t),t}throw pl=n,ml}}var pl=null;function ym(){if(pl===null)throw Error(s(459));var t=pl;return pl=null,t}function _m(t){if(t===ml||t===jo)throw Error(s(483))}var oa=!1;function Fc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hc(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ua(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ca(t,n,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(ne&2)!==0){var c=l.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n,n=ko(t),am(t,null,a),n}return Mo(t,l,n,a),ko(t)}function gl(t,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,Xi(t,a)}}function Gc(t,n){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var c=null,h=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};h===null?c=h=_:h=h.next=_,a=a.next}while(a!==null);h===null?c=h=n:h=h.next=n}else c=h=n;a={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}var Qc=!1;function yl(){if(Qc){var t=Jr;if(t!==null)throw t}}function _l(t,n,a,l){Qc=!1;var c=t.updateQueue;oa=!1;var h=c.firstBaseUpdate,_=c.lastBaseUpdate,E=c.shared.pending;if(E!==null){c.shared.pending=null;var w=E,B=w.next;w.next=null,_===null?h=B:_.next=B,_=w;var K=t.alternate;K!==null&&(K=K.updateQueue,E=K.lastBaseUpdate,E!==_&&(E===null?K.firstBaseUpdate=B:E.next=B,K.lastBaseUpdate=w))}if(h!==null){var X=c.baseState;_=0,K=B=w=null,E=h;do{var j=E.lane&-536870913,H=j!==E.lane;if(H?(qt&j)===j:(l&j)===j){j!==0&&j===Zr&&(Qc=!0),K!==null&&(K=K.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var At=t,_t=E;j=n;var oe=a;switch(_t.tag){case 1:if(At=_t.payload,typeof At=="function"){X=At.call(oe,X,j);break t}X=At;break t;case 3:At.flags=At.flags&-65537|128;case 0:if(At=_t.payload,j=typeof At=="function"?At.call(oe,X,j):At,j==null)break t;X=T({},X,j);break t;case 2:oa=!0}}j=E.callback,j!==null&&(t.flags|=64,H&&(t.flags|=8192),H=c.callbacks,H===null?c.callbacks=[j]:H.push(j))}else H={lane:j,tag:E.tag,payload:E.payload,callback:E.callback,next:null},K===null?(B=K=H,w=X):K=K.next=H,_|=j;if(E=E.next,E===null){if(E=c.shared.pending,E===null)break;H=E,E=H.next,H.next=null,c.lastBaseUpdate=H,c.shared.pending=null}}while(!0);K===null&&(w=X),c.baseState=w,c.firstBaseUpdate=B,c.lastBaseUpdate=K,h===null&&(c.shared.lanes=0),_a|=_,t.lanes=_,t.memoizedState=X}}function vm(t,n){if(typeof t!="function")throw Error(s(191,t));t.call(n)}function Em(t,n){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)vm(a[t],n)}var Wr=J(null),Ho=J(0);function Tm(t,n){t=Fi,k(Ho,t),k(Wr,n),Fi=t|n.baseLanes}function Yc(){k(Ho,Fi),k(Wr,Wr.current)}function Kc(){Fi=Ho.current,lt(Wr),lt(Ho)}var fa=0,Ot=null,se=null,ze=null,Go=!1,ts=!1,yr=!1,Qo=0,vl=0,es=null,w0=0;function xe(){throw Error(s(321))}function $c(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!Dn(t[a],n[a]))return!1;return!0}function Xc(t,n,a,l,c,h){return fa=h,Ot=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Q.H=t===null||t.memoizedState===null?ap:rp,yr=!1,h=a(l,c),yr=!1,ts&&(h=Am(n,a,l,c)),bm(t),h}function bm(t){Q.H=Jo;var n=se!==null&&se.next!==null;if(fa=0,ze=se=Ot=null,Go=!1,vl=0,es=null,n)throw Error(s(300));t===null||Ye||(t=t.dependencies,t!==null&&Po(t)&&(Ye=!0))}function Am(t,n,a,l){Ot=t;var c=0;do{if(ts&&(es=null),vl=0,ts=!1,25<=c)throw Error(s(301));if(c+=1,ze=se=null,t.updateQueue!=null){var h=t.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}Q.H=I0,h=n(a,l)}while(ts);return h}function R0(){var t=Q.H,n=t.useState()[0];return n=typeof n.then=="function"?El(n):n,t=t.useState()[0],(se!==null?se.memoizedState:null)!==t&&(Ot.flags|=1024),n}function Zc(){var t=Qo!==0;return Qo=0,t}function Jc(t,n,a){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a}function Wc(t){if(Go){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}Go=!1}fa=0,ze=se=Ot=null,ts=!1,vl=Qo=0,es=null}function bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?Ot.memoizedState=ze=t:ze=ze.next=t,ze}function Ue(){if(se===null){var t=Ot.alternate;t=t!==null?t.memoizedState:null}else t=se.next;var n=ze===null?Ot.memoizedState:ze.next;if(n!==null)ze=n,se=t;else{if(t===null)throw Ot.alternate===null?Error(s(467)):Error(s(310));se=t,t={memoizedState:se.memoizedState,baseState:se.baseState,baseQueue:se.baseQueue,queue:se.queue,next:null},ze===null?Ot.memoizedState=ze=t:ze=ze.next=t}return ze}function tf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function El(t){var n=vl;return vl+=1,es===null&&(es=[]),t=gm(es,t,n),n=Ot,(ze===null?n.memoizedState:ze.next)===null&&(n=n.alternate,Q.H=n===null||n.memoizedState===null?ap:rp),t}function Yo(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return El(t);if(t.$$typeof===Tt)return ln(t)}throw Error(s(438,String(t)))}function ef(t){var n=null,a=Ot.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=Ot.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=tf(),Ot.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(t),l=0;l<t;l++)a[l]=O;return n.index++,a}function Ui(t,n){return typeof n=="function"?n(t):n}function Ko(t){var n=Ue();return nf(n,se,t)}function nf(t,n,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var c=t.baseQueue,h=l.pending;if(h!==null){if(c!==null){var _=c.next;c.next=h.next,h.next=_}n.baseQueue=c=h,l.pending=null}if(h=t.baseState,c===null)t.memoizedState=h;else{n=c.next;var E=_=null,w=null,B=n,K=!1;do{var X=B.lane&-536870913;if(X!==B.lane?(qt&X)===X:(fa&X)===X){var j=B.revertLane;if(j===0)w!==null&&(w=w.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),X===Zr&&(K=!0);else if((fa&j)===j){B=B.next,j===Zr&&(K=!0);continue}else X={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},w===null?(E=w=X,_=h):w=w.next=X,Ot.lanes|=j,_a|=j;X=B.action,yr&&a(h,X),h=B.hasEagerState?B.eagerState:a(h,X)}else j={lane:X,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},w===null?(E=w=j,_=h):w=w.next=j,Ot.lanes|=X,_a|=X;B=B.next}while(B!==null&&B!==n);if(w===null?_=h:w.next=E,!Dn(h,t.memoizedState)&&(Ye=!0,K&&(a=Jr,a!==null)))throw a;t.memoizedState=h,t.baseState=_,t.baseQueue=w,l.lastRenderedState=h}return c===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function af(t){var n=Ue(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,c=a.pending,h=n.memoizedState;if(c!==null){a.pending=null;var _=c=c.next;do h=t(h,_.action),_=_.next;while(_!==c);Dn(h,n.memoizedState)||(Ye=!0),n.memoizedState=h,n.baseQueue===null&&(n.baseState=h),a.lastRenderedState=h}return[h,l]}function Sm(t,n,a){var l=Ot,c=Ue(),h=Zt;if(h){if(a===void 0)throw Error(s(407));a=a()}else a=n();var _=!Dn((se||c).memoizedState,a);_&&(c.memoizedState=a,Ye=!0),c=c.queue;var E=Cm.bind(null,l,c,t);if(Tl(2048,8,E,[t]),c.getSnapshot!==n||_||ze!==null&&ze.memoizedState.tag&1){if(l.flags|=2048,ns(9,$o(),Rm.bind(null,l,c,a,n),null),de===null)throw Error(s(349));h||(fa&124)!==0||wm(l,n,a)}return a}function wm(t,n,a){t.flags|=16384,t={getSnapshot:n,value:a},n=Ot.updateQueue,n===null?(n=tf(),Ot.updateQueue=n,n.stores=[t]):(a=n.stores,a===null?n.stores=[t]:a.push(t))}function Rm(t,n,a,l){n.value=a,n.getSnapshot=l,Dm(n)&&xm(t)}function Cm(t,n,a){return a(function(){Dm(n)&&xm(t)})}function Dm(t){var n=t.getSnapshot;t=t.value;try{var a=n();return!Dn(t,a)}catch{return!0}}function xm(t){var n=Yr(t,2);n!==null&&Mn(n,t,2)}function rf(t){var n=bn();if(typeof t=="function"){var a=t;if(t=a(),yr){mn(!0);try{a()}finally{mn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:t},n}function Nm(t,n,a,l){return t.baseState=a,nf(t,se,typeof l=="function"?l:Ui)}function C0(t,n,a,l,c){if(Zo(t))throw Error(s(485));if(t=n.action,t!==null){var h={payload:c,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){h.listeners.push(_)}};Q.T!==null?a(!0):h.isTransition=!1,l(h),a=n.pending,a===null?(h.next=n.pending=h,Vm(n,h)):(h.next=a.next,n.pending=a.next=h)}}function Vm(t,n){var a=n.action,l=n.payload,c=t.state;if(n.isTransition){var h=Q.T,_={};Q.T=_;try{var E=a(c,l),w=Q.S;w!==null&&w(_,E),Im(t,n,E)}catch(B){sf(t,n,B)}finally{Q.T=h}}else try{h=a(c,l),Im(t,n,h)}catch(B){sf(t,n,B)}}function Im(t,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Om(t,n,l)},function(l){return sf(t,n,l)}):Om(t,n,a)}function Om(t,n,a){n.status="fulfilled",n.value=a,Mm(n),t.state=a,n=t.pending,n!==null&&(a=n.next,a===n?t.pending=null:(a=a.next,n.next=a,Vm(t,a)))}function sf(t,n,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,Mm(n),n=n.next;while(n!==l)}t.action=null}function Mm(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function km(t,n){return n}function zm(t,n){if(Zt){var a=de.formState;if(a!==null){t:{var l=Ot;if(Zt){if(Ae){e:{for(var c=Ae,h=di;c.nodeType!==8;){if(!h){c=null;break e}if(c=ni(c.nextSibling),c===null){c=null;break e}}h=c.data,c=h==="F!"||h==="F"?c:null}if(c){Ae=ni(c.nextSibling),l=c.data==="F!";break t}}dr(l)}l=!1}l&&(n=a[0])}}return a=bn(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:km,lastRenderedState:n},a.queue=l,a=ep.bind(null,Ot,l),l.dispatch=a,l=rf(!1),h=ff.bind(null,Ot,!1,l.queue),l=bn(),c={state:n,dispatch:null,action:t,pending:null},l.queue=c,a=C0.bind(null,Ot,c,h,a),c.dispatch=a,l.memoizedState=t,[n,a,!1]}function Um(t){var n=Ue();return Lm(n,se,t)}function Lm(t,n,a){if(n=nf(t,n,km)[0],t=Ko(Ui)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=El(n)}catch(_){throw _===ml?jo:_}else l=n;n=Ue();var c=n.queue,h=c.dispatch;return a!==n.memoizedState&&(Ot.flags|=2048,ns(9,$o(),D0.bind(null,c,a),null)),[l,h,t]}function D0(t,n){t.action=n}function Pm(t){var n=Ue(),a=se;if(a!==null)return Lm(n,a,t);Ue(),n=n.memoizedState,a=Ue();var l=a.queue.dispatch;return a.memoizedState=t,[n,l,!1]}function ns(t,n,a,l){return t={tag:t,create:a,deps:l,inst:n,next:null},n=Ot.updateQueue,n===null&&(n=tf(),Ot.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,n.lastEffect=t),t}function $o(){return{destroy:void 0,resource:void 0}}function Bm(){return Ue().memoizedState}function Xo(t,n,a,l){var c=bn();l=l===void 0?null:l,Ot.flags|=t,c.memoizedState=ns(1|n,$o(),a,l)}function Tl(t,n,a,l){var c=Ue();l=l===void 0?null:l;var h=c.memoizedState.inst;se!==null&&l!==null&&$c(l,se.memoizedState.deps)?c.memoizedState=ns(n,h,a,l):(Ot.flags|=t,c.memoizedState=ns(1|n,h,a,l))}function qm(t,n){Xo(8390656,8,t,n)}function jm(t,n){Tl(2048,8,t,n)}function Fm(t,n){return Tl(4,2,t,n)}function Hm(t,n){return Tl(4,4,t,n)}function Gm(t,n){if(typeof n=="function"){t=t();var a=n(t);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Qm(t,n,a){a=a!=null?a.concat([t]):null,Tl(4,4,Gm.bind(null,n,t),a)}function lf(){}function Ym(t,n){var a=Ue();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&$c(n,l[1])?l[0]:(a.memoizedState=[t,n],t)}function Km(t,n){var a=Ue();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&$c(n,l[1]))return l[0];if(l=t(),yr){mn(!0);try{t()}finally{mn(!1)}}return a.memoizedState=[l,n],l}function of(t,n,a){return a===void 0||(fa&1073741824)!==0?t.memoizedState=n:(t.memoizedState=a,t=Zp(),Ot.lanes|=t,_a|=t,a)}function $m(t,n,a,l){return Dn(a,n)?a:Wr.current!==null?(t=of(t,a,l),Dn(t,n)||(Ye=!0),t):(fa&42)===0?(Ye=!0,t.memoizedState=a):(t=Zp(),Ot.lanes|=t,_a|=t,n)}function Xm(t,n,a,l,c){var h=st.p;st.p=h!==0&&8>h?h:8;var _=Q.T,E={};Q.T=E,ff(t,!1,n,a);try{var w=c(),B=Q.S;if(B!==null&&B(E,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var K=S0(w,l);bl(t,n,K,On(t))}else bl(t,n,l,On(t))}catch(X){bl(t,n,{then:function(){},status:"rejected",reason:X},On())}finally{st.p=h,Q.T=_}}function x0(){}function uf(t,n,a,l){if(t.tag!==5)throw Error(s(476));var c=Zm(t).queue;Xm(t,c,n,mt,a===null?x0:function(){return Jm(t),a(l)})}function Zm(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:mt,baseState:mt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:mt},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:a},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function Jm(t){var n=Zm(t).next.queue;bl(t,n,{},On())}function cf(){return ln(Bl)}function Wm(){return Ue().memoizedState}function tp(){return Ue().memoizedState}function N0(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var a=On();t=ua(a);var l=ca(n,t,a);l!==null&&(Mn(l,n,a),gl(l,n,a)),n={cache:Pc()},t.payload=n;return}n=n.return}}function V0(t,n,a){var l=On();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Zo(t)?np(n,a):(a=xc(t,n,a,l),a!==null&&(Mn(a,t,l),ip(a,n,l)))}function ep(t,n,a){var l=On();bl(t,n,a,l)}function bl(t,n,a,l){var c={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Zo(t))np(n,c);else{var h=t.alternate;if(t.lanes===0&&(h===null||h.lanes===0)&&(h=n.lastRenderedReducer,h!==null))try{var _=n.lastRenderedState,E=h(_,a);if(c.hasEagerState=!0,c.eagerState=E,Dn(E,_))return Mo(t,n,c,0),de===null&&Oo(),!1}catch{}finally{}if(a=xc(t,n,c,l),a!==null)return Mn(a,t,l),ip(a,n,l),!0}return!1}function ff(t,n,a,l){if(l={lane:2,revertLane:Ff(),action:l,hasEagerState:!1,eagerState:null,next:null},Zo(t)){if(n)throw Error(s(479))}else n=xc(t,a,l,2),n!==null&&Mn(n,t,2)}function Zo(t){var n=t.alternate;return t===Ot||n!==null&&n===Ot}function np(t,n){ts=Go=!0;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}function ip(t,n,a){if((a&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,Xi(t,a)}}var Jo={readContext:ln,use:Yo,useCallback:xe,useContext:xe,useEffect:xe,useImperativeHandle:xe,useLayoutEffect:xe,useInsertionEffect:xe,useMemo:xe,useReducer:xe,useRef:xe,useState:xe,useDebugValue:xe,useDeferredValue:xe,useTransition:xe,useSyncExternalStore:xe,useId:xe,useHostTransitionStatus:xe,useFormState:xe,useActionState:xe,useOptimistic:xe,useMemoCache:xe,useCacheRefresh:xe},ap={readContext:ln,use:Yo,useCallback:function(t,n){return bn().memoizedState=[t,n===void 0?null:n],t},useContext:ln,useEffect:qm,useImperativeHandle:function(t,n,a){a=a!=null?a.concat([t]):null,Xo(4194308,4,Gm.bind(null,n,t),a)},useLayoutEffect:function(t,n){return Xo(4194308,4,t,n)},useInsertionEffect:function(t,n){Xo(4,2,t,n)},useMemo:function(t,n){var a=bn();n=n===void 0?null:n;var l=t();if(yr){mn(!0);try{t()}finally{mn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(t,n,a){var l=bn();if(a!==void 0){var c=a(n);if(yr){mn(!0);try{a(n)}finally{mn(!1)}}}else c=n;return l.memoizedState=l.baseState=c,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:c},l.queue=t,t=t.dispatch=V0.bind(null,Ot,t),[l.memoizedState,t]},useRef:function(t){var n=bn();return t={current:t},n.memoizedState=t},useState:function(t){t=rf(t);var n=t.queue,a=ep.bind(null,Ot,n);return n.dispatch=a,[t.memoizedState,a]},useDebugValue:lf,useDeferredValue:function(t,n){var a=bn();return of(a,t,n)},useTransition:function(){var t=rf(!1);return t=Xm.bind(null,Ot,t.queue,!0,!1),bn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,a){var l=Ot,c=bn();if(Zt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),de===null)throw Error(s(349));(qt&124)!==0||wm(l,n,a)}c.memoizedState=a;var h={value:a,getSnapshot:n};return c.queue=h,qm(Cm.bind(null,l,h,t),[t]),l.flags|=2048,ns(9,$o(),Rm.bind(null,l,h,a,n),null),a},useId:function(){var t=bn(),n=de.identifierPrefix;if(Zt){var a=Mi,l=Oi;a=(l&~(1<<32-Ze(l)-1)).toString(32)+a,n="«"+n+"R"+a,a=Qo++,0<a&&(n+="H"+a.toString(32)),n+="»"}else a=w0++,n="«"+n+"r"+a.toString(32)+"»";return t.memoizedState=n},useHostTransitionStatus:cf,useFormState:zm,useActionState:zm,useOptimistic:function(t){var n=bn();n.memoizedState=n.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=ff.bind(null,Ot,!0,a),a.dispatch=n,[t,n]},useMemoCache:ef,useCacheRefresh:function(){return bn().memoizedState=N0.bind(null,Ot)}},rp={readContext:ln,use:Yo,useCallback:Ym,useContext:ln,useEffect:jm,useImperativeHandle:Qm,useInsertionEffect:Fm,useLayoutEffect:Hm,useMemo:Km,useReducer:Ko,useRef:Bm,useState:function(){return Ko(Ui)},useDebugValue:lf,useDeferredValue:function(t,n){var a=Ue();return $m(a,se.memoizedState,t,n)},useTransition:function(){var t=Ko(Ui)[0],n=Ue().memoizedState;return[typeof t=="boolean"?t:El(t),n]},useSyncExternalStore:Sm,useId:Wm,useHostTransitionStatus:cf,useFormState:Um,useActionState:Um,useOptimistic:function(t,n){var a=Ue();return Nm(a,se,t,n)},useMemoCache:ef,useCacheRefresh:tp},I0={readContext:ln,use:Yo,useCallback:Ym,useContext:ln,useEffect:jm,useImperativeHandle:Qm,useInsertionEffect:Fm,useLayoutEffect:Hm,useMemo:Km,useReducer:af,useRef:Bm,useState:function(){return af(Ui)},useDebugValue:lf,useDeferredValue:function(t,n){var a=Ue();return se===null?of(a,t,n):$m(a,se.memoizedState,t,n)},useTransition:function(){var t=af(Ui)[0],n=Ue().memoizedState;return[typeof t=="boolean"?t:El(t),n]},useSyncExternalStore:Sm,useId:Wm,useHostTransitionStatus:cf,useFormState:Pm,useActionState:Pm,useOptimistic:function(t,n){var a=Ue();return se!==null?Nm(a,se,t,n):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:ef,useCacheRefresh:tp},is=null,Al=0;function Wo(t){var n=Al;return Al+=1,is===null&&(is=[]),gm(is,t,n)}function Sl(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function tu(t,n){throw n.$$typeof===A?Error(s(525)):(t=Object.prototype.toString.call(n),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function sp(t){var n=t._init;return n(t._payload)}function lp(t){function n(U,V){if(t){var L=U.deletions;L===null?(U.deletions=[V],U.flags|=16):L.push(V)}}function a(U,V){if(!t)return null;for(;V!==null;)n(U,V),V=V.sibling;return null}function l(U){for(var V=new Map;U!==null;)U.key!==null?V.set(U.key,U):V.set(U.index,U),U=U.sibling;return V}function c(U,V){return U=Ii(U,V),U.index=0,U.sibling=null,U}function h(U,V,L){return U.index=L,t?(L=U.alternate,L!==null?(L=L.index,L<V?(U.flags|=67108866,V):L):(U.flags|=67108866,V)):(U.flags|=1048576,V)}function _(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function E(U,V,L,$){return V===null||V.tag!==6?(V=Vc(L,U.mode,$),V.return=U,V):(V=c(V,L),V.return=U,V)}function w(U,V,L,$){var dt=L.type;return dt===at?K(U,V,L.props.children,$,L.key):V!==null&&(V.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===S&&sp(dt)===V.type)?(V=c(V,L.props),Sl(V,L),V.return=U,V):(V=zo(L.type,L.key,L.props,null,U.mode,$),Sl(V,L),V.return=U,V)}function B(U,V,L,$){return V===null||V.tag!==4||V.stateNode.containerInfo!==L.containerInfo||V.stateNode.implementation!==L.implementation?(V=Ic(L,U.mode,$),V.return=U,V):(V=c(V,L.children||[]),V.return=U,V)}function K(U,V,L,$,dt){return V===null||V.tag!==7?(V=ur(L,U.mode,$,dt),V.return=U,V):(V=c(V,L),V.return=U,V)}function X(U,V,L){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Vc(""+V,U.mode,L),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case M:return L=zo(V.type,V.key,V.props,null,U.mode,L),Sl(L,V),L.return=U,L;case F:return V=Ic(V,U.mode,L),V.return=U,V;case S:var $=V._init;return V=$(V._payload),X(U,V,L)}if(Wt(V)||z(V))return V=ur(V,U.mode,L,null),V.return=U,V;if(typeof V.then=="function")return X(U,Wo(V),L);if(V.$$typeof===Tt)return X(U,Bo(U,V),L);tu(U,V)}return null}function j(U,V,L,$){var dt=V!==null?V.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return dt!==null?null:E(U,V,""+L,$);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case M:return L.key===dt?w(U,V,L,$):null;case F:return L.key===dt?B(U,V,L,$):null;case S:return dt=L._init,L=dt(L._payload),j(U,V,L,$)}if(Wt(L)||z(L))return dt!==null?null:K(U,V,L,$,null);if(typeof L.then=="function")return j(U,V,Wo(L),$);if(L.$$typeof===Tt)return j(U,V,Bo(U,L),$);tu(U,L)}return null}function H(U,V,L,$,dt){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return U=U.get(L)||null,E(V,U,""+$,dt);if(typeof $=="object"&&$!==null){switch($.$$typeof){case M:return U=U.get($.key===null?L:$.key)||null,w(V,U,$,dt);case F:return U=U.get($.key===null?L:$.key)||null,B(V,U,$,dt);case S:var Mt=$._init;return $=Mt($._payload),H(U,V,L,$,dt)}if(Wt($)||z($))return U=U.get(L)||null,K(V,U,$,dt,null);if(typeof $.then=="function")return H(U,V,L,Wo($),dt);if($.$$typeof===Tt)return H(U,V,L,Bo(V,$),dt);tu(V,$)}return null}function At(U,V,L,$){for(var dt=null,Mt=null,pt=V,Et=V=0,$e=null;pt!==null&&Et<L.length;Et++){pt.index>Et?($e=pt,pt=null):$e=pt.sibling;var Kt=j(U,pt,L[Et],$);if(Kt===null){pt===null&&(pt=$e);break}t&&pt&&Kt.alternate===null&&n(U,pt),V=h(Kt,V,Et),Mt===null?dt=Kt:Mt.sibling=Kt,Mt=Kt,pt=$e}if(Et===L.length)return a(U,pt),Zt&&fr(U,Et),dt;if(pt===null){for(;Et<L.length;Et++)pt=X(U,L[Et],$),pt!==null&&(V=h(pt,V,Et),Mt===null?dt=pt:Mt.sibling=pt,Mt=pt);return Zt&&fr(U,Et),dt}for(pt=l(pt);Et<L.length;Et++)$e=H(pt,U,Et,L[Et],$),$e!==null&&(t&&$e.alternate!==null&&pt.delete($e.key===null?Et:$e.key),V=h($e,V,Et),Mt===null?dt=$e:Mt.sibling=$e,Mt=$e);return t&&pt.forEach(function(Ca){return n(U,Ca)}),Zt&&fr(U,Et),dt}function _t(U,V,L,$){if(L==null)throw Error(s(151));for(var dt=null,Mt=null,pt=V,Et=V=0,$e=null,Kt=L.next();pt!==null&&!Kt.done;Et++,Kt=L.next()){pt.index>Et?($e=pt,pt=null):$e=pt.sibling;var Ca=j(U,pt,Kt.value,$);if(Ca===null){pt===null&&(pt=$e);break}t&&pt&&Ca.alternate===null&&n(U,pt),V=h(Ca,V,Et),Mt===null?dt=Ca:Mt.sibling=Ca,Mt=Ca,pt=$e}if(Kt.done)return a(U,pt),Zt&&fr(U,Et),dt;if(pt===null){for(;!Kt.done;Et++,Kt=L.next())Kt=X(U,Kt.value,$),Kt!==null&&(V=h(Kt,V,Et),Mt===null?dt=Kt:Mt.sibling=Kt,Mt=Kt);return Zt&&fr(U,Et),dt}for(pt=l(pt);!Kt.done;Et++,Kt=L.next())Kt=H(pt,U,Et,Kt.value,$),Kt!==null&&(t&&Kt.alternate!==null&&pt.delete(Kt.key===null?Et:Kt.key),V=h(Kt,V,Et),Mt===null?dt=Kt:Mt.sibling=Kt,Mt=Kt);return t&&pt.forEach(function(OE){return n(U,OE)}),Zt&&fr(U,Et),dt}function oe(U,V,L,$){if(typeof L=="object"&&L!==null&&L.type===at&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case M:t:{for(var dt=L.key;V!==null;){if(V.key===dt){if(dt=L.type,dt===at){if(V.tag===7){a(U,V.sibling),$=c(V,L.props.children),$.return=U,U=$;break t}}else if(V.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===S&&sp(dt)===V.type){a(U,V.sibling),$=c(V,L.props),Sl($,L),$.return=U,U=$;break t}a(U,V);break}else n(U,V);V=V.sibling}L.type===at?($=ur(L.props.children,U.mode,$,L.key),$.return=U,U=$):($=zo(L.type,L.key,L.props,null,U.mode,$),Sl($,L),$.return=U,U=$)}return _(U);case F:t:{for(dt=L.key;V!==null;){if(V.key===dt)if(V.tag===4&&V.stateNode.containerInfo===L.containerInfo&&V.stateNode.implementation===L.implementation){a(U,V.sibling),$=c(V,L.children||[]),$.return=U,U=$;break t}else{a(U,V);break}else n(U,V);V=V.sibling}$=Ic(L,U.mode,$),$.return=U,U=$}return _(U);case S:return dt=L._init,L=dt(L._payload),oe(U,V,L,$)}if(Wt(L))return At(U,V,L,$);if(z(L)){if(dt=z(L),typeof dt!="function")throw Error(s(150));return L=dt.call(L),_t(U,V,L,$)}if(typeof L.then=="function")return oe(U,V,Wo(L),$);if(L.$$typeof===Tt)return oe(U,V,Bo(U,L),$);tu(U,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,V!==null&&V.tag===6?(a(U,V.sibling),$=c(V,L),$.return=U,U=$):(a(U,V),$=Vc(L,U.mode,$),$.return=U,U=$),_(U)):a(U,V)}return function(U,V,L,$){try{Al=0;var dt=oe(U,V,L,$);return is=null,dt}catch(pt){if(pt===ml||pt===jo)throw pt;var Mt=xn(29,pt,null,U.mode);return Mt.lanes=$,Mt.return=U,Mt}finally{}}}var as=lp(!0),op=lp(!1),Hn=J(null),mi=null;function ha(t){var n=t.alternate;k(Fe,Fe.current&1),k(Hn,t),mi===null&&(n===null||Wr.current!==null||n.memoizedState!==null)&&(mi=t)}function up(t){if(t.tag===22){if(k(Fe,Fe.current),k(Hn,t),mi===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(mi=t)}}else da()}function da(){k(Fe,Fe.current),k(Hn,Hn.current)}function Li(t){lt(Hn),mi===t&&(mi=null),lt(Fe)}var Fe=J(0);function eu(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||eh(a)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function hf(t,n,a,l){n=t.memoizedState,a=a(l,n),a=a==null?n:T({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var df={enqueueSetState:function(t,n,a){t=t._reactInternals;var l=On(),c=ua(l);c.payload=n,a!=null&&(c.callback=a),n=ca(t,c,l),n!==null&&(Mn(n,t,l),gl(n,t,l))},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var l=On(),c=ua(l);c.tag=1,c.payload=n,a!=null&&(c.callback=a),n=ca(t,c,l),n!==null&&(Mn(n,t,l),gl(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=On(),l=ua(a);l.tag=2,n!=null&&(l.callback=n),n=ca(t,l,a),n!==null&&(Mn(n,t,a),gl(n,t,a))}};function cp(t,n,a,l,c,h,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,h,_):n.prototype&&n.prototype.isPureReactComponent?!sl(a,l)||!sl(c,h):!0}function fp(t,n,a,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==t&&df.enqueueReplaceState(n,n.state,null)}function _r(t,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(t=t.defaultProps){a===n&&(a=T({},a));for(var c in t)a[c]===void 0&&(a[c]=t[c])}return a}var nu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function hp(t){nu(t)}function dp(t){console.error(t)}function mp(t){nu(t)}function iu(t,n){try{var a=t.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function pp(t,n,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function mf(t,n,a){return a=ua(a),a.tag=3,a.payload={element:null},a.callback=function(){iu(t,n)},a}function gp(t){return t=ua(t),t.tag=3,t}function yp(t,n,a,l){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var h=l.value;t.payload=function(){return c(h)},t.callback=function(){pp(n,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){pp(n,a,l),typeof c!="function"&&(va===null?va=new Set([this]):va.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function O0(t,n,a,l,c){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&fl(n,a,c,!0),a=Hn.current,a!==null){switch(a.tag){case 13:return mi===null?Lf():a.alternate===null&&Se===0&&(Se=3),a.flags&=-257,a.flags|=65536,a.lanes=c,l===jc?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),Bf(t,l,c)),!1;case 22:return a.flags|=65536,l===jc?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),Bf(t,l,c)),!1}throw Error(s(435,a.tag))}return Bf(t,l,c),Lf(),!1}if(Zt)return n=Hn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,l!==kc&&(t=Error(s(422),{cause:l}),cl(Bn(t,a)))):(l!==kc&&(n=Error(s(423),{cause:l}),cl(Bn(n,a))),t=t.current.alternate,t.flags|=65536,c&=-c,t.lanes|=c,l=Bn(l,a),c=mf(t.stateNode,l,c),Gc(t,c),Se!==4&&(Se=2)),!1;var h=Error(s(520),{cause:l});if(h=Bn(h,a),Vl===null?Vl=[h]:Vl.push(h),Se!==4&&(Se=2),n===null)return!0;l=Bn(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,t=c&-c,a.lanes|=t,t=mf(a.stateNode,l,t),Gc(a,t),!1;case 1:if(n=a.type,h=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(va===null||!va.has(h))))return a.flags|=65536,c&=-c,a.lanes|=c,c=gp(c),yp(c,t,a,l),Gc(a,c),!1}a=a.return}while(a!==null);return!1}var _p=Error(s(461)),Ye=!1;function We(t,n,a,l){n.child=t===null?op(n,null,a,l):as(n,t.child,a,l)}function vp(t,n,a,l,c){a=a.render;var h=n.ref;if("ref"in l){var _={};for(var E in l)E!=="ref"&&(_[E]=l[E])}else _=l;return pr(n),l=Xc(t,n,a,_,h,c),E=Zc(),t!==null&&!Ye?(Jc(t,n,c),Pi(t,n,c)):(Zt&&E&&Oc(n),n.flags|=1,We(t,n,l,c),n.child)}function Ep(t,n,a,l,c){if(t===null){var h=a.type;return typeof h=="function"&&!Nc(h)&&h.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=h,Tp(t,n,h,l,c)):(t=zo(a.type,null,l,n,n.mode,c),t.ref=n.ref,t.return=n,n.child=t)}if(h=t.child,!bf(t,c)){var _=h.memoizedProps;if(a=a.compare,a=a!==null?a:sl,a(_,l)&&t.ref===n.ref)return Pi(t,n,c)}return n.flags|=1,t=Ii(h,l),t.ref=n.ref,t.return=n,n.child=t}function Tp(t,n,a,l,c){if(t!==null){var h=t.memoizedProps;if(sl(h,l)&&t.ref===n.ref)if(Ye=!1,n.pendingProps=l=h,bf(t,c))(t.flags&131072)!==0&&(Ye=!0);else return n.lanes=t.lanes,Pi(t,n,c)}return pf(t,n,a,l,c)}function bp(t,n,a){var l=n.pendingProps,c=l.children,h=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((n.flags&128)!==0){if(l=h!==null?h.baseLanes|a:a,t!==null){for(c=n.child=t.child,h=0;c!==null;)h=h|c.lanes|c.childLanes,c=c.sibling;n.childLanes=h&~l}else n.childLanes=0,n.child=null;return Ap(t,n,l,a)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&qo(n,h!==null?h.cachePool:null),h!==null?Tm(n,h):Yc(),up(n);else return n.lanes=n.childLanes=536870912,Ap(t,n,h!==null?h.baseLanes|a:a,a)}else h!==null?(qo(n,h.cachePool),Tm(n,h),da(),n.memoizedState=null):(t!==null&&qo(n,null),Yc(),da());return We(t,n,c,a),n.child}function Ap(t,n,a,l){var c=qc();return c=c===null?null:{parent:je._currentValue,pool:c},n.memoizedState={baseLanes:a,cachePool:c},t!==null&&qo(n,null),Yc(),up(n),t!==null&&fl(t,n,l,!0),null}function au(t,n){var a=n.ref;if(a===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(n.flags|=4194816)}}function pf(t,n,a,l,c){return pr(n),a=Xc(t,n,a,l,void 0,c),l=Zc(),t!==null&&!Ye?(Jc(t,n,c),Pi(t,n,c)):(Zt&&l&&Oc(n),n.flags|=1,We(t,n,a,c),n.child)}function Sp(t,n,a,l,c,h){return pr(n),n.updateQueue=null,a=Am(n,l,a,c),bm(t),l=Zc(),t!==null&&!Ye?(Jc(t,n,h),Pi(t,n,h)):(Zt&&l&&Oc(n),n.flags|=1,We(t,n,a,h),n.child)}function wp(t,n,a,l,c){if(pr(n),n.stateNode===null){var h=Kr,_=a.contextType;typeof _=="object"&&_!==null&&(h=ln(_)),h=new a(l,h),n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=df,n.stateNode=h,h._reactInternals=n,h=n.stateNode,h.props=l,h.state=n.memoizedState,h.refs={},Fc(n),_=a.contextType,h.context=typeof _=="object"&&_!==null?ln(_):Kr,h.state=n.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(hf(n,a,_,l),h.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(_=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),_!==h.state&&df.enqueueReplaceState(h,h.state,null),_l(n,l,h,c),yl(),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){h=n.stateNode;var E=n.memoizedProps,w=_r(a,E);h.props=w;var B=h.context,K=a.contextType;_=Kr,typeof K=="object"&&K!==null&&(_=ln(K));var X=a.getDerivedStateFromProps;K=typeof X=="function"||typeof h.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,K||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(E||B!==_)&&fp(n,h,l,_),oa=!1;var j=n.memoizedState;h.state=j,_l(n,l,h,c),yl(),B=n.memoizedState,E||j!==B||oa?(typeof X=="function"&&(hf(n,a,X,l),B=n.memoizedState),(w=oa||cp(n,a,w,l,j,B,_))?(K||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(n.flags|=4194308)):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=B),h.props=l,h.state=B,h.context=_,l=w):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{h=n.stateNode,Hc(t,n),_=n.memoizedProps,K=_r(a,_),h.props=K,X=n.pendingProps,j=h.context,B=a.contextType,w=Kr,typeof B=="object"&&B!==null&&(w=ln(B)),E=a.getDerivedStateFromProps,(B=typeof E=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(_!==X||j!==w)&&fp(n,h,l,w),oa=!1,j=n.memoizedState,h.state=j,_l(n,l,h,c),yl();var H=n.memoizedState;_!==X||j!==H||oa||t!==null&&t.dependencies!==null&&Po(t.dependencies)?(typeof E=="function"&&(hf(n,a,E,l),H=n.memoizedState),(K=oa||cp(n,a,K,l,j,H,w)||t!==null&&t.dependencies!==null&&Po(t.dependencies))?(B||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(l,H,w),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(l,H,w)),typeof h.componentDidUpdate=="function"&&(n.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof h.componentDidUpdate!="function"||_===t.memoizedProps&&j===t.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&j===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=H),h.props=l,h.state=H,h.context=w,l=K):(typeof h.componentDidUpdate!="function"||_===t.memoizedProps&&j===t.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&j===t.memoizedState||(n.flags|=1024),l=!1)}return h=l,au(t,n),l=(n.flags&128)!==0,h||l?(h=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:h.render(),n.flags|=1,t!==null&&l?(n.child=as(n,t.child,null,c),n.child=as(n,null,a,c)):We(t,n,a,c),n.memoizedState=h.state,t=n.child):t=Pi(t,n,c),t}function Rp(t,n,a,l){return ul(),n.flags|=256,We(t,n,a,l),n.child}var gf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yf(t){return{baseLanes:t,cachePool:dm()}}function _f(t,n,a){return t=t!==null?t.childLanes&~a:0,n&&(t|=Gn),t}function Cp(t,n,a){var l=n.pendingProps,c=!1,h=(n.flags&128)!==0,_;if((_=h)||(_=t!==null&&t.memoizedState===null?!1:(Fe.current&2)!==0),_&&(c=!0,n.flags&=-129),_=(n.flags&32)!==0,n.flags&=-33,t===null){if(Zt){if(c?ha(n):da(),Zt){var E=Ae,w;if(w=E){t:{for(w=E,E=di;w.nodeType!==8;){if(!E){E=null;break t}if(w=ni(w.nextSibling),w===null){E=null;break t}}E=w}E!==null?(n.memoizedState={dehydrated:E,treeContext:cr!==null?{id:Oi,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},w=xn(18,null,null,0),w.stateNode=E,w.return=n,n.child=w,_n=n,Ae=null,w=!0):w=!1}w||dr(n)}if(E=n.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return eh(E)?n.lanes=32:n.lanes=536870912,null;Li(n)}return E=l.children,l=l.fallback,c?(da(),c=n.mode,E=ru({mode:"hidden",children:E},c),l=ur(l,c,a,null),E.return=n,l.return=n,E.sibling=l,n.child=E,c=n.child,c.memoizedState=yf(a),c.childLanes=_f(t,_,a),n.memoizedState=gf,l):(ha(n),vf(n,E))}if(w=t.memoizedState,w!==null&&(E=w.dehydrated,E!==null)){if(h)n.flags&256?(ha(n),n.flags&=-257,n=Ef(t,n,a)):n.memoizedState!==null?(da(),n.child=t.child,n.flags|=128,n=null):(da(),c=l.fallback,E=n.mode,l=ru({mode:"visible",children:l.children},E),c=ur(c,E,a,null),c.flags|=2,l.return=n,c.return=n,l.sibling=c,n.child=l,as(n,t.child,null,a),l=n.child,l.memoizedState=yf(a),l.childLanes=_f(t,_,a),n.memoizedState=gf,n=c);else if(ha(n),eh(E)){if(_=E.nextSibling&&E.nextSibling.dataset,_)var B=_.dgst;_=B,l=Error(s(419)),l.stack="",l.digest=_,cl({value:l,source:null,stack:null}),n=Ef(t,n,a)}else if(Ye||fl(t,n,a,!1),_=(a&t.childLanes)!==0,Ye||_){if(_=de,_!==null&&(l=a&-a,l=(l&42)!==0?1:Fs(l),l=(l&(_.suspendedLanes|a))!==0?0:l,l!==0&&l!==w.retryLane))throw w.retryLane=l,Yr(t,l),Mn(_,t,l),_p;E.data==="$?"||Lf(),n=Ef(t,n,a)}else E.data==="$?"?(n.flags|=192,n.child=t.child,n=null):(t=w.treeContext,Ae=ni(E.nextSibling),_n=n,Zt=!0,hr=null,di=!1,t!==null&&(jn[Fn++]=Oi,jn[Fn++]=Mi,jn[Fn++]=cr,Oi=t.id,Mi=t.overflow,cr=n),n=vf(n,l.children),n.flags|=4096);return n}return c?(da(),c=l.fallback,E=n.mode,w=t.child,B=w.sibling,l=Ii(w,{mode:"hidden",children:l.children}),l.subtreeFlags=w.subtreeFlags&65011712,B!==null?c=Ii(B,c):(c=ur(c,E,a,null),c.flags|=2),c.return=n,l.return=n,l.sibling=c,n.child=l,l=c,c=n.child,E=t.child.memoizedState,E===null?E=yf(a):(w=E.cachePool,w!==null?(B=je._currentValue,w=w.parent!==B?{parent:B,pool:B}:w):w=dm(),E={baseLanes:E.baseLanes|a,cachePool:w}),c.memoizedState=E,c.childLanes=_f(t,_,a),n.memoizedState=gf,l):(ha(n),a=t.child,t=a.sibling,a=Ii(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,t!==null&&(_=n.deletions,_===null?(n.deletions=[t],n.flags|=16):_.push(t)),n.child=a,n.memoizedState=null,a)}function vf(t,n){return n=ru({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function ru(t,n){return t=xn(22,t,null,n),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Ef(t,n,a){return as(n,t.child,null,a),t=vf(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Dp(t,n,a){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),Uc(t.return,n,a)}function Tf(t,n,a,l,c){var h=t.memoizedState;h===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:c}:(h.isBackwards=n,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=a,h.tailMode=c)}function xp(t,n,a){var l=n.pendingProps,c=l.revealOrder,h=l.tail;if(We(t,n,l.children,a),l=Fe.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dp(t,a,n);else if(t.tag===19)Dp(t,a,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(k(Fe,l),c){case"forwards":for(a=n.child,c=null;a!==null;)t=a.alternate,t!==null&&eu(t)===null&&(c=a),a=a.sibling;a=c,a===null?(c=n.child,n.child=null):(c=a.sibling,a.sibling=null),Tf(n,!1,c,a,h);break;case"backwards":for(a=null,c=n.child,n.child=null;c!==null;){if(t=c.alternate,t!==null&&eu(t)===null){n.child=c;break}t=c.sibling,c.sibling=a,a=c,c=t}Tf(n,!0,a,null,h);break;case"together":Tf(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Pi(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),_a|=n.lanes,(a&n.childLanes)===0)if(t!==null){if(fl(t,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(s(153));if(n.child!==null){for(t=n.child,a=Ii(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=Ii(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}function bf(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Po(t)))}function M0(t,n,a){switch(n.tag){case 3:yt(n,n.stateNode.containerInfo),la(n,je,t.memoizedState.cache),ul();break;case 27:case 5:En(n);break;case 4:yt(n,n.stateNode.containerInfo);break;case 10:la(n,n.type,n.memoizedProps.value);break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(ha(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Cp(t,n,a):(ha(n),t=Pi(t,n,a),t!==null?t.sibling:null);ha(n);break;case 19:var c=(t.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(fl(t,n,a,!1),l=(a&n.childLanes)!==0),c){if(l)return xp(t,n,a);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),k(Fe,Fe.current),l)break;return null;case 22:case 23:return n.lanes=0,bp(t,n,a);case 24:la(n,je,t.memoizedState.cache)}return Pi(t,n,a)}function Np(t,n,a){if(t!==null)if(t.memoizedProps!==n.pendingProps)Ye=!0;else{if(!bf(t,a)&&(n.flags&128)===0)return Ye=!1,M0(t,n,a);Ye=(t.flags&131072)!==0}else Ye=!1,Zt&&(n.flags&1048576)!==0&&sm(n,Lo,n.index);switch(n.lanes=0,n.tag){case 16:t:{t=n.pendingProps;var l=n.elementType,c=l._init;if(l=c(l._payload),n.type=l,typeof l=="function")Nc(l)?(t=_r(l,t),n.tag=1,n=wp(null,n,l,t,a)):(n.tag=0,n=pf(null,n,l,t,a));else{if(l!=null){if(c=l.$$typeof,c===Xt){n.tag=11,n=vp(null,n,l,t,a);break t}else if(c===I){n.tag=14,n=Ep(null,n,l,t,a);break t}}throw n=Jt(l)||l,Error(s(306,n,""))}}return n;case 0:return pf(t,n,n.type,n.pendingProps,a);case 1:return l=n.type,c=_r(l,n.pendingProps),wp(t,n,l,c,a);case 3:t:{if(yt(n,n.stateNode.containerInfo),t===null)throw Error(s(387));l=n.pendingProps;var h=n.memoizedState;c=h.element,Hc(t,n),_l(n,l,null,a);var _=n.memoizedState;if(l=_.cache,la(n,je,l),l!==h.cache&&Lc(n,[je],a,!0),yl(),l=_.element,h.isDehydrated)if(h={element:l,isDehydrated:!1,cache:_.cache},n.updateQueue.baseState=h,n.memoizedState=h,n.flags&256){n=Rp(t,n,l,a);break t}else if(l!==c){c=Bn(Error(s(424)),n),cl(c),n=Rp(t,n,l,a);break t}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ae=ni(t.firstChild),_n=n,Zt=!0,hr=null,di=!0,a=op(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ul(),l===c){n=Pi(t,n,a);break t}We(t,n,l,a)}n=n.child}return n;case 26:return au(t,n),t===null?(a=Mg(n.type,null,n.pendingProps,null))?n.memoizedState=a:Zt||(a=n.type,t=n.pendingProps,l=vu(q.current).createElement(a),l[Re]=n,l[Je]=t,en(l,a,t),Ce(l),n.stateNode=l):n.memoizedState=Mg(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return En(n),t===null&&Zt&&(l=n.stateNode=Vg(n.type,n.pendingProps,q.current),_n=n,di=!0,c=Ae,ba(n.type)?(nh=c,Ae=ni(l.firstChild)):Ae=c),We(t,n,n.pendingProps.children,a),au(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Zt&&((c=l=Ae)&&(l=oE(l,n.type,n.pendingProps,di),l!==null?(n.stateNode=l,_n=n,Ae=ni(l.firstChild),di=!1,c=!0):c=!1),c||dr(n)),En(n),c=n.type,h=n.pendingProps,_=t!==null?t.memoizedProps:null,l=h.children,Jf(c,h)?l=null:_!==null&&Jf(c,_)&&(n.flags|=32),n.memoizedState!==null&&(c=Xc(t,n,R0,null,null,a),Bl._currentValue=c),au(t,n),We(t,n,l,a),n.child;case 6:return t===null&&Zt&&((t=a=Ae)&&(a=uE(a,n.pendingProps,di),a!==null?(n.stateNode=a,_n=n,Ae=null,t=!0):t=!1),t||dr(n)),null;case 13:return Cp(t,n,a);case 4:return yt(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=as(n,null,l,a):We(t,n,l,a),n.child;case 11:return vp(t,n,n.type,n.pendingProps,a);case 7:return We(t,n,n.pendingProps,a),n.child;case 8:return We(t,n,n.pendingProps.children,a),n.child;case 12:return We(t,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,la(n,n.type,l.value),We(t,n,l.children,a),n.child;case 9:return c=n.type._context,l=n.pendingProps.children,pr(n),c=ln(c),l=l(c),n.flags|=1,We(t,n,l,a),n.child;case 14:return Ep(t,n,n.type,n.pendingProps,a);case 15:return Tp(t,n,n.type,n.pendingProps,a);case 19:return xp(t,n,a);case 31:return l=n.pendingProps,a=n.mode,l={mode:l.mode,children:l.children},t===null?(a=ru(l,a),a.ref=n.ref,n.child=a,a.return=n,n=a):(a=Ii(t.child,l),a.ref=n.ref,n.child=a,a.return=n,n=a),n;case 22:return bp(t,n,a);case 24:return pr(n),l=ln(je),t===null?(c=qc(),c===null&&(c=de,h=Pc(),c.pooledCache=h,h.refCount++,h!==null&&(c.pooledCacheLanes|=a),c=h),n.memoizedState={parent:l,cache:c},Fc(n),la(n,je,c)):((t.lanes&a)!==0&&(Hc(t,n),_l(n,null,null,a),yl()),c=t.memoizedState,h=n.memoizedState,c.parent!==l?(c={parent:l,cache:l},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),la(n,je,l)):(l=h.cache,la(n,je,l),l!==c.cache&&Lc(n,[je],a,!0))),We(t,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function Bi(t){t.flags|=4}function Vp(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Pg(n)){if(n=Hn.current,n!==null&&((qt&4194048)===qt?mi!==null:(qt&62914560)!==qt&&(qt&536870912)===0||n!==mi))throw pl=jc,mm;t.flags|=8192}}function su(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Ki():536870912,t.lanes|=n,os|=n)}function wl(t,n){if(!Zt)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Ee(t){var n=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(n)for(var c=t.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags&65011712,l|=c.flags&65011712,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=l,t.childLanes=a,n}function k0(t,n,a){var l=n.pendingProps;switch(Mc(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ee(n),null;case 1:return Ee(n),null;case 3:return a=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),zi(je),Bt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(ol(n)?Bi(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,um())),Ee(n),null;case 26:return a=n.memoizedState,t===null?(Bi(n),a!==null?(Ee(n),Vp(n,a)):(Ee(n),n.flags&=-16777217)):a?a!==t.memoizedState?(Bi(n),Ee(n),Vp(n,a)):(Ee(n),n.flags&=-16777217):(t.memoizedProps!==l&&Bi(n),Ee(n),n.flags&=-16777217),null;case 27:Oe(n),a=q.current;var c=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Bi(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return Ee(n),null}t=Y.current,ol(n)?lm(n):(t=Vg(c,l,a),n.stateNode=t,Bi(n))}return Ee(n),null;case 5:if(Oe(n),a=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Bi(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return Ee(n),null}if(t=Y.current,ol(n))lm(n);else{switch(c=vu(q.current),t){case 1:t=c.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=c.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?c.createElement("select",{is:l.is}):c.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?c.createElement(a,{is:l.is}):c.createElement(a)}}t[Re]=n,t[Je]=l;t:for(c=n.child;c!==null;){if(c.tag===5||c.tag===6)t.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break t;for(;c.sibling===null;){if(c.return===null||c.return===n)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}n.stateNode=t;t:switch(en(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break t;case"img":t=!0;break t;default:t=!1}t&&Bi(n)}}return Ee(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&Bi(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(s(166));if(t=q.current,ol(n)){if(t=n.stateNode,a=n.memoizedProps,l=null,c=_n,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}t[Re]=n,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Sg(t.nodeValue,a)),t||dr(n)}else t=vu(t).createTextNode(l),t[Re]=n,n.stateNode=t}return Ee(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(c=ol(n),l!==null&&l.dehydrated!==null){if(t===null){if(!c)throw Error(s(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(317));c[Re]=n}else ul(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ee(n),c=!1}else c=um(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(Li(n),n):(Li(n),null)}if(Li(n),(n.flags&128)!==0)return n.lanes=a,n;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=n.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool);var h=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==c&&(l.flags|=2048)}return a!==t&&a&&(n.child.flags|=8192),su(n,n.updateQueue),Ee(n),null;case 4:return Bt(),t===null&&Yf(n.stateNode.containerInfo),Ee(n),null;case 10:return zi(n.type),Ee(n),null;case 19:if(lt(Fe),c=n.memoizedState,c===null)return Ee(n),null;if(l=(n.flags&128)!==0,h=c.rendering,h===null)if(l)wl(c,!1);else{if(Se!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(h=eu(t),h!==null){for(n.flags|=128,wl(c,!1),t=h.updateQueue,n.updateQueue=t,su(n,t),n.subtreeFlags=0,t=a,a=n.child;a!==null;)rm(a,t),a=a.sibling;return k(Fe,Fe.current&1|2),n.child}t=t.sibling}c.tail!==null&&tt()>uu&&(n.flags|=128,l=!0,wl(c,!1),n.lanes=4194304)}else{if(!l)if(t=eu(h),t!==null){if(n.flags|=128,l=!0,t=t.updateQueue,n.updateQueue=t,su(n,t),wl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!h.alternate&&!Zt)return Ee(n),null}else 2*tt()-c.renderingStartTime>uu&&a!==536870912&&(n.flags|=128,l=!0,wl(c,!1),n.lanes=4194304);c.isBackwards?(h.sibling=n.child,n.child=h):(t=c.last,t!==null?t.sibling=h:n.child=h,c.last=h)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=tt(),n.sibling=null,t=Fe.current,k(Fe,l?t&1|2:t&1),n):(Ee(n),null);case 22:case 23:return Li(n),Kc(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(Ee(n),n.subtreeFlags&6&&(n.flags|=8192)):Ee(n),a=n.updateQueue,a!==null&&su(n,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),t!==null&&lt(gr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),zi(je),Ee(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function z0(t,n){switch(Mc(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return zi(je),Bt(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Oe(n),null;case 13:if(Li(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(s(340));ul()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return lt(Fe),null;case 4:return Bt(),null;case 10:return zi(n.type),null;case 22:case 23:return Li(n),Kc(),t!==null&&lt(gr),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return zi(je),null;case 25:return null;default:return null}}function Ip(t,n){switch(Mc(n),n.tag){case 3:zi(je),Bt();break;case 26:case 27:case 5:Oe(n);break;case 4:Bt();break;case 13:Li(n);break;case 19:lt(Fe);break;case 10:zi(n.type);break;case 22:case 23:Li(n),Kc(),t!==null&&lt(gr);break;case 24:zi(je)}}function Rl(t,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var c=l.next;a=c;do{if((a.tag&t)===t){l=void 0;var h=a.create,_=a.inst;l=h(),_.destroy=l}a=a.next}while(a!==c)}}catch(E){fe(n,n.return,E)}}function ma(t,n,a){try{var l=n.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var h=c.next;l=h;do{if((l.tag&t)===t){var _=l.inst,E=_.destroy;if(E!==void 0){_.destroy=void 0,c=n;var w=a,B=E;try{B()}catch(K){fe(c,w,K)}}}l=l.next}while(l!==h)}}catch(K){fe(n,n.return,K)}}function Op(t){var n=t.updateQueue;if(n!==null){var a=t.stateNode;try{Em(n,a)}catch(l){fe(t,t.return,l)}}}function Mp(t,n,a){a.props=_r(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){fe(t,n,l)}}function Cl(t,n){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(c){fe(t,n,c)}}function pi(t,n){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(c){fe(t,n,c)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){fe(t,n,c)}else a.current=null}function kp(t){var n=t.type,a=t.memoizedProps,l=t.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(c){fe(t,t.return,c)}}function Af(t,n,a){try{var l=t.stateNode;iE(l,t.type,a,n),l[Je]=n}catch(c){fe(t,t.return,c)}}function zp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ba(t.type)||t.tag===4}function Sf(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||zp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ba(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wf(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(t),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=_u));else if(l!==4&&(l===27&&ba(t.type)&&(a=t.stateNode,n=null),t=t.child,t!==null))for(wf(t,n,a),t=t.sibling;t!==null;)wf(t,n,a),t=t.sibling}function lu(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?a.insertBefore(t,n):a.appendChild(t);else if(l!==4&&(l===27&&ba(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(lu(t,n,a),t=t.sibling;t!==null;)lu(t,n,a),t=t.sibling}function Up(t){var n=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);en(n,l,a),n[Re]=t,n[Je]=a}catch(h){fe(t,t.return,h)}}var qi=!1,Ne=!1,Rf=!1,Lp=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function U0(t,n){if(t=t.containerInfo,Xf=wu,t=$d(t),Ac(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else t:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var c=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{a.nodeType,h.nodeType}catch{a=null;break t}var _=0,E=-1,w=-1,B=0,K=0,X=t,j=null;e:for(;;){for(var H;X!==a||c!==0&&X.nodeType!==3||(E=_+c),X!==h||l!==0&&X.nodeType!==3||(w=_+l),X.nodeType===3&&(_+=X.nodeValue.length),(H=X.firstChild)!==null;)j=X,X=H;for(;;){if(X===t)break e;if(j===a&&++B===c&&(E=_),j===h&&++K===l&&(w=_),(H=X.nextSibling)!==null)break;X=j,j=X.parentNode}X=H}a=E===-1||w===-1?null:{start:E,end:w}}else a=null}a=a||{start:0,end:0}}else a=null;for(Zf={focusedElem:t,selectionRange:a},wu=!1,Ke=n;Ke!==null;)if(n=Ke,t=n.child,(n.subtreeFlags&1024)!==0&&t!==null)t.return=n,Ke=t;else for(;Ke!==null;){switch(n=Ke,h=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&h!==null){t=void 0,a=n,c=h.memoizedProps,h=h.memoizedState,l=a.stateNode;try{var At=_r(a.type,c,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(At,h),l.__reactInternalSnapshotBeforeUpdate=t}catch(_t){fe(a,a.return,_t)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,a=t.nodeType,a===9)th(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":th(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=n.sibling,t!==null){t.return=n.return,Ke=t;break}Ke=n.return}}function Pp(t,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:pa(t,a),l&4&&Rl(5,a);break;case 1:if(pa(t,a),l&4)if(t=a.stateNode,n===null)try{t.componentDidMount()}catch(_){fe(a,a.return,_)}else{var c=_r(a.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(c,n,t.__reactInternalSnapshotBeforeUpdate)}catch(_){fe(a,a.return,_)}}l&64&&Op(a),l&512&&Cl(a,a.return);break;case 3:if(pa(t,a),l&64&&(t=a.updateQueue,t!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Em(t,n)}catch(_){fe(a,a.return,_)}}break;case 27:n===null&&l&4&&Up(a);case 26:case 5:pa(t,a),n===null&&l&4&&kp(a),l&512&&Cl(a,a.return);break;case 12:pa(t,a);break;case 13:pa(t,a),l&4&&jp(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Q0.bind(null,a),cE(t,a))));break;case 22:if(l=a.memoizedState!==null||qi,!l){n=n!==null&&n.memoizedState!==null||Ne,c=qi;var h=Ne;qi=l,(Ne=n)&&!h?ga(t,a,(a.subtreeFlags&8772)!==0):pa(t,a),qi=c,Ne=h}break;case 30:break;default:pa(t,a)}}function Bp(t){var n=t.alternate;n!==null&&(t.alternate=null,Bp(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Ir(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ge=null,An=!1;function ji(t,n,a){for(a=a.child;a!==null;)qp(t,n,a),a=a.sibling}function qp(t,n,a){if(ke&&typeof ke.onCommitFiberUnmount=="function")try{ke.onCommitFiberUnmount(kn,a)}catch{}switch(a.tag){case 26:Ne||pi(a,n),ji(t,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ne||pi(a,n);var l=ge,c=An;ba(a.type)&&(ge=a.stateNode,An=!1),ji(t,n,a),zl(a.stateNode),ge=l,An=c;break;case 5:Ne||pi(a,n);case 6:if(l=ge,c=An,ge=null,ji(t,n,a),ge=l,An=c,ge!==null)if(An)try{(ge.nodeType===9?ge.body:ge.nodeName==="HTML"?ge.ownerDocument.body:ge).removeChild(a.stateNode)}catch(h){fe(a,n,h)}else try{ge.removeChild(a.stateNode)}catch(h){fe(a,n,h)}break;case 18:ge!==null&&(An?(t=ge,xg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Hl(t)):xg(ge,a.stateNode));break;case 4:l=ge,c=An,ge=a.stateNode.containerInfo,An=!0,ji(t,n,a),ge=l,An=c;break;case 0:case 11:case 14:case 15:Ne||ma(2,a,n),Ne||ma(4,a,n),ji(t,n,a);break;case 1:Ne||(pi(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Mp(a,n,l)),ji(t,n,a);break;case 21:ji(t,n,a);break;case 22:Ne=(l=Ne)||a.memoizedState!==null,ji(t,n,a),Ne=l;break;default:ji(t,n,a)}}function jp(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Hl(t)}catch(a){fe(n,n.return,a)}}function L0(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Lp),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Lp),n;default:throw Error(s(435,t.tag))}}function Cf(t,n){var a=L0(t);n.forEach(function(l){var c=Y0.bind(null,t,l);a.has(l)||(a.add(l),l.then(c,c))})}function Nn(t,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var c=a[l],h=t,_=n,E=_;t:for(;E!==null;){switch(E.tag){case 27:if(ba(E.type)){ge=E.stateNode,An=!1;break t}break;case 5:ge=E.stateNode,An=!1;break t;case 3:case 4:ge=E.stateNode.containerInfo,An=!0;break t}E=E.return}if(ge===null)throw Error(s(160));qp(h,_,c),ge=null,An=!1,h=c.alternate,h!==null&&(h.return=null),c.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)Fp(n,t),n=n.sibling}var ei=null;function Fp(t,n){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Nn(n,t),Vn(t),l&4&&(ma(3,t,t.return),Rl(3,t),ma(5,t,t.return));break;case 1:Nn(n,t),Vn(t),l&512&&(Ne||a===null||pi(a,a.return)),l&64&&qi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var c=ei;if(Nn(n,t),Vn(t),l&512&&(Ne||a===null||pi(a,a.return)),l&4){var h=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){t:{l=t.type,a=t.memoizedProps,c=c.ownerDocument||c;e:switch(l){case"title":h=c.getElementsByTagName("title")[0],(!h||h[Zi]||h[Re]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=c.createElement(l),c.head.insertBefore(h,c.querySelector("head > title"))),en(h,l,a),h[Re]=t,Ce(h),l=h;break t;case"link":var _=Ug("link","href",c).get(l+(a.href||""));if(_){for(var E=0;E<_.length;E++)if(h=_[E],h.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&h.getAttribute("rel")===(a.rel==null?null:a.rel)&&h.getAttribute("title")===(a.title==null?null:a.title)&&h.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(E,1);break e}}h=c.createElement(l),en(h,l,a),c.head.appendChild(h);break;case"meta":if(_=Ug("meta","content",c).get(l+(a.content||""))){for(E=0;E<_.length;E++)if(h=_[E],h.getAttribute("content")===(a.content==null?null:""+a.content)&&h.getAttribute("name")===(a.name==null?null:a.name)&&h.getAttribute("property")===(a.property==null?null:a.property)&&h.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&h.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(E,1);break e}}h=c.createElement(l),en(h,l,a),c.head.appendChild(h);break;default:throw Error(s(468,l))}h[Re]=t,Ce(h),l=h}t.stateNode=l}else Lg(c,t.type,t.stateNode);else t.stateNode=zg(c,l,t.memoizedProps);else h!==l?(h===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):h.count--,l===null?Lg(c,t.type,t.stateNode):zg(c,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Af(t,t.memoizedProps,a.memoizedProps)}break;case 27:Nn(n,t),Vn(t),l&512&&(Ne||a===null||pi(a,a.return)),a!==null&&l&4&&Af(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Nn(n,t),Vn(t),l&512&&(Ne||a===null||pi(a,a.return)),t.flags&32){c=t.stateNode;try{Ln(c,"")}catch(H){fe(t,t.return,H)}}l&4&&t.stateNode!=null&&(c=t.memoizedProps,Af(t,c,a!==null?a.memoizedProps:c)),l&1024&&(Rf=!0);break;case 6:if(Nn(n,t),Vn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(H){fe(t,t.return,H)}}break;case 3:if(bu=null,c=ei,ei=Eu(n.containerInfo),Nn(n,t),ei=c,Vn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Hl(n.containerInfo)}catch(H){fe(t,t.return,H)}Rf&&(Rf=!1,Hp(t));break;case 4:l=ei,ei=Eu(t.stateNode.containerInfo),Nn(n,t),Vn(t),ei=l;break;case 12:Nn(n,t),Vn(t);break;case 13:Nn(n,t),Vn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Of=tt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Cf(t,l)));break;case 22:c=t.memoizedState!==null;var w=a!==null&&a.memoizedState!==null,B=qi,K=Ne;if(qi=B||c,Ne=K||w,Nn(n,t),Ne=K,qi=B,Vn(t),l&8192)t:for(n=t.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(a===null||w||qi||Ne||vr(t)),a=null,n=t;;){if(n.tag===5||n.tag===26){if(a===null){w=a=n;try{if(h=w.stateNode,c)_=h.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{E=w.stateNode;var X=w.memoizedProps.style,j=X!=null&&X.hasOwnProperty("display")?X.display:null;E.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(H){fe(w,w.return,H)}}}else if(n.tag===6){if(a===null){w=n;try{w.stateNode.nodeValue=c?"":w.memoizedProps}catch(H){fe(w,w.return,H)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Cf(t,a))));break;case 19:Nn(n,t),Vn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Cf(t,l)));break;case 30:break;case 21:break;default:Nn(n,t),Vn(t)}}function Vn(t){var n=t.flags;if(n&2){try{for(var a,l=t.return;l!==null;){if(zp(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var c=a.stateNode,h=Sf(t);lu(t,h,c);break;case 5:var _=a.stateNode;a.flags&32&&(Ln(_,""),a.flags&=-33);var E=Sf(t);lu(t,E,_);break;case 3:case 4:var w=a.stateNode.containerInfo,B=Sf(t);wf(t,B,w);break;default:throw Error(s(161))}}catch(K){fe(t,t.return,K)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Hp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Hp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function pa(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Pp(t,n.alternate,n),n=n.sibling}function vr(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:ma(4,n,n.return),vr(n);break;case 1:pi(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&Mp(n,n.return,a),vr(n);break;case 27:zl(n.stateNode);case 26:case 5:pi(n,n.return),vr(n);break;case 22:n.memoizedState===null&&vr(n);break;case 30:vr(n);break;default:vr(n)}t=t.sibling}}function ga(t,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,c=t,h=n,_=h.flags;switch(h.tag){case 0:case 11:case 15:ga(c,h,a),Rl(4,h);break;case 1:if(ga(c,h,a),l=h,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(B){fe(l,l.return,B)}if(l=h,c=l.updateQueue,c!==null){var E=l.stateNode;try{var w=c.shared.hiddenCallbacks;if(w!==null)for(c.shared.hiddenCallbacks=null,c=0;c<w.length;c++)vm(w[c],E)}catch(B){fe(l,l.return,B)}}a&&_&64&&Op(h),Cl(h,h.return);break;case 27:Up(h);case 26:case 5:ga(c,h,a),a&&l===null&&_&4&&kp(h),Cl(h,h.return);break;case 12:ga(c,h,a);break;case 13:ga(c,h,a),a&&_&4&&jp(c,h);break;case 22:h.memoizedState===null&&ga(c,h,a),Cl(h,h.return);break;case 30:break;default:ga(c,h,a)}n=n.sibling}}function Df(t,n){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&hl(a))}function xf(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&hl(t))}function gi(t,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Gp(t,n,a,l),n=n.sibling}function Gp(t,n,a,l){var c=n.flags;switch(n.tag){case 0:case 11:case 15:gi(t,n,a,l),c&2048&&Rl(9,n);break;case 1:gi(t,n,a,l);break;case 3:gi(t,n,a,l),c&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&hl(t)));break;case 12:if(c&2048){gi(t,n,a,l),t=n.stateNode;try{var h=n.memoizedProps,_=h.id,E=h.onPostCommit;typeof E=="function"&&E(_,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(w){fe(n,n.return,w)}}else gi(t,n,a,l);break;case 13:gi(t,n,a,l);break;case 23:break;case 22:h=n.stateNode,_=n.alternate,n.memoizedState!==null?h._visibility&2?gi(t,n,a,l):Dl(t,n):h._visibility&2?gi(t,n,a,l):(h._visibility|=2,rs(t,n,a,l,(n.subtreeFlags&10256)!==0)),c&2048&&Df(_,n);break;case 24:gi(t,n,a,l),c&2048&&xf(n.alternate,n);break;default:gi(t,n,a,l)}}function rs(t,n,a,l,c){for(c=c&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var h=t,_=n,E=a,w=l,B=_.flags;switch(_.tag){case 0:case 11:case 15:rs(h,_,E,w,c),Rl(8,_);break;case 23:break;case 22:var K=_.stateNode;_.memoizedState!==null?K._visibility&2?rs(h,_,E,w,c):Dl(h,_):(K._visibility|=2,rs(h,_,E,w,c)),c&&B&2048&&Df(_.alternate,_);break;case 24:rs(h,_,E,w,c),c&&B&2048&&xf(_.alternate,_);break;default:rs(h,_,E,w,c)}n=n.sibling}}function Dl(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=t,l=n,c=l.flags;switch(l.tag){case 22:Dl(a,l),c&2048&&Df(l.alternate,l);break;case 24:Dl(a,l),c&2048&&xf(l.alternate,l);break;default:Dl(a,l)}n=n.sibling}}var xl=8192;function ss(t){if(t.subtreeFlags&xl)for(t=t.child;t!==null;)Qp(t),t=t.sibling}function Qp(t){switch(t.tag){case 26:ss(t),t.flags&xl&&t.memoizedState!==null&&AE(ei,t.memoizedState,t.memoizedProps);break;case 5:ss(t);break;case 3:case 4:var n=ei;ei=Eu(t.stateNode.containerInfo),ss(t),ei=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=xl,xl=16777216,ss(t),xl=n):ss(t));break;default:ss(t)}}function Yp(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Nl(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];Ke=l,$p(l,t)}Yp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Kp(t),t=t.sibling}function Kp(t){switch(t.tag){case 0:case 11:case 15:Nl(t),t.flags&2048&&ma(9,t,t.return);break;case 3:Nl(t);break;case 12:Nl(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,ou(t)):Nl(t);break;default:Nl(t)}}function ou(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];Ke=l,$p(l,t)}Yp(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:ma(8,n,n.return),ou(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,ou(n));break;default:ou(n)}t=t.sibling}}function $p(t,n){for(;Ke!==null;){var a=Ke;switch(a.tag){case 0:case 11:case 15:ma(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:hl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ke=l;else t:for(a=t;Ke!==null;){l=Ke;var c=l.sibling,h=l.return;if(Bp(l),l===a){Ke=null;break t}if(c!==null){c.return=h,Ke=c;break t}Ke=h}}}var P0={getCacheForType:function(t){var n=ln(je),a=n.data.get(t);return a===void 0&&(a=t(),n.data.set(t,a)),a}},B0=typeof WeakMap=="function"?WeakMap:Map,ne=0,de=null,zt=null,qt=0,ie=0,In=null,ya=!1,ls=!1,Nf=!1,Fi=0,Se=0,_a=0,Er=0,Vf=0,Gn=0,os=0,Vl=null,Sn=null,If=!1,Of=0,uu=1/0,cu=null,va=null,tn=0,Ea=null,us=null,cs=0,Mf=0,kf=null,Xp=null,Il=0,zf=null;function On(){if((ne&2)!==0&&qt!==0)return qt&-qt;if(Q.T!==null){var t=Zr;return t!==0?t:Ff()}return wi()}function Zp(){Gn===0&&(Gn=(qt&536870912)===0||Zt?Yi():536870912);var t=Hn.current;return t!==null&&(t.flags|=32),Gn}function Mn(t,n,a){(t===de&&(ie===2||ie===9)||t.cancelPendingCommit!==null)&&(fs(t,0),Ta(t,qt,Gn,!1)),we(t,a),((ne&2)===0||t!==de)&&(t===de&&((ne&2)===0&&(Er|=a),Se===4&&Ta(t,qt,Gn,!1)),yi(t))}function Jp(t,n,a){if((ne&6)!==0)throw Error(s(327));var l=!a&&(n&124)===0&&(n&t.expiredLanes)===0||Ge(t,n),c=l?F0(t,n):Pf(t,n,!0),h=l;do{if(c===0){ls&&!l&&Ta(t,n,0,!1);break}else{if(a=t.current.alternate,h&&!q0(a)){c=Pf(t,n,!1),h=!1;continue}if(c===2){if(h=n,t.errorRecoveryDisabledLanes&h)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){n=_;t:{var E=t;c=Vl;var w=E.current.memoizedState.isDehydrated;if(w&&(fs(E,_).flags|=256),_=Pf(E,_,!1),_!==2){if(Nf&&!w){E.errorRecoveryDisabledLanes|=h,Er|=h,c=4;break t}h=Sn,Sn=c,h!==null&&(Sn===null?Sn=h:Sn.push.apply(Sn,h))}c=_}if(h=!1,c!==2)continue}}if(c===1){fs(t,0),Ta(t,n,0,!0);break}t:{switch(l=t,h=c,h){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Ta(l,n,Gn,!ya);break t;case 2:Sn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(c=Of+300-tt(),10<c)){if(Ta(l,n,Gn,!ya),ae(l,0,!0)!==0)break t;l.timeoutHandle=Cg(Wp.bind(null,l,a,Sn,cu,If,n,Gn,Er,os,ya,h,2,-0,0),c);break t}Wp(l,a,Sn,cu,If,n,Gn,Er,os,ya,h,0,-0,0)}}break}while(!0);yi(t)}function Wp(t,n,a,l,c,h,_,E,w,B,K,X,j,H){if(t.timeoutHandle=-1,X=n.subtreeFlags,(X&8192||(X&16785408)===16785408)&&(Pl={stylesheets:null,count:0,unsuspend:bE},Qp(n),X=SE(),X!==null)){t.cancelPendingCommit=X(sg.bind(null,t,n,h,a,l,c,_,E,w,K,1,j,H)),Ta(t,h,_,!B);return}sg(t,n,h,a,l,c,_,E,w)}function q0(t){for(var n=t;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var c=a[l],h=c.getSnapshot;c=c.value;try{if(!Dn(h(),c))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ta(t,n,a,l){n&=~Vf,n&=~Er,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var c=n;0<c;){var h=31-Ze(c),_=1<<h;l[h]=-1,c&=~_}a!==0&&$i(t,a,n)}function fu(){return(ne&6)===0?(Ol(0),!1):!0}function Uf(){if(zt!==null){if(ie===0)var t=zt.return;else t=zt,ki=mr=null,Wc(t),is=null,Al=0,t=zt;for(;t!==null;)Ip(t.alternate,t),t=t.return;zt=null}}function fs(t,n){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,rE(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Uf(),de=t,zt=a=Ii(t.current,null),qt=n,ie=0,In=null,ya=!1,ls=Ge(t,n),Nf=!1,os=Gn=Vf=Er=_a=Se=0,Sn=Vl=null,If=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var c=31-Ze(l),h=1<<c;n|=t[c],l&=~h}return Fi=n,Oo(),a}function tg(t,n){Ot=null,Q.H=Jo,n===ml||n===jo?(n=ym(),ie=3):n===mm?(n=ym(),ie=4):ie=n===_p?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,In=n,zt===null&&(Se=1,iu(t,Bn(n,t.current)))}function eg(){var t=Q.H;return Q.H=Jo,t===null?Jo:t}function ng(){var t=Q.A;return Q.A=P0,t}function Lf(){Se=4,ya||(qt&4194048)!==qt&&Hn.current!==null||(ls=!0),(_a&134217727)===0&&(Er&134217727)===0||de===null||Ta(de,qt,Gn,!1)}function Pf(t,n,a){var l=ne;ne|=2;var c=eg(),h=ng();(de!==t||qt!==n)&&(cu=null,fs(t,n)),n=!1;var _=Se;t:do try{if(ie!==0&&zt!==null){var E=zt,w=In;switch(ie){case 8:Uf(),_=6;break t;case 3:case 2:case 9:case 6:Hn.current===null&&(n=!0);var B=ie;if(ie=0,In=null,hs(t,E,w,B),a&&ls){_=0;break t}break;default:B=ie,ie=0,In=null,hs(t,E,w,B)}}j0(),_=Se;break}catch(K){tg(t,K)}while(!0);return n&&t.shellSuspendCounter++,ki=mr=null,ne=l,Q.H=c,Q.A=h,zt===null&&(de=null,qt=0,Oo()),_}function j0(){for(;zt!==null;)ig(zt)}function F0(t,n){var a=ne;ne|=2;var l=eg(),c=ng();de!==t||qt!==n?(cu=null,uu=tt()+500,fs(t,n)):ls=Ge(t,n);t:do try{if(ie!==0&&zt!==null){n=zt;var h=In;e:switch(ie){case 1:ie=0,In=null,hs(t,n,h,1);break;case 2:case 9:if(pm(h)){ie=0,In=null,ag(n);break}n=function(){ie!==2&&ie!==9||de!==t||(ie=7),yi(t)},h.then(n,n);break t;case 3:ie=7;break t;case 4:ie=5;break t;case 7:pm(h)?(ie=0,In=null,ag(n)):(ie=0,In=null,hs(t,n,h,7));break;case 5:var _=null;switch(zt.tag){case 26:_=zt.memoizedState;case 5:case 27:var E=zt;if(!_||Pg(_)){ie=0,In=null;var w=E.sibling;if(w!==null)zt=w;else{var B=E.return;B!==null?(zt=B,hu(B)):zt=null}break e}}ie=0,In=null,hs(t,n,h,5);break;case 6:ie=0,In=null,hs(t,n,h,6);break;case 8:Uf(),Se=6;break t;default:throw Error(s(462))}}H0();break}catch(K){tg(t,K)}while(!0);return ki=mr=null,Q.H=l,Q.A=c,ne=a,zt!==null?0:(de=null,qt=0,Oo(),Se)}function H0(){for(;zt!==null&&!Pa();)ig(zt)}function ig(t){var n=Np(t.alternate,t,Fi);t.memoizedProps=t.pendingProps,n===null?hu(t):zt=n}function ag(t){var n=t,a=n.alternate;switch(n.tag){case 15:case 0:n=Sp(a,n,n.pendingProps,n.type,void 0,qt);break;case 11:n=Sp(a,n,n.pendingProps,n.type.render,n.ref,qt);break;case 5:Wc(n);default:Ip(a,n),n=zt=rm(n,Fi),n=Np(a,n,Fi)}t.memoizedProps=t.pendingProps,n===null?hu(t):zt=n}function hs(t,n,a,l){ki=mr=null,Wc(n),is=null,Al=0;var c=n.return;try{if(O0(t,c,n,a,qt)){Se=1,iu(t,Bn(a,t.current)),zt=null;return}}catch(h){if(c!==null)throw zt=c,h;Se=1,iu(t,Bn(a,t.current)),zt=null;return}n.flags&32768?(Zt||l===1?t=!0:ls||(qt&536870912)!==0?t=!1:(ya=t=!0,(l===2||l===9||l===3||l===6)&&(l=Hn.current,l!==null&&l.tag===13&&(l.flags|=16384))),rg(n,t)):hu(n)}function hu(t){var n=t;do{if((n.flags&32768)!==0){rg(n,ya);return}t=n.return;var a=k0(n.alternate,n,Fi);if(a!==null){zt=a;return}if(n=n.sibling,n!==null){zt=n;return}zt=n=t}while(n!==null);Se===0&&(Se=5)}function rg(t,n){do{var a=z0(t.alternate,t);if(a!==null){a.flags&=32767,zt=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(t=t.sibling,t!==null)){zt=t;return}zt=t=a}while(t!==null);Se=6,zt=null}function sg(t,n,a,l,c,h,_,E,w){t.cancelPendingCommit=null;do du();while(tn!==0);if((ne&6)!==0)throw Error(s(327));if(n!==null){if(n===t.current)throw Error(s(177));if(h=n.lanes|n.childLanes,h|=Dc,go(t,a,h,_,E,w),t===de&&(zt=de=null,qt=0),us=n,Ea=t,cs=a,Mf=h,kf=c,Xp=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,K0(te,function(){return fg(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,c=st.p,st.p=2,_=ne,ne|=4;try{U0(t,n,a)}finally{ne=_,st.p=c,Q.T=l}}tn=1,lg(),og(),ug()}}function lg(){if(tn===1){tn=0;var t=Ea,n=us,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=st.p;st.p=2;var c=ne;ne|=4;try{Fp(n,t);var h=Zf,_=$d(t.containerInfo),E=h.focusedElem,w=h.selectionRange;if(_!==E&&E&&E.ownerDocument&&Kd(E.ownerDocument.documentElement,E)){if(w!==null&&Ac(E)){var B=w.start,K=w.end;if(K===void 0&&(K=B),"selectionStart"in E)E.selectionStart=B,E.selectionEnd=Math.min(K,E.value.length);else{var X=E.ownerDocument||document,j=X&&X.defaultView||window;if(j.getSelection){var H=j.getSelection(),At=E.textContent.length,_t=Math.min(w.start,At),oe=w.end===void 0?_t:Math.min(w.end,At);!H.extend&&_t>oe&&(_=oe,oe=_t,_t=_);var U=Yd(E,_t),V=Yd(E,oe);if(U&&V&&(H.rangeCount!==1||H.anchorNode!==U.node||H.anchorOffset!==U.offset||H.focusNode!==V.node||H.focusOffset!==V.offset)){var L=X.createRange();L.setStart(U.node,U.offset),H.removeAllRanges(),_t>oe?(H.addRange(L),H.extend(V.node,V.offset)):(L.setEnd(V.node,V.offset),H.addRange(L))}}}}for(X=[],H=E;H=H.parentNode;)H.nodeType===1&&X.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<X.length;E++){var $=X[E];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}wu=!!Xf,Zf=Xf=null}finally{ne=c,st.p=l,Q.T=a}}t.current=n,tn=2}}function og(){if(tn===2){tn=0;var t=Ea,n=us,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=st.p;st.p=2;var c=ne;ne|=4;try{Pp(t,n.alternate,n)}finally{ne=c,st.p=l,Q.T=a}}tn=3}}function ug(){if(tn===4||tn===3){tn=0,It();var t=Ea,n=us,a=cs,l=Xp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?tn=5:(tn=0,us=Ea=null,cg(t,t.pendingLanes));var c=t.pendingLanes;if(c===0&&(va=null),Hs(a),n=n.stateNode,ke&&typeof ke.onCommitFiberRoot=="function")try{ke.onCommitFiberRoot(kn,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=Q.T,c=st.p,st.p=2,Q.T=null;try{for(var h=t.onRecoverableError,_=0;_<l.length;_++){var E=l[_];h(E.value,{componentStack:E.stack})}}finally{Q.T=n,st.p=c}}(cs&3)!==0&&du(),yi(t),c=t.pendingLanes,(a&4194090)!==0&&(c&42)!==0?t===zf?Il++:(Il=0,zf=t):Il=0,Ol(0)}}function cg(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,hl(n)))}function du(t){return lg(),og(),ug(),fg()}function fg(){if(tn!==5)return!1;var t=Ea,n=Mf;Mf=0;var a=Hs(cs),l=Q.T,c=st.p;try{st.p=32>a?32:a,Q.T=null,a=kf,kf=null;var h=Ea,_=cs;if(tn=0,us=Ea=null,cs=0,(ne&6)!==0)throw Error(s(331));var E=ne;if(ne|=4,Kp(h.current),Gp(h,h.current,_,a),ne=E,Ol(0,!1),ke&&typeof ke.onPostCommitFiberRoot=="function")try{ke.onPostCommitFiberRoot(kn,h)}catch{}return!0}finally{st.p=c,Q.T=l,cg(t,n)}}function hg(t,n,a){n=Bn(a,n),n=mf(t.stateNode,n,2),t=ca(t,n,2),t!==null&&(we(t,2),yi(t))}function fe(t,n,a){if(t.tag===3)hg(t,t,a);else for(;n!==null;){if(n.tag===3){hg(n,t,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(va===null||!va.has(l))){t=Bn(a,t),a=gp(2),l=ca(n,a,2),l!==null&&(yp(a,l,n,t),we(l,2),yi(l));break}}n=n.return}}function Bf(t,n,a){var l=t.pingCache;if(l===null){l=t.pingCache=new B0;var c=new Set;l.set(n,c)}else c=l.get(n),c===void 0&&(c=new Set,l.set(n,c));c.has(a)||(Nf=!0,c.add(a),t=G0.bind(null,t,n,a),n.then(t,t))}function G0(t,n,a){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,de===t&&(qt&a)===a&&(Se===4||Se===3&&(qt&62914560)===qt&&300>tt()-Of?(ne&2)===0&&fs(t,0):Vf|=a,os===qt&&(os=0)),yi(t)}function dg(t,n){n===0&&(n=Ki()),t=Yr(t,n),t!==null&&(we(t,n),yi(t))}function Q0(t){var n=t.memoizedState,a=0;n!==null&&(a=n.retryLane),dg(t,a)}function Y0(t,n){var a=0;switch(t.tag){case 13:var l=t.stateNode,c=t.memoizedState;c!==null&&(a=c.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(n),dg(t,a)}function K0(t,n){return ue(t,n)}var mu=null,ds=null,qf=!1,pu=!1,jf=!1,Tr=0;function yi(t){t!==ds&&t.next===null&&(ds===null?mu=ds=t:ds=ds.next=t),pu=!0,qf||(qf=!0,X0())}function Ol(t,n){if(!jf&&pu){jf=!0;do for(var a=!1,l=mu;l!==null;){if(t!==0){var c=l.pendingLanes;if(c===0)var h=0;else{var _=l.suspendedLanes,E=l.pingedLanes;h=(1<<31-Ze(42|t)+1)-1,h&=c&~(_&~E),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(a=!0,yg(l,h))}else h=qt,h=ae(l,l===de?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(h&3)===0||Ge(l,h)||(a=!0,yg(l,h));l=l.next}while(a);jf=!1}}function $0(){mg()}function mg(){pu=qf=!1;var t=0;Tr!==0&&(aE()&&(t=Tr),Tr=0);for(var n=tt(),a=null,l=mu;l!==null;){var c=l.next,h=pg(l,n);h===0?(l.next=null,a===null?mu=c:a.next=c,c===null&&(ds=a)):(a=l,(t!==0||(h&3)!==0)&&(pu=!0)),l=c}Ol(t)}function pg(t,n){for(var a=t.suspendedLanes,l=t.pingedLanes,c=t.expirationTimes,h=t.pendingLanes&-62914561;0<h;){var _=31-Ze(h),E=1<<_,w=c[_];w===-1?((E&a)===0||(E&l)!==0)&&(c[_]=zn(E,n)):w<=n&&(t.expiredLanes|=E),h&=~E}if(n=de,a=qt,a=ae(t,t===n?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===n&&(ie===2||ie===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&ce(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Ge(t,a)){if(n=a&-a,n===t.callbackPriority)return n;switch(l!==null&&ce(l),Hs(a)){case 2:case 8:a=wt;break;case 32:a=te;break;case 268435456:a=ai;break;default:a=te}return l=gg.bind(null,t),a=ue(a,l),t.callbackPriority=n,t.callbackNode=a,n}return l!==null&&l!==null&&ce(l),t.callbackPriority=2,t.callbackNode=null,2}function gg(t,n){if(tn!==0&&tn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(du()&&t.callbackNode!==a)return null;var l=qt;return l=ae(t,t===de?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Jp(t,l,n),pg(t,tt()),t.callbackNode!=null&&t.callbackNode===a?gg.bind(null,t):null)}function yg(t,n){if(du())return null;Jp(t,n,!0)}function X0(){sE(function(){(ne&6)!==0?ue(ct,$0):mg()})}function Ff(){return Tr===0&&(Tr=Yi()),Tr}function _g(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Xn(""+t)}function vg(t,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,t.id&&a.setAttribute("form",t.id),n.parentNode.insertBefore(a,n),t=new FormData(t),a.parentNode.removeChild(a),t}function Z0(t,n,a,l,c){if(n==="submit"&&a&&a.stateNode===c){var h=_g((c[Je]||null).action),_=l.submitter;_&&(n=(n=_[Je]||null)?_g(n.formAction):_.getAttribute("formAction"),n!==null&&(h=n,_=null));var E=new tr("action","action",null,l,c);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Tr!==0){var w=_?vg(c,_):new FormData(c);uf(a,{pending:!0,data:w,method:c.method,action:h},null,w)}}else typeof h=="function"&&(E.preventDefault(),w=_?vg(c,_):new FormData(c),uf(a,{pending:!0,data:w,method:c.method,action:h},h,w))},currentTarget:c}]})}}for(var Hf=0;Hf<Cc.length;Hf++){var Gf=Cc[Hf],J0=Gf.toLowerCase(),W0=Gf[0].toUpperCase()+Gf.slice(1);ti(J0,"on"+W0)}ti(Jd,"onAnimationEnd"),ti(Wd,"onAnimationIteration"),ti(tm,"onAnimationStart"),ti("dblclick","onDoubleClick"),ti("focusin","onFocus"),ti("focusout","onBlur"),ti(g0,"onTransitionRun"),ti(y0,"onTransitionStart"),ti(_0,"onTransitionCancel"),ti(em,"onTransitionEnd"),ui("onMouseEnter",["mouseout","mouseover"]),ui("onMouseLeave",["mouseout","mouseover"]),ui("onPointerEnter",["pointerout","pointerover"]),ui("onPointerLeave",["pointerout","pointerover"]),oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ml));function Eg(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],c=l.event;l=l.listeners;t:{var h=void 0;if(n)for(var _=l.length-1;0<=_;_--){var E=l[_],w=E.instance,B=E.currentTarget;if(E=E.listener,w!==h&&c.isPropagationStopped())break t;h=E,c.currentTarget=B;try{h(c)}catch(K){nu(K)}c.currentTarget=null,h=w}else for(_=0;_<l.length;_++){if(E=l[_],w=E.instance,B=E.currentTarget,E=E.listener,w!==h&&c.isPropagationStopped())break t;h=E,c.currentTarget=B;try{h(c)}catch(K){nu(K)}c.currentTarget=null,h=w}}}}function Ut(t,n){var a=n[qa];a===void 0&&(a=n[qa]=new Set);var l=t+"__bubble";a.has(l)||(Tg(n,t,2,!1),a.add(l))}function Qf(t,n,a){var l=0;n&&(l|=4),Tg(a,t,l,n)}var gu="_reactListening"+Math.random().toString(36).slice(2);function Yf(t){if(!t[gu]){t[gu]=!0,yo.forEach(function(a){a!=="selectionchange"&&(tE.has(a)||Qf(a,!1,t),Qf(a,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[gu]||(n[gu]=!0,Qf("selectionchange",!1,n))}}function Tg(t,n,a,l){switch(Gg(n)){case 2:var c=CE;break;case 8:c=DE;break;default:c=lh}a=c.bind(null,n,a,t),c=void 0,!Ni||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),l?c!==void 0?t.addEventListener(n,a,{capture:!0,passive:c}):t.addEventListener(n,a,!0):c!==void 0?t.addEventListener(n,a,{passive:c}):t.addEventListener(n,a,!1)}function Kf(t,n,a,l,c){var h=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var E=l.stateNode.containerInfo;if(E===c)break;if(_===4)for(_=l.return;_!==null;){var w=_.tag;if((w===3||w===4)&&_.stateNode.containerInfo===c)return;_=_.return}for(;E!==null;){if(_=si(E),_===null)return;if(w=_.tag,w===5||w===6||w===26||w===27){l=h=_;continue t}E=E.parentNode}}l=l.return}Za(function(){var B=h,K=Zs(a),X=[];t:{var j=nm.get(t);if(j!==void 0){var H=tr,At=t;switch(t){case"keypress":if(Ja(a)===0)break t;case"keydown":case"keyup":H=Fr;break;case"focusin":At="focus",H=Br;break;case"focusout":At="blur",H=Br;break;case"beforeblur":case"afterblur":H=Br;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=rr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=So;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=sa;break;case Jd:case Wd:case tm:H=Ws;break;case em:H=m;break;case"scroll":case"scrollend":H=nr;break;case"wheel":H=b;break;case"copy":case"cut":case"paste":H=Ro;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=nl;break;case"toggle":case"beforetoggle":H=G}var _t=(n&4)!==0,oe=!_t&&(t==="scroll"||t==="scrollend"),U=_t?j!==null?j+"Capture":null:j;_t=[];for(var V=B,L;V!==null;){var $=V;if(L=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||L===null||U===null||($=aa(V,U),$!=null&&_t.push(kl(V,$,L))),oe)break;V=V.return}0<_t.length&&(j=new H(j,At,null,a,K),X.push({event:j,listeners:_t}))}}if((n&7)===0){t:{if(j=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",j&&a!==Xs&&(At=a.relatedTarget||a.fromElement)&&(si(At)||At[Ri]))break t;if((H||j)&&(j=K.window===K?K:(j=K.ownerDocument)?j.defaultView||j.parentWindow:window,H?(At=a.relatedTarget||a.toElement,H=B,At=At?si(At):null,At!==null&&(oe=f(At),_t=At.tag,At!==oe||_t!==5&&_t!==27&&_t!==6)&&(At=null)):(H=null,At=B),H!==At)){if(_t=rr,$="onMouseLeave",U="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(_t=nl,$="onPointerLeave",U="onPointerEnter",V="pointer"),oe=H==null?j:Ji(H),L=At==null?j:Ji(At),j=new _t($,V+"leave",H,a,K),j.target=oe,j.relatedTarget=L,$=null,si(K)===B&&(_t=new _t(U,V+"enter",At,a,K),_t.target=L,_t.relatedTarget=oe,$=_t),oe=$,H&&At)e:{for(_t=H,U=At,V=0,L=_t;L;L=ms(L))V++;for(L=0,$=U;$;$=ms($))L++;for(;0<V-L;)_t=ms(_t),V--;for(;0<L-V;)U=ms(U),L--;for(;V--;){if(_t===U||U!==null&&_t===U.alternate)break e;_t=ms(_t),U=ms(U)}_t=null}else _t=null;H!==null&&bg(X,j,H,_t,!1),At!==null&&oe!==null&&bg(X,oe,At,_t,!0)}}t:{if(j=B?Ji(B):window,H=j.nodeName&&j.nodeName.toLowerCase(),H==="select"||H==="input"&&j.type==="file")var dt=qd;else if(Pd(j))if(jd)dt=d0;else{dt=f0;var Mt=c0}else H=j.nodeName,!H||H.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?B&&Ur(B.elementType)&&(dt=qd):dt=h0;if(dt&&(dt=dt(t,B))){Bd(X,dt,a,K);break t}Mt&&Mt(t,j,B),t==="focusout"&&B&&j.type==="number"&&B.memoizedProps.value!=null&&Ys(j,"number",j.value)}switch(Mt=B?Ji(B):window,t){case"focusin":(Pd(Mt)||Mt.contentEditable==="true")&&(Hr=Mt,Sc=B,ll=null);break;case"focusout":ll=Sc=Hr=null;break;case"mousedown":wc=!0;break;case"contextmenu":case"mouseup":case"dragend":wc=!1,Xd(X,a,K);break;case"selectionchange":if(p0)break;case"keydown":case"keyup":Xd(X,a,K)}var pt;if(Rt)t:{switch(t){case"compositionstart":var Et="onCompositionStart";break t;case"compositionend":Et="onCompositionEnd";break t;case"compositionupdate":Et="onCompositionUpdate";break t}Et=void 0}else Wn?Zn(t,a)&&(Et="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Et="onCompositionStart");Et&&(De&&a.locale!=="ko"&&(Wn||Et!=="onCompositionStart"?Et==="onCompositionEnd"&&Wn&&(pt=Ao()):(Pn=K,he="value"in Pn?Pn.value:Pn.textContent,Wn=!0)),Mt=yu(B,Et),0<Mt.length&&(Et=new el(Et,t,null,a,K),X.push({event:Et,listeners:Mt}),pt?Et.data=pt:(pt=Jn(a),pt!==null&&(Et.data=pt)))),(pt=ee?il(t,a):l0(t,a))&&(Et=yu(B,"onBeforeInput"),0<Et.length&&(Mt=new el("onBeforeInput","beforeinput",null,a,K),X.push({event:Mt,listeners:Et}),Mt.data=pt)),Z0(X,t,B,a,K)}Eg(X,n)})}function kl(t,n,a){return{instance:t,listener:n,currentTarget:a}}function yu(t,n){for(var a=n+"Capture",l=[];t!==null;){var c=t,h=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||h===null||(c=aa(t,a),c!=null&&l.unshift(kl(t,c,h)),c=aa(t,n),c!=null&&l.push(kl(t,c,h))),t.tag===3)return l;t=t.return}return[]}function ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function bg(t,n,a,l,c){for(var h=n._reactName,_=[];a!==null&&a!==l;){var E=a,w=E.alternate,B=E.stateNode;if(E=E.tag,w!==null&&w===l)break;E!==5&&E!==26&&E!==27||B===null||(w=B,c?(B=aa(a,h),B!=null&&_.unshift(kl(a,B,w))):c||(B=aa(a,h),B!=null&&_.push(kl(a,B,w)))),a=a.return}_.length!==0&&t.push({event:n,listeners:_})}var eE=/\r\n?/g,nE=/\u0000|\uFFFD/g;function Ag(t){return(typeof t=="string"?t:""+t).replace(eE,`
`).replace(nE,"")}function Sg(t,n){return n=Ag(n),Ag(t)===n}function _u(){}function le(t,n,a,l,c,h){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||Ln(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&Ln(t,""+l);break;case"className":Qa(t,"class",l);break;case"tabIndex":Qa(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Qa(t,a,l);break;case"style":$s(t,l,h);break;case"data":if(n!=="object"){Qa(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Xn(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(a==="formAction"?(n!=="input"&&le(t,n,"name",c.name,c,null),le(t,n,"formEncType",c.formEncType,c,null),le(t,n,"formMethod",c.formMethod,c,null),le(t,n,"formTarget",c.formTarget,c,null)):(le(t,n,"encType",c.encType,c,null),le(t,n,"method",c.method,c,null),le(t,n,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Xn(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=_u);break;case"onScroll":l!=null&&Ut("scroll",t);break;case"onScrollEnd":l!=null&&Ut("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Xn(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ut("beforetoggle",t),Ut("toggle",t),Ga(t,"popover",l);break;case"xlinkActuate":Un(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Un(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Un(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Un(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Un(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Un(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Un(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Un(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Un(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ga(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Eo.get(a)||a,Ga(t,a,l))}}function $f(t,n,a,l,c,h){switch(a){case"style":$s(t,l,h);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Ln(t,l):(typeof l=="number"||typeof l=="bigint")&&Ln(t,""+l);break;case"onScroll":l!=null&&Ut("scroll",t);break;case"onScrollEnd":l!=null&&Ut("scrollend",t);break;case"onClick":l!=null&&(t.onclick=_u);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fa.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),n=a.slice(2,c?a.length-7:void 0),h=t[Je]||null,h=h!=null?h[a]:null,typeof h=="function"&&t.removeEventListener(n,h,c),typeof l=="function")){typeof h!="function"&&h!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(n,l,c);break t}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ga(t,a,l)}}}function en(t,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ut("error",t),Ut("load",t);var l=!1,c=!1,h;for(h in a)if(a.hasOwnProperty(h)){var _=a[h];if(_!=null)switch(h){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:le(t,n,h,_,a,null)}}c&&le(t,n,"srcSet",a.srcSet,a,null),l&&le(t,n,"src",a.src,a,null);return;case"input":Ut("invalid",t);var E=h=_=c=null,w=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var K=a[l];if(K!=null)switch(l){case"name":c=K;break;case"type":_=K;break;case"checked":w=K;break;case"defaultChecked":B=K;break;case"value":h=K;break;case"defaultValue":E=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,n));break;default:le(t,n,l,K,a,null)}}Qs(t,h,E,w,B,_,c,!1),ea(t);return;case"select":Ut("invalid",t),l=_=h=null;for(c in a)if(a.hasOwnProperty(c)&&(E=a[c],E!=null))switch(c){case"value":h=E;break;case"defaultValue":_=E;break;case"multiple":l=E;default:le(t,n,c,E,a,null)}n=h,a=_,t.multiple=!!l,n!=null?na(t,!!l,n,!1):a!=null&&na(t,!!l,a,!0);return;case"textarea":Ut("invalid",t),h=c=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(E=a[_],E!=null))switch(_){case"value":l=E;break;case"defaultValue":c=E;break;case"children":h=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:le(t,n,_,E,a,null)}vo(t,l,c,h),ea(t);return;case"option":for(w in a)if(a.hasOwnProperty(w)&&(l=a[w],l!=null))switch(w){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:le(t,n,w,l,a,null)}return;case"dialog":Ut("beforetoggle",t),Ut("toggle",t),Ut("cancel",t),Ut("close",t);break;case"iframe":case"object":Ut("load",t);break;case"video":case"audio":for(l=0;l<Ml.length;l++)Ut(Ml[l],t);break;case"image":Ut("error",t),Ut("load",t);break;case"details":Ut("toggle",t);break;case"embed":case"source":case"link":Ut("error",t),Ut("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:le(t,n,B,l,a,null)}return;default:if(Ur(n)){for(K in a)a.hasOwnProperty(K)&&(l=a[K],l!==void 0&&$f(t,n,K,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&le(t,n,E,l,a,null))}function iE(t,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,h=null,_=null,E=null,w=null,B=null,K=null;for(H in a){var X=a[H];if(a.hasOwnProperty(H)&&X!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":w=X;default:l.hasOwnProperty(H)||le(t,n,H,null,l,X)}}for(var j in l){var H=l[j];if(X=a[j],l.hasOwnProperty(j)&&(H!=null||X!=null))switch(j){case"type":h=H;break;case"name":c=H;break;case"checked":B=H;break;case"defaultChecked":K=H;break;case"value":_=H;break;case"defaultValue":E=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,n));break;default:H!==X&&le(t,n,j,H,l,X)}}Gs(t,_,E,w,B,K,h,c);return;case"select":H=_=E=j=null;for(h in a)if(w=a[h],a.hasOwnProperty(h)&&w!=null)switch(h){case"value":break;case"multiple":H=w;default:l.hasOwnProperty(h)||le(t,n,h,null,l,w)}for(c in l)if(h=l[c],w=a[c],l.hasOwnProperty(c)&&(h!=null||w!=null))switch(c){case"value":j=h;break;case"defaultValue":E=h;break;case"multiple":_=h;default:h!==w&&le(t,n,c,h,l,w)}n=E,a=_,l=H,j!=null?na(t,!!a,j,!1):!!l!=!!a&&(n!=null?na(t,!!a,n,!0):na(t,!!a,a?[]:"",!1));return;case"textarea":H=j=null;for(E in a)if(c=a[E],a.hasOwnProperty(E)&&c!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:le(t,n,E,null,l,c)}for(_ in l)if(c=l[_],h=a[_],l.hasOwnProperty(_)&&(c!=null||h!=null))switch(_){case"value":j=c;break;case"defaultValue":H=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(s(91));break;default:c!==h&&le(t,n,_,c,l,h)}_o(t,j,H);return;case"option":for(var At in a)if(j=a[At],a.hasOwnProperty(At)&&j!=null&&!l.hasOwnProperty(At))switch(At){case"selected":t.selected=!1;break;default:le(t,n,At,null,l,j)}for(w in l)if(j=l[w],H=a[w],l.hasOwnProperty(w)&&j!==H&&(j!=null||H!=null))switch(w){case"selected":t.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:le(t,n,w,j,l,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _t in a)j=a[_t],a.hasOwnProperty(_t)&&j!=null&&!l.hasOwnProperty(_t)&&le(t,n,_t,null,l,j);for(B in l)if(j=l[B],H=a[B],l.hasOwnProperty(B)&&j!==H&&(j!=null||H!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,n));break;default:le(t,n,B,j,l,H)}return;default:if(Ur(n)){for(var oe in a)j=a[oe],a.hasOwnProperty(oe)&&j!==void 0&&!l.hasOwnProperty(oe)&&$f(t,n,oe,void 0,l,j);for(K in l)j=l[K],H=a[K],!l.hasOwnProperty(K)||j===H||j===void 0&&H===void 0||$f(t,n,K,j,l,H);return}}for(var U in a)j=a[U],a.hasOwnProperty(U)&&j!=null&&!l.hasOwnProperty(U)&&le(t,n,U,null,l,j);for(X in l)j=l[X],H=a[X],!l.hasOwnProperty(X)||j===H||j==null&&H==null||le(t,n,X,j,l,H)}var Xf=null,Zf=null;function vu(t){return t.nodeType===9?t:t.ownerDocument}function wg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Rg(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Jf(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Wf=null;function aE(){var t=window.event;return t&&t.type==="popstate"?t===Wf?!1:(Wf=t,!0):(Wf=null,!1)}var Cg=typeof setTimeout=="function"?setTimeout:void 0,rE=typeof clearTimeout=="function"?clearTimeout:void 0,Dg=typeof Promise=="function"?Promise:void 0,sE=typeof queueMicrotask=="function"?queueMicrotask:typeof Dg<"u"?function(t){return Dg.resolve(null).then(t).catch(lE)}:Cg;function lE(t){setTimeout(function(){throw t})}function ba(t){return t==="head"}function xg(t,n){var a=n,l=0,c=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(0<l&&8>l){a=l;var _=t.ownerDocument;if(a&1&&zl(_.documentElement),a&2&&zl(_.body),a&4)for(a=_.head,zl(a),_=a.firstChild;_;){var E=_.nextSibling,w=_.nodeName;_[Zi]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=E}}if(c===0){t.removeChild(h),Hl(n);return}c--}else a==="$"||a==="$?"||a==="$!"?c++:l=a.charCodeAt(0)-48;else l=0;a=h}while(a);Hl(n)}function th(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":th(a),Ir(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function oE(t,n,a,l){for(;t.nodeType===1;){var c=a;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Zi])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(h=t.getAttribute("rel"),h==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(h!==c.rel||t.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||t.getAttribute("title")!==(c.title==null?null:c.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(h=t.getAttribute("src"),(h!==(c.src==null?null:c.src)||t.getAttribute("type")!==(c.type==null?null:c.type)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&h&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var h=c.name==null?null:""+c.name;if(c.type==="hidden"&&t.getAttribute("name")===h)return t}else return t;if(t=ni(t.nextSibling),t===null)break}return null}function uE(t,n,a){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ni(t.nextSibling),t===null))return null;return t}function eh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function cE(t,n){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ni(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}var nh=null;function Ng(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(n===0)return t;n--}else a==="/$"&&n++}t=t.previousSibling}return null}function Vg(t,n,a){switch(n=vu(a),t){case"html":if(t=n.documentElement,!t)throw Error(s(452));return t;case"head":if(t=n.head,!t)throw Error(s(453));return t;case"body":if(t=n.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function zl(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Ir(t)}var Qn=new Map,Ig=new Set;function Eu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Hi=st.d;st.d={f:fE,r:hE,D:dE,C:mE,L:pE,m:gE,X:_E,S:yE,M:vE};function fE(){var t=Hi.f(),n=fu();return t||n}function hE(t){var n=li(t);n!==null&&n.tag===5&&n.type==="form"?Jm(n):Hi.r(t)}var ps=typeof document>"u"?null:document;function Og(t,n,a){var l=ps;if(l&&typeof n=="string"&&n){var c=Qe(n);c='link[rel="'+t+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),Ig.has(c)||(Ig.add(c),t={rel:t,crossOrigin:a,href:n},l.querySelector(c)===null&&(n=l.createElement("link"),en(n,"link",t),Ce(n),l.head.appendChild(n)))}}function dE(t){Hi.D(t),Og("dns-prefetch",t,null)}function mE(t,n){Hi.C(t,n),Og("preconnect",t,n)}function pE(t,n,a){Hi.L(t,n,a);var l=ps;if(l&&t&&n){var c='link[rel="preload"][as="'+Qe(n)+'"]';n==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+Qe(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+Qe(a.imageSizes)+'"]')):c+='[href="'+Qe(t)+'"]';var h=c;switch(n){case"style":h=gs(t);break;case"script":h=ys(t)}Qn.has(h)||(t=T({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:t,as:n},a),Qn.set(h,t),l.querySelector(c)!==null||n==="style"&&l.querySelector(Ul(h))||n==="script"&&l.querySelector(Ll(h))||(n=l.createElement("link"),en(n,"link",t),Ce(n),l.head.appendChild(n)))}}function gE(t,n){Hi.m(t,n);var a=ps;if(a&&t){var l=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+Qe(l)+'"][href="'+Qe(t)+'"]',h=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=ys(t)}if(!Qn.has(h)&&(t=T({rel:"modulepreload",href:t},n),Qn.set(h,t),a.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ll(h)))return}l=a.createElement("link"),en(l,"link",t),Ce(l),a.head.appendChild(l)}}}function yE(t,n,a){Hi.S(t,n,a);var l=ps;if(l&&t){var c=Wi(l).hoistableStyles,h=gs(t);n=n||"default";var _=c.get(h);if(!_){var E={loading:0,preload:null};if(_=l.querySelector(Ul(h)))E.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":n},a),(a=Qn.get(h))&&ih(t,a);var w=_=l.createElement("link");Ce(w),en(w,"link",t),w._p=new Promise(function(B,K){w.onload=B,w.onerror=K}),w.addEventListener("load",function(){E.loading|=1}),w.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Tu(_,n,l)}_={type:"stylesheet",instance:_,count:1,state:E},c.set(h,_)}}}function _E(t,n){Hi.X(t,n);var a=ps;if(a&&t){var l=Wi(a).hoistableScripts,c=ys(t),h=l.get(c);h||(h=a.querySelector(Ll(c)),h||(t=T({src:t,async:!0},n),(n=Qn.get(c))&&ah(t,n),h=a.createElement("script"),Ce(h),en(h,"link",t),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(c,h))}}function vE(t,n){Hi.M(t,n);var a=ps;if(a&&t){var l=Wi(a).hoistableScripts,c=ys(t),h=l.get(c);h||(h=a.querySelector(Ll(c)),h||(t=T({src:t,async:!0,type:"module"},n),(n=Qn.get(c))&&ah(t,n),h=a.createElement("script"),Ce(h),en(h,"link",t),a.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(c,h))}}function Mg(t,n,a,l){var c=(c=q.current)?Eu(c):null;if(!c)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=gs(a.href),a=Wi(c).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=gs(a.href);var h=Wi(c).hoistableStyles,_=h.get(t);if(_||(c=c.ownerDocument||c,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(t,_),(h=c.querySelector(Ul(t)))&&!h._p&&(_.instance=h,_.state.loading=5),Qn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Qn.set(t,a),h||EE(c,t,a,_.state))),n&&l===null)throw Error(s(528,""));return _}if(n&&l!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=ys(a),a=Wi(c).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function gs(t){return'href="'+Qe(t)+'"'}function Ul(t){return'link[rel="stylesheet"]['+t+"]"}function kg(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function EE(t,n,a,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),en(n,"link",a),Ce(n),t.head.appendChild(n))}function ys(t){return'[src="'+Qe(t)+'"]'}function Ll(t){return"script[async]"+t}function zg(t,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+Qe(a.href)+'"]');if(l)return n.instance=l,Ce(l),l;var c=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ce(l),en(l,"style",c),Tu(l,a.precedence,t),n.instance=l;case"stylesheet":c=gs(a.href);var h=t.querySelector(Ul(c));if(h)return n.state.loading|=4,n.instance=h,Ce(h),h;l=kg(a),(c=Qn.get(c))&&ih(l,c),h=(t.ownerDocument||t).createElement("link"),Ce(h);var _=h;return _._p=new Promise(function(E,w){_.onload=E,_.onerror=w}),en(h,"link",l),n.state.loading|=4,Tu(h,a.precedence,t),n.instance=h;case"script":return h=ys(a.src),(c=t.querySelector(Ll(h)))?(n.instance=c,Ce(c),c):(l=a,(c=Qn.get(h))&&(l=T({},a),ah(l,c)),t=t.ownerDocument||t,c=t.createElement("script"),Ce(c),en(c,"link",l),t.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Tu(l,a.precedence,t));return n.instance}function Tu(t,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,h=c,_=0;_<l.length;_++){var E=l[_];if(E.dataset.precedence===n)h=E;else if(h!==c)break}h?h.parentNode.insertBefore(t,h.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(t,n.firstChild))}function ih(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function ah(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var bu=null;function Ug(t,n,a){if(bu===null){var l=new Map,c=bu=new Map;c.set(a,l)}else c=bu,l=c.get(a),l||(l=new Map,c.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),c=0;c<a.length;c++){var h=a[c];if(!(h[Zi]||h[Re]||t==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var _=h.getAttribute(n)||"";_=t+_;var E=l.get(_);E?E.push(h):l.set(_,[h])}}return l}function Lg(t,n,a){t=t.ownerDocument||t,t.head.insertBefore(a,n==="title"?t.querySelector("head > title"):null)}function TE(t,n,a){if(a===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Pg(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Pl=null;function bE(){}function AE(t,n,a){if(Pl===null)throw Error(s(475));var l=Pl;if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=gs(a.href),h=t.querySelector(Ul(c));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Au.bind(l),t.then(l,l)),n.state.loading|=4,n.instance=h,Ce(h);return}h=t.ownerDocument||t,a=kg(a),(c=Qn.get(c))&&ih(a,c),h=h.createElement("link"),Ce(h);var _=h;_._p=new Promise(function(E,w){_.onload=E,_.onerror=w}),en(h,"link",a),n.instance=h}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(l.count++,n=Au.bind(l),t.addEventListener("load",n),t.addEventListener("error",n))}}function SE(){if(Pl===null)throw Error(s(475));var t=Pl;return t.stylesheets&&t.count===0&&rh(t,t.stylesheets),0<t.count?function(n){var a=setTimeout(function(){if(t.stylesheets&&rh(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Au(){if(this.count--,this.count===0){if(this.stylesheets)rh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Su=null;function rh(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Su=new Map,n.forEach(wE,t),Su=null,Au.call(t))}function wE(t,n){if(!(n.state.loading&4)){var a=Su.get(t);if(a)var l=a.get(null);else{a=new Map,Su.set(t,a);for(var c=t.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<c.length;h++){var _=c[h];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}c=n.instance,_=c.getAttribute("data-precedence"),h=a.get(_)||l,h===l&&a.set(null,c),a.set(_,c),this.count++,l=Au.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),h?h.parentNode.insertBefore(c,h.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(c,t.firstChild)),n.state.loading|=4}}var Bl={$$typeof:Tt,Provider:null,Consumer:null,_currentValue:mt,_currentValue2:mt,_threadCount:0};function RE(t,n,a,l,c,h,_,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vr(0),this.hiddenUpdates=Vr(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=h,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Bg(t,n,a,l,c,h,_,E,w,B,K,X){return t=new RE(t,n,a,_,E,w,B,X),n=1,h===!0&&(n|=24),h=xn(3,null,null,n),t.current=h,h.stateNode=t,n=Pc(),n.refCount++,t.pooledCache=n,n.refCount++,h.memoizedState={element:l,isDehydrated:a,cache:n},Fc(h),t}function qg(t){return t?(t=Kr,t):Kr}function jg(t,n,a,l,c,h){c=qg(c),l.context===null?l.context=c:l.pendingContext=c,l=ua(n),l.payload={element:a},h=h===void 0?null:h,h!==null&&(l.callback=h),a=ca(t,l,n),a!==null&&(Mn(a,t,n),gl(a,t,n))}function Fg(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function sh(t,n){Fg(t,n),(t=t.alternate)&&Fg(t,n)}function Hg(t){if(t.tag===13){var n=Yr(t,67108864);n!==null&&Mn(n,t,67108864),sh(t,67108864)}}var wu=!0;function CE(t,n,a,l){var c=Q.T;Q.T=null;var h=st.p;try{st.p=2,lh(t,n,a,l)}finally{st.p=h,Q.T=c}}function DE(t,n,a,l){var c=Q.T;Q.T=null;var h=st.p;try{st.p=8,lh(t,n,a,l)}finally{st.p=h,Q.T=c}}function lh(t,n,a,l){if(wu){var c=oh(l);if(c===null)Kf(t,n,l,Ru,a),Qg(t,l);else if(NE(c,t,n,a,l))l.stopPropagation();else if(Qg(t,l),n&4&&-1<xE.indexOf(t)){for(;c!==null;){var h=li(c);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var _=bt(h.pendingLanes);if(_!==0){var E=h;for(E.pendingLanes|=2,E.entangledLanes|=2;_;){var w=1<<31-Ze(_);E.entanglements[1]|=w,_&=~w}yi(h),(ne&6)===0&&(uu=tt()+500,Ol(0))}}break;case 13:E=Yr(h,2),E!==null&&Mn(E,h,2),fu(),sh(h,2)}if(h=oh(l),h===null&&Kf(t,n,l,Ru,a),h===c)break;c=h}c!==null&&l.stopPropagation()}else Kf(t,n,l,null,a)}}function oh(t){return t=Zs(t),uh(t)}var Ru=null;function uh(t){if(Ru=null,t=si(t),t!==null){var n=f(t);if(n===null)t=null;else{var a=n.tag;if(a===13){if(t=d(n),t!==null)return t;t=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Ru=t,null}function Gg(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xt()){case ct:return 2;case wt:return 8;case te:case Tn:return 32;case ai:return 268435456;default:return 32}default:return 32}}var ch=!1,Aa=null,Sa=null,wa=null,ql=new Map,jl=new Map,Ra=[],xE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qg(t,n){switch(t){case"focusin":case"focusout":Aa=null;break;case"dragenter":case"dragleave":Sa=null;break;case"mouseover":case"mouseout":wa=null;break;case"pointerover":case"pointerout":ql.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":jl.delete(n.pointerId)}}function Fl(t,n,a,l,c,h){return t===null||t.nativeEvent!==h?(t={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:h,targetContainers:[c]},n!==null&&(n=li(n),n!==null&&Hg(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),t)}function NE(t,n,a,l,c){switch(n){case"focusin":return Aa=Fl(Aa,t,n,a,l,c),!0;case"dragenter":return Sa=Fl(Sa,t,n,a,l,c),!0;case"mouseover":return wa=Fl(wa,t,n,a,l,c),!0;case"pointerover":var h=c.pointerId;return ql.set(h,Fl(ql.get(h)||null,t,n,a,l,c)),!0;case"gotpointercapture":return h=c.pointerId,jl.set(h,Fl(jl.get(h)||null,t,n,a,l,c)),!0}return!1}function Yg(t){var n=si(t.target);if(n!==null){var a=f(n);if(a!==null){if(n=a.tag,n===13){if(n=d(a),n!==null){t.blockedOn=n,gc(t.priority,function(){if(a.tag===13){var l=On();l=Fs(l);var c=Yr(a,l);c!==null&&Mn(c,a,l),sh(a,l)}});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cu(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=oh(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Xs=l,a.target.dispatchEvent(l),Xs=null}else return n=li(a),n!==null&&Hg(n),t.blockedOn=a,!1;n.shift()}return!0}function Kg(t,n,a){Cu(t)&&a.delete(n)}function VE(){ch=!1,Aa!==null&&Cu(Aa)&&(Aa=null),Sa!==null&&Cu(Sa)&&(Sa=null),wa!==null&&Cu(wa)&&(wa=null),ql.forEach(Kg),jl.forEach(Kg)}function Du(t,n){t.blockedOn===n&&(t.blockedOn=null,ch||(ch=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,VE)))}var xu=null;function $g(t){xu!==t&&(xu=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){xu===t&&(xu=null);for(var n=0;n<t.length;n+=3){var a=t[n],l=t[n+1],c=t[n+2];if(typeof l!="function"){if(uh(l||a)===null)continue;break}var h=li(a);h!==null&&(t.splice(n,3),n-=3,uf(h,{pending:!0,data:c,method:a.method,action:l},l,c))}}))}function Hl(t){function n(w){return Du(w,t)}Aa!==null&&Du(Aa,t),Sa!==null&&Du(Sa,t),wa!==null&&Du(wa,t),ql.forEach(n),jl.forEach(n);for(var a=0;a<Ra.length;a++){var l=Ra[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ra.length&&(a=Ra[0],a.blockedOn===null);)Yg(a),a.blockedOn===null&&Ra.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var c=a[l],h=a[l+1],_=c[Je]||null;if(typeof h=="function")_||$g(a);else if(_){var E=null;if(h&&h.hasAttribute("formAction")){if(c=h,_=h[Je]||null)E=_.formAction;else if(uh(c)!==null)continue}else E=_.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),$g(a)}}}function fh(t){this._internalRoot=t}Nu.prototype.render=fh.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,l=On();jg(a,l,t,n,null,null)},Nu.prototype.unmount=fh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;jg(t.current,2,null,t,null,null),fu(),n[Ri]=null}};function Nu(t){this._internalRoot=t}Nu.prototype.unstable_scheduleHydration=function(t){if(t){var n=wi();t={blockedOn:null,target:t,priority:n};for(var a=0;a<Ra.length&&n!==0&&n<Ra[a].priority;a++);Ra.splice(a,0,t),a===0&&Yg(t)}};var Xg=e.version;if(Xg!=="19.1.1")throw Error(s(527,Xg,"19.1.1"));st.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=g(n),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var IE={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vu.isDisabled&&Vu.supportsFiber)try{kn=Vu.inject(IE),ke=Vu}catch{}}return Ql.createRoot=function(t,n){if(!o(t))throw Error(s(299));var a=!1,l="",c=hp,h=dp,_=mp,E=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(_=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(E=n.unstable_transitionCallbacks)),n=Bg(t,1,!1,null,null,a,l,c,h,_,E,null),t[Ri]=n.current,Yf(t),new fh(n)},Ql.hydrateRoot=function(t,n,a){if(!o(t))throw Error(s(299));var l=!1,c="",h=hp,_=dp,E=mp,w=null,B=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(w=a.unstable_transitionCallbacks),a.formState!==void 0&&(B=a.formState)),n=Bg(t,1,!0,n,a??null,l,c,h,_,E,w,B),n.context=qg(null),a=n.current,l=On(),l=Fs(l),c=ua(l),c.callback=null,ca(a,c,l),a=l,n.current.lanes=a,we(n,a),yi(n),t[Ri]=n.current,Yf(t),new Nu(n)},Ql.version="19.1.1",Ql}var sy;function jE(){if(sy)return mh.exports;sy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),mh.exports=qE(),mh.exports}var FE=jE();const HE=R_(FE),{useState:GE,useEffect:QE,useMemo:YE}=D,Gu={tr:{nav_quote:"Teklif Ver",nav_admin:"Admin",title_quote:"Özel Üretim Teklif Formu",sub_quote:"Metal işleme ihtiyaçlarınız için detayları paylaşın. Maksimum 2 dosya yükleyebilirsiniz (PDF, PNG, JPG/JPEG, DXF, DWG, STEP/IGES).",title_admin:"Teklif Yönetimi ve Analitik",sub_admin:"Gelen talepleri görüntüleyin, durumlarını yönetin, içgörüler elde edin ve dışa aktarın.",submit:"Teklifi Gönder",saved:"Teklif alındı. Teşekkürler!",required:"Zorunlu alan",files_limit:"En fazla 2 dosya yükleyebilirsiniz.",file_too_big:"Dosya çok büyük. Limit: 1.5MB",file_type_bad:"Desteklenmeyen dosya türü",f_name:"Ad Soyad",f_company:"Firma (opsiyonel)",f_email:"E‑posta",f_phone:"Telefon",f_country:"Ülke",f_city:"Şehir",f_proj:"Proje / Parça Adı",f_process:"Süreçler (seçiniz)",f_material:"Malzeme",f_grade:"Kalite / Alaşım",f_thickness:"Kalınlık (mm)",f_qty:"Adet",f_dims:"Boyutlar (L×W×H mm)",f_tolerance:"Tolerans (örn. ±0.2mm)",f_finish:"Yüzey İşlem",f_due:"Hedef Teslim Tarihi",f_repeat:"Tek Seferlik / Süreklilik",f_budget:"Bütçe (opsiyonel)",f_address:"Teslimat Adresi (opsiyonel)",f_desc:"Teknik Açıklama / Notlar",f_drawing:"Teknik çizim mevcut mu?",f_upload:"Dosya Yükle (max 2)",f_prodimg:"Ürün görselleri mevcut mu?",f_prod_upload:"Ürün Görselleri (max 5)",yes:"Evet",no:"Hayır",a_status:"Durum",s_new:"Yeni",s_review:"İncelemede",s_feasible:"Uygun",s_not:"Uygun Değil",s_quoted:"Teklif Verildi",s_approved:"Onaylandı",a_update:"Güncelle",a_add:"Kayıt Ekle",a_delete:"Sil",a_export_json:"JSON Dışa Aktar",a_export_csv:"CSV Dışa Aktar",a_stats:"Analitik",a_list:"Gelen Talepler",a_detail:"Detay",a_files:"Dosyalar",a_close:"Kapat",a_none:"Kayıt bulunamadı",select:"Seçiniz",refresh:"Yenile",download:"İndir",info:"Bilgi",confirm_delete:"Silmek istediğinizden emin misiniz?",th_date:"Tarih",th_customer:"Müşteri",th_project:"Proje",th_material:"Malzeme",th_process:"Süreç",th_qty:"Adet",th_thickness:"Kalınlık (mm)",th_due:"Termin",th_days_to_due:"Termine Kalan (Gün)",th_est_price:"Tahmini Fiyat",th_est_lead:"Tahmini Üretim Süresi (Gün)",th_actions:"İşlemler",f_qty_tiers:"Adet Kademeleri",f_tolerance_std:"Tolerans Standardı",f_tolerance_crit:"Kritik Toleranslar",f_surface_ra:"Yüzey Pürüzlülüğü (Ra)",f_bend_count:"Büküm Sayısı",f_weld_method:"Kaynak Yöntemi",ph_name:"Örn. Ahmet Yılmaz",ph_company:"Şirket adı",ph_email:"ornek@firma.com",ph_phone_local:"5xx xxx xx xx",ph_city:"Şehir",ph_proj:"Proje/Parça adı",ph_grade:"Örn. S235 / 304 / 5754",ph_thickness:"Örn. 3.0 (mm)",ph_qty:"Adet",ph_qty_t1:"Örn. 10",ph_qty_t2:"Örn. 50",ph_qty_t3:"Örn. 100",ph_tolcrit:"Örn. H7 delikler, +/-0.05mm yüzey",ph_finish_ral:"RAL Kodu (örn. RAL 9005)",ph_desc:"Teknik detaylar, özel istekler, termin vb.",ph_bend_count:"Örn. 2",ph_budget_amount:"Tutar",ph_address_optional:"Opsiyonel",repeat_one:"Tek Seferlik",repeat_recurrent:"Süreklilik",next:"Devam",back:"Geri",resume:"Kaldığın yerden devam et",fill_required:"Lütfen gerekli alanları doldurun.",confirm_optional_title:"Gönderimi Onayla",confirm_optional_text:"Tüm zorunlu alanları doldurdunuz. Ek detayları doldurmak istemediğinizden emin misiniz?",btn_continue:"Devam Et",btn_submit:"Gönder",invalid_email:"Geçerli bir e‑posta girin.",invalid_phone:"Geçerli bir telefon girin (sadece rakam).",phone_tr_len:"Türkiye numarası 10 haneli olmalıdır.",only_numbers:"Sadece sayı girin.",must_be_positive:"Pozitif bir değer girin.",integer_required:"Tam sayı girin.",invalid_ral:'RAL formatı "RAL 9005" şeklinde olmalı.',invalid_date:"Geçerli bir tarih seçin.",a_charts:"Analitik Gösterge",a_metric:"Metri̇k",a_dimension:"Boyut",a_chart_type:"Grafik Türü",metric_count:"Kayıt Sayısı",dim_status:"Durum",dim_process:"Süreç",dim_material:"Malzeme",dim_day:"Gün",chart_bar:"Bar",chart_line:"Çizgi",empty_data:"Veri yok",tt_refresh:"Listeyi yenileyin",tt_export_csv:"Kayıtları CSV olarak dışa aktarın",tt_detail:"Kaydı inceleyin",tt_change_status:"Teklif durumunu güncelleyin",tt_download_txt:"TXT özetini indirin",tt_delete:"Bu kaydı kalıcı olarak silin",tt_close:"Pencereyi kapatın",tt_status_review:"Durumu “İncelemede” olarak ayarlayın",tt_status_feasible:"Durumu “Uygun” olarak ayarlayın",tt_status_not:"Durumu “Uygun Değil” olarak ayarlayın",tt_status_quoted:"Durumu “Teklif Verildi” olarak ayarlayın",edit:"Düzenle",save:"Kaydet",cancel:"İptal",add_tech_file:"Teknik Resim / Dosya Ekle",add_prod_image:"Ürün Görseli Ekle",remember_me:"Beni hatırla",login_btn:"Giriş Yap",logout_btn:"Çıkış Yap",settings_title:"Ayarlar",settings_pricing_tab:"Fiyatlandırma",settings_form_tab:"Form Yapısı",settings_users_tab:"Kullanıcılar",settings_form_subtitle:"Müşteri teklif formunda gösterilecek alanları ve seçenekleri yönetin.",settings_form_loading:"Form yapılandırması yükleniyor...",settings_form_config:"Form Yapılandırması",formula_validate_params:"Kullanılabilir parametreler:",pricing_param_type:"Parametre Türü",pricing_fixed_param:"Sabit Değer",pricing_form_param:"Form Alanı",pricing_param_name:"Parametre Adı",pricing_fixed_value:"Sabit Değer",pricing_form_field:"Form Alanı",pricing_param_name_auto:"Parametre Adı (otomatik)",pricing_select:"Seçiniz...",pricing_no_form_fields:"Henüz form alanı bulunmuyor. Önce Form Düzenleme menüsünden form alanları oluşturun.",users_title:"Kullanıcı Yönetimi",users_new_user:"Yeni Kullanıcı",users_add_user:"Kullanıcı Ekle",users_cancel:"İptal",users_email:"Email",users_password:"Şifre",users_role:"Rol",users_role_admin:"Admin",users_role_user:"Kullanıcı",users_actions:"İşlemler",users_delete:"Sil",users_edit:"Düzenle",users_save:"Kaydet",users_confirm_delete:"kullanıcısını silmek istediğinizden emin misiniz?",users_no_users:"Henüz kullanıcı eklenmemiş.",users_email_placeholder:"kullanici@domain.com",users_password_placeholder:"En az 6 karakter",users_email_required:"Email ve şifre gerekli",users_password_min:"Şifre en az 6 karakter olmalı",users_added:"Kullanıcı eklendi",users_deleted:"Kullanıcı silindi",users_updated:"Kullanıcı güncellendi",users_load_error:"Kullanıcılar yüklenemedi",users_add_error:"Kullanıcı eklenemedi",users_delete_error:"Kullanıcı silinemedi",users_update_error:"Kullanıcı güncellenemedi",users_edit_user:"Kullanıcı Düzenle",users_new_password:"Yeni Şifre (Boş bırakılırsa değişmez)",users_status:"Durum",users_active:"Aktif",users_inactive:"Pasif",users_deactivated:"Kullanıcı devre dışı bırakıldı",users_activated:"Kullanıcı aktifleştirildi",users_deactivate:"Devre Dışı",users_activate:"Aktifleştir",users_confirm_action:"kullanıcısını",users_confirm_suffix:"istediğinizden emin misiniz?",admin_access_title:"Admin Erişim Kontrolü",admin_access_desc:"Kullanıcı yönetimi bölümüne erişmek için admin kimlik bilgilerinizi girin:",admin_access_required:"Email ve şifre gerekli",admin_access_invalid:"Geçersiz kullanıcı bilgileri",admin_access_denied:"Bu panele erişim yetkiniz yok. Sadece admin kullanıcıları bu bölüme erişebilir.",admin_access_granted:"Admin erişimi onaylandı",admin_access_error:"Erişim doğrulama hatası",admin_access_verify:"Doğrula",admin_access_email_placeholder:"admin@example.com",admin_access_password_placeholder:"Admin şifreniz",users_toggle_error:"Kullanıcı durumu değiştirilemedi",close:"Kapat"},en:{nav_quote:"Request Quote",nav_admin:"Admin",title_quote:"Custom Manufacturing Quote Form",sub_quote:"Share details for your metal fabrication needs. Upload up to 2 files (PDF, PNG, JPG/JPEG, DXF, DWG, STEP/IGES).",title_admin:"Quote Management & Analytics",sub_admin:"Review submissions, update statuses, gain insights, and export.",submit:"Submit Quote",saved:"Quote received. Thank you!",required:"Required",files_limit:"You can upload up to 2 files.",file_too_big:"File too large. Limit: 1.5MB",file_type_bad:"Unsupported file type",f_name:"Full Name",f_company:"Company (optional)",f_email:"Email",f_phone:"Phone",f_country:"Country",f_city:"City",f_proj:"Project / Part Name",f_process:"Processes (select)",f_material:"Material",f_grade:"Grade / Alloy",f_thickness:"Thickness (mm)",f_qty:"Quantity",f_dims:"Dimensions (L×W×H mm)",f_tolerance:"Tolerance (e.g., ±0.2mm)",f_finish:"Surface Finish",f_due:"Target Delivery Date",f_repeat:"One-off / Recurrent",f_budget:"Budget (optional)",f_address:"Delivery Address (optional)",f_desc:"Technical Description / Notes",f_drawing:"Has technical drawing?",f_upload:"Upload Files (max 2)",f_prodimg:"Has product images?",f_prod_upload:"Product Images (max 5)",yes:"Yes",no:"No",a_status:"Status",s_new:"New",s_review:"In Review",s_feasible:"Feasible",s_not:"Not Feasible",s_quoted:"Quoted",s_approved:"Approved",a_update:"Update",a_add:"Add Record",a_delete:"Delete",a_export_json:"Export JSON",a_export_csv:"Export CSV",a_stats:"Analytics",a_list:"Submissions",a_detail:"Detail",a_files:"Files",a_close:"Close",a_none:"No records found",select:"Select",refresh:"Refresh",download:"Download",info:"Info",confirm_delete:"Are you sure you want to delete?",th_date:"Date",th_customer:"Customer",th_project:"Project",th_material:"Material",th_process:"Process",th_qty:"Qty",th_thickness:"Thickness (mm)",th_due:"Due",th_days_to_due:"Days to Due",th_est_price:"Est. Price",th_est_lead:"Est. Lead Time (Days)",th_actions:"Actions",f_qty_tiers:"Quantity Tiers",f_tolerance_std:"Tolerance Standard",f_tolerance_crit:"Critical Tolerances",f_surface_ra:"Surface Roughness (Ra)",f_bend_count:"Bend Count",f_weld_method:"Weld Method",ph_name:"e.g., John Smith",ph_company:"Company name",ph_email:"example@company.com",ph_phone_local:"e.g., 555 123 45 67",ph_city:"City",ph_proj:"Project/Part name",ph_grade:"e.g., S235 / 304 / 5754",ph_thickness:"e.g., 3.0 (mm)",ph_qty:"Quantity",ph_qty_t1:"e.g., 10",ph_qty_t2:"e.g., 50",ph_qty_t3:"e.g., 100",ph_tolcrit:"e.g., H7 holes, +/-0.05mm surface",ph_finish_ral:"RAL Code (e.g., RAL 9005)",ph_desc:"Technical details, special requests, delivery, etc.",ph_bend_count:"e.g., 2",ph_budget_amount:"Amount",ph_address_optional:"Optional",repeat_one:"One-off",repeat_recurrent:"Recurrent",next:"Next",back:"Back",resume:"Resume from where you left",fill_required:"Please fill the required fields.",confirm_optional_title:"Confirm Submission",confirm_optional_text:"You filled all required fields. Are you sure you want to skip optional details?",btn_continue:"Continue Filling",btn_submit:"Submit",invalid_email:"Enter a valid email.",invalid_phone:"Enter a valid phone (digits only).",phone_tr_len:"Turkish phone must be 10 digits.",only_numbers:"Numbers only.",must_be_positive:"Enter a positive value.",integer_required:"Enter an integer.",invalid_ral:'RAL format should be like "RAL 9005".',invalid_date:"Select a valid date.",a_charts:"Analytics Chart",a_metric:"Metric",a_dimension:"Dimension",a_chart_type:"Chart Type",metric_count:"Record Count",dim_status:"Status",dim_process:"Process",dim_material:"Material",dim_day:"Day",chart_bar:"Bar",chart_line:"Line",empty_data:"No data",tt_refresh:"Refresh the list",tt_export_csv:"Export records as CSV",tt_detail:"Inspect the record",tt_change_status:"Update the quote status",tt_download_txt:"Download TXT summary",tt_delete:"Permanently delete this record",tt_close:"Close the dialog",tt_status_review:"Set status to “In Review”",tt_status_feasible:"Set status to “Feasible”",tt_status_not:"Set status to “Not Feasible”",tt_status_quoted:"Set status to “Quoted”",edit:"Edit",save:"Save",cancel:"Cancel",add_tech_file:"Add Technical File(s)",add_prod_image:"Add Product Image(s)",remember_me:"Remember me",login_btn:"Login",logout_btn:"Logout",settings_title:"Settings",settings_pricing_tab:"Pricing",settings_form_tab:"Form Structure",settings_users_tab:"Users",settings_form_subtitle:"Manage fields and options displayed in the customer quote form.",settings_form_loading:"Loading form configuration...",settings_form_config:"Form Configuration",formula_validate_params:"Available parameters:",pricing_param_type:"Parameter Type",pricing_fixed_param:"Fixed Value",pricing_form_param:"Form Field",pricing_param_name:"Parameter Name",pricing_fixed_value:"Fixed Value",pricing_form_field:"Form Field",pricing_param_name_auto:"Parameter Name (automatic)",pricing_select:"Select...",pricing_no_form_fields:"No form fields available yet. First create form fields from the Form Editing menu.",users_title:"User Management",users_new_user:"New User",users_add_user:"Add User",users_cancel:"Cancel",users_email:"Email",users_password:"Password",users_role:"Role",users_role_admin:"Admin",users_role_user:"User",users_actions:"Actions",users_delete:"Delete",users_edit:"Edit",users_save:"Save",users_confirm_delete:"Are you sure you want to delete user?",users_no_users:"No users added yet.",users_email_placeholder:"user@domain.com",users_password_placeholder:"At least 6 characters",users_email_required:"Email and password required",users_password_min:"Password must be at least 6 characters",users_added:"User added",users_deleted:"User deleted",users_updated:"User updated",users_load_error:"Failed to load users",users_add_error:"Failed to add user",users_delete_error:"Failed to delete user",users_update_error:"Failed to update user",users_edit_user:"Edit User",users_new_password:"New Password (Leave empty if unchanged)",users_status:"Status",users_active:"Active",users_inactive:"Inactive",users_deactivated:"User deactivated",users_activated:"User activated",users_deactivate:"Deactivate",users_activate:"Activate",users_confirm_action:"user",users_confirm_suffix:"Are you sure?",admin_access_title:"Admin Access Control",admin_access_desc:"Enter your admin credentials to access user management:",admin_access_required:"Email and password required",admin_access_invalid:"Invalid credentials",admin_access_denied:"Access denied. Only admin users can access this section.",admin_access_granted:"Admin access granted",admin_access_error:"Access verification error",admin_access_verify:"Verify",admin_access_email_placeholder:"admin@example.com",admin_access_password_placeholder:"Your admin password",users_toggle_error:"Failed to change user status",close:"Close"}};function KE(r){return Gu[r]||Gu.tr}function C_(r,e){return r==="new"?e.s_new:r==="review"?e.s_review:r==="feasible"?e.s_feasible:r==="not"?e.s_not:r==="quoted"?e.s_quoted:r==="approved"?e.s_approved||"Approved":r}const $E=localStorage.getItem("bk_lang")||"tr";function XE(){const[r,e]=GE($E);return QE(()=>{localStorage.setItem("bk_lang",r);try{document.documentElement.setAttribute("lang",r)}catch{}},[r]),{t:YE(()=>Gu[r]||Gu.tr,[r]),lang:r,setLang:e}}const D_="bk_quotes_v1";function no(){try{const r=localStorage.getItem(D_),e=r?JSON.parse(r):[];return Array.isArray(e)?e:[]}catch{return[]}}function rd(r){localStorage.setItem(D_,JSON.stringify(r))}function ZE(r){const e=no();e.unshift(r),rd(e)}function ly(r,e){const i=no().map(s=>s.id===r?{...s,...e}:s);rd(i)}function JE(r){const e=no().filter(i=>i.id!==r);rd(e)}async function $t(r,e={},i=4e3){try{const s=typeof localStorage<"u"&&(localStorage.getItem("bk_lang")||localStorage.getItem("lang"))||"tr",o={...e.headers||{},"Accept-Language":s},f={...e,headers:o};return await Promise.race([fetch(r,f),new Promise((d,p)=>setTimeout(()=>p(new Error("timeout")),i))])}catch{return await Promise.race([fetch(r,e),new Promise((o,f)=>setTimeout(()=>f(new Error("timeout")),i))])}}function WE(){return"/api"}const Gt=WE();function tT(){try{const r=localStorage.getItem("bk_admin_token");return!r&&window.location.hostname==="localhost"?"dev-admin-token":r||""}catch{return""}}function oy(r){try{r?localStorage.setItem("bk_admin_token",r):localStorage.removeItem("bk_admin_token")}catch{}}function pe(r={}){const e=tT();return e?{...r,Authorization:`Bearer ${e}`}:r}const nn={async listQuotes(){try{const r=`?_t=${Date.now()}`;console.log("🔧 DEBUG: API.listQuotes fetching from:",`${Gt}/api/quotes${r}`);const e=await $t(`${Gt}/api/quotes${r}`,{headers:pe()});if(e.status===401)throw new Error("unauthorized");if(!e.ok)throw new Error("list failed");const i=await e.json();return console.log("🔧 DEBUG: API.listQuotes received:",i.length,"quotes"),i}catch(r){if(console.error("🔧 DEBUG: API.listQuotes error:",r),r&&r.message&&/401|unauthorized/i.test(r.message))throw r;return no()}},async applyNewPrice(r){const e=await $t(`${Gt}/api/quotes/${r}/apply-price`,{method:"POST",headers:pe({"Content-Type":"application/json"})});if(!e.ok)throw new Error("apply price failed");return await e.json()},async applyPricesBulk(r=[]){const e=await $t(`${Gt}/api/quotes/apply-price-bulk`,{method:"POST",headers:pe({"Content-Type":"application/json"}),body:JSON.stringify({ids:r})});if(!e.ok)throw new Error("bulk apply failed");return await e.json()},async applyPricesAll(){const r=await $t(`${Gt}/api/quotes/apply-price-all`,{method:"POST",headers:pe({"Content-Type":"application/json"})});if(!r.ok)throw new Error("apply all failed");return await r.json()},async addUser(r,e,i="admin"){const s=await $t(`${Gt}/api/auth/users`,{method:"POST",headers:pe({"Content-Type":"application/json"}),body:JSON.stringify({email:r,password:e,role:i})});if(!s.ok)throw new Error("add_user_failed");return await s.json()},async listUsers(){const r=await $t(`${Gt}/api/auth/users`,{headers:pe()});if(!r.ok)throw new Error("list_users_failed");return await r.json()},async deleteUser(r){const e=await $t(`${Gt}/api/auth/users/${encodeURIComponent(r)}`,{method:"DELETE",headers:pe()});if(!e.ok)throw new Error("delete_user_failed");return await e.json()},async updateUser(r,e){const i=await $t(`${Gt}/api/auth/users/${encodeURIComponent(r)}`,{method:"PUT",headers:pe({"Content-Type":"application/json"}),body:JSON.stringify(e)});if(!i.ok)throw new Error("update_user_failed");return await i.json()},async createQuote(r){try{const e=await $t(`${Gt}/api/quotes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok)throw new Error("create failed");return await e.json()}catch{return ZE(r),{ok:!0,id:r.id,local:!0}}},async updateStatus(r,e){try{const i=await $t(`${Gt}/api/quotes/${r}`,{method:"PATCH",headers:pe({"Content-Type":"application/json"}),body:JSON.stringify({status:e})});if(!i.ok)throw new Error("update failed");return await i.json()}catch{return ly(r,{status:e}),{ok:!0,local:!0}}},async addQuote(r){try{const e=await $t(`${Gt}/api/quotes`,{method:"POST",headers:pe({"Content-Type":"application/json"}),body:JSON.stringify(r)});if(!e.ok)throw new Error("add failed");return await e.json()}catch{const i=JSON.parse(localStorage.getItem("quotes")||"{}");return i[r.id]=r,localStorage.setItem("quotes",JSON.stringify(i)),{ok:!0,local:!0}}},async updateQuote(r,e){try{const i=await $t(`${Gt}/api/quotes/${r}`,{method:"PATCH",headers:pe({"Content-Type":"application/json"}),body:JSON.stringify(e)});if(!i.ok)throw new Error("update failed");return await i.json()}catch{return ly(r,e),{ok:!0,local:!0}}},async updateQuoteStatus(r,e){try{const i=await $t(`${Gt}/api/quotes/${r}/status`,{method:"PATCH",headers:pe({"Content-Type":"application/json"}),body:JSON.stringify({status:e})});if(!i.ok)throw new Error("status update failed");return await i.json()}catch(i){throw console.error("Status update error:",i),i}},async remove(r){try{const e=await $t(`${Gt}/api/quotes/${r}`,{method:"DELETE",headers:pe()});if(!e.ok)throw new Error("delete failed");return await e.json()}catch{return JE(r),{ok:!0,local:!0}}},downloadTxt(r,e,i){const s=`${Gt}/api/quotes/${r}/txt`;$t(s,{headers:pe()},2500).then(async o=>{if(o&&o.ok){const f=await o.text(),d=new Blob([f],{type:"text/plain;charset=utf-8"}),p=document.createElement("a"),g=URL.createObjectURL(d);p.href=g,p.download=`burkol_quote_${r}.txt`,document.body.appendChild(p),p.click(),p.remove(),URL.revokeObjectURL(g),i&&i("TXT dosyası başarıyla indirildi!","success")}else throw o&&o.status===401?new Error("unauthorized"):new Error("backend txt not ok")}).catch(()=>{const o=e||no().find(T=>T.id===r);if(!o)return;const f=[];f.push("Burkol Metal — Teklif Özeti"),f.push(`Tarih: ${new Date(o.createdAt||Date.now()).toLocaleString()}`),f.push(`ID: ${o.id}`),f.push(""),f.push("[Genel]");try{const T=localStorage.getItem("bk_lang")||"tr",A=KE(T);f.push(`Durum: ${C_(o.status,A)}`)}catch{f.push(`Durum: ${o.status||""}`)}f.push(`Proje: ${o.proj||""}`),f.push(`Süreç: ${(o.process||[]).join(", ")}`),f.push(`Açıklama: ${o.desc||""}`),f.push(""),f.push("[Müşteri]"),f.push(`Ad Soyad: ${o.name||""}`),f.push(`Firma: ${o.company||""}`),f.push(`E‑posta: ${o.email||""}`),f.push(`Telefon: ${o.phone||""}`),f.push(`Ülke/Şehir: ${o.country||""} / ${o.city||""}`),f.push(""),f.push("[Teknik]"),f.push(`Malzeme: ${o.material||""}`),f.push(`Kalite/Alaşım: ${o.grade||""}`),f.push(`Kalınlık: ${o.thickness||""} mm`),f.push(`Adet: ${o.qty||""}`),f.push(`Boyut: ${o.dims||""}`),f.push(`Tolerans: ${o.tolerance||""}`),f.push(`Yüzey: ${o.finish||""}`),f.push(`Termin: ${o.due||""}`),f.push(`Tekrarlılık: ${o.repeat||""}`),f.push(`Bütçe: ${o.budget||""}`);const d=o.files||[];f.push("[Dosyalar]"),d.length===0?f.push("—"):d.forEach((T,A)=>{f.push(`${A+1}. ${T.name} (${Math.round((T.size||0)/1024)} KB)`)}),f.push("");const p=new Blob([f.join(`
`)],{type:"text/plain;charset=utf-8"}),g=document.createElement("a"),v=URL.createObjectURL(p);g.href=v,g.download=`burkol_quote_${r}.txt`,document.body.appendChild(g),g.click(),g.remove(),URL.revokeObjectURL(v),i&&i("TXT dosyası başarıyla indirildi!","success")})},async login(r,e,i){try{const s=await $t(`${Gt}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:e,remember:i})}),o=await s.json();if(!s.ok)throw new Error(o.error||(s.status===401?"unauthorized":"server_error"));return o&&o.token&&oy(o.token),o}catch(s){throw s&&s.message?s:new Error("network_error")}},async me(){const r=await $t(`${Gt}/api/auth/me`,{headers:pe()});if(!r.ok)throw new Error("unauthorized");return await r.json()},async logout(){try{await $t(`${Gt}/api/auth/logout`,{method:"POST",headers:pe()})}catch{}oy("")},async migrateIds(){try{const r=await $t(`${Gt}/api/migrate/ids`,{method:"POST",headers:pe()});if(!r.ok)throw new Error("migration failed");return await r.json()}catch(r){throw r}},async getSettings(){try{const r=await $t(`${Gt}/api/settings`,{headers:pe()});if(!r.ok)throw new Error("get settings failed");return await r.json()}catch(r){throw r}},async saveSettings(r){try{const e=await $t(`${Gt}/api/settings`,{method:"POST",headers:pe({"Content-Type":"application/json"}),body:JSON.stringify(r)});if(!e.ok)throw new Error("save settings failed");return await e.json()}catch(e){throw e}},async getFormConfig(){try{const r=await $t(`${Gt}/api/form-config`);if(!r.ok)throw new Error("get form config failed");return await r.json()}catch(r){throw r}},async getFormFields(){try{const r=await $t(`${Gt}/api/form-fields`);if(!r.ok)throw new Error("get form fields failed");return await r.json()}catch(r){throw r}},async saveFormConfig(r){try{const e=await $t(`${Gt}/api/form-config`,{method:"POST",headers:pe({"Content-Type":"application/json"}),body:JSON.stringify(r)});if(!e.ok)throw new Error("save form config failed");return await e.json()}catch(e){throw e}},async previewFormConfig(r){try{const e=await $t(`${Gt}/api/form-config/preview`,{method:"POST",headers:pe({"Content-Type":"application/json"}),body:JSON.stringify(r)});if(!e.ok)throw new Error("preview form config failed");return await e.json()}catch(e){throw e}},async getMigrationStatus(){try{const r=await $t(`${Gt}/api/migration/status`,{headers:pe()});if(!r.ok)throw new Error("get migration status failed");return await r.json()}catch(r){throw r}},async updateQuotePrice(r){try{const e=await $t(`${Gt}/api/migration/quotes/${r}/price`,{method:"POST",headers:pe()});if(!e.ok)throw new Error("update quote price failed");return await e.json()}catch(e){throw e}},async saveQuoteVersion(r,e="Admin modification"){try{const i=await $t(`${Gt}/api/quotes/${r}/save-version`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({reason:e})});if(!i.ok)throw new Error("save version failed");return await i.json()}catch(i){throw i}},async getQuoteVersions(r){try{const e=await $t(`${Gt}/api/quotes/${r}/versions`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw new Error("get versions failed");return await e.json()}catch(e){throw e}},async restoreQuoteVersion(r,e){try{const i=await $t(`${Gt}/api/quotes/${r}/restore-version`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({versionIndex:e})});if(!i.ok)throw new Error("restore version failed");return await i.json()}catch(i){throw i}},async getPriceSettings(){try{const r=await $t(`${Gt}/api/price-settings`,{headers:pe()});if(!r.ok)throw new Error("get price settings failed");return await r.json()}catch{return{currency:"USD",margin:20,discountThreshold:1e3,discountPercent:5}}},async savePriceSettings(r){try{const e=await $t(`${Gt}/api/price-settings`,{method:"POST",headers:pe({"Content-Type":"application/json"}),body:JSON.stringify(r)});if(!e.ok)throw new Error("save price settings failed");return await e.json()}catch(e){throw e}}};function uy(){const r=new Date,e=r.getFullYear(),i=String(r.getMonth()+1).padStart(2,"0"),s=`bk_id_counter_${e}${i}`;let o=1;try{const d=localStorage.getItem(s);d&&(o=parseInt(d,10)+1)}catch{}try{localStorage.setItem(s,o.toString())}catch{}const f=String(o).padStart(5,"0");return`BK${e}${i}${f}`}const _h=["pdf","png","jpg","jpeg","dxf","dwg","step","stp","iges","igs"],cy=1.5;function fy(r){const e=r.lastIndexOf(".");return e>=0?r.slice(e+1).toLowerCase():""}function eT(r){return new Promise((e,i)=>{const s=new FileReader;s.onload=()=>e(s.result),s.onerror=i,s.readAsDataURL(r)})}function nT(r){const e=(r||"").toLowerCase();return e.startsWith("image/")||["png","jpg","jpeg"].includes(e)}function x_(r,e="TL"){return`₺${(typeof r=="number"?r:parseFloat(r)||0).toFixed(2)}`}const hy=["Backspace","Delete","Tab","Enter","Escape","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End","PageUp","PageDown"],Iu=[{id:"name",label:"Müşteri Adı",type:"text",required:!0},{id:"company",label:"Şirket",type:"text",required:!1},{id:"proj",label:"Proje Adı",type:"text",required:!0},{id:"phone",label:"Telefon",type:"phone",required:!0},{id:"email",label:"E-posta",type:"email",required:!0}];function iT({onSubmit:r,initialData:e=null,showNotification:i,t:s}){const[o,f]=vn.useState(!0),[d,p]=vn.useState(!1),[g,v]=vn.useState(null),[T,A]=vn.useState(()=>({...e||{},customFields:e&&e.customFields||{}})),[M,F]=vn.useState({}),[at,ot]=vn.useState(!1),[it,St]=vn.useState({}),[Nt,Tt]=vn.useState(!1),[Xt,gt]=vn.useState(null),[kt,I]=vn.useState([]);vn.useEffect(()=>{console.log("🔧 DynamicFormRenderer: Component mounted")},[]),vn.useEffect(()=>{console.log("🔥 FormData state updated:",T),window.formDataState=T},[T]),vn.useEffect(()=>{S()},[]),vn.useEffect(()=>{e&&A({...e,customFields:e.customFields||{}})},[e]);async function S(){console.log("🔧 DynamicFormRenderer: Loading form config...");try{f(!0);const k=await nn.getFormConfig();console.log("🔧 DynamicFormRenderer: Form config loaded successfully"),v(k.formConfig)}catch(k){console.error("🔧 DynamicFormRenderer: Load form config error:",k),i("Form konfigürasyonu yüklenemedi","error")}finally{f(!1),console.log("🔧 DynamicFormRenderer: Loading completed")}}async function C(k,Y,W=!1){ot(!0);try{const q=[];for(const ut of Array.from(Y)){const yt=fy(ut.name);if(!_h.includes(yt)){i(`Desteklenmeyen dosya türü: ${yt}`,"error");continue}if(ut.size>cy*1024*1024){i(`Dosya çok büyük: ${ut.name} (max ${cy}MB)`,"error");continue}const Bt=await eT(ut);q.push({name:ut.name,size:ut.size,type:ut.type,dataUrl:Bt})}q.length>0&&(z(k,q,W),i(`${q.length} dosya yüklendi`,"success"))}catch(q){console.error("File upload error:",q),i("Dosya yükleme hatası","error")}finally{ot(!1)}}function O(k,Y){const W=k.type,q=k.validation||{},ut=[];if(!Y||Y.toString().trim()==="")return k.required?{isValid:!1,error:"Bu alan zorunludur"}:{isValid:!0,error:null};switch(W){case"number":if(!/^-?\d*\.?\d*$/.test(Y))return{isValid:!1,error:"Sadece sayısal değer girebilirsiniz"};const yt=parseFloat(Y);if(isNaN(yt))return{isValid:!1,error:"Geçerli bir sayı giriniz"};q.min!==void 0&&yt<q.min&&ut.push(`Minimum değer: ${q.min}`),q.max!==void 0&&yt>q.max&&ut.push(`Maximum değer: ${q.max}`),q.integer&&!Number.isInteger(yt)&&ut.push("Tam sayı giriniz (ondalık kullanmayın)"),q.positive&&yt<=0&&ut.push("Pozitif bir sayı giriniz");break;case"email":if(!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(Y))return{isValid:!1,error:"Geçerli bir e-posta adresi giriniz (örn: ornek@email.com)"};if(q.allowedDomains&&q.allowedDomains.length>0){const ce=Y.split("@")[1];q.allowedDomains.includes(ce)||ut.push(`Sadece şu domainler kabul edilir: ${q.allowedDomains.join(", ")}`)}break;case"phone":const En=Y.replace(/[\s\-\(\)]/g,"");if(![/^(\+90|90)?[5][0-9]{9}$/,/^(\+90|90|0)?[2-4][0-9]{9}$/].some(ce=>ce.test(En)))return{isValid:!1,error:"Geçerli bir telefon numarası giriniz (örn: +90 555 123 45 67 veya 0212 123 45 67)"};break;case"text":q.minLength&&Y.length<q.minLength&&ut.push(`En az ${q.minLength} karakter giriniz`),q.maxLength&&Y.length>q.maxLength&&ut.push(`En fazla ${q.maxLength} karakter girebilirsiniz`),q.onlyLetters&&!/^[a-zA-ZğüşıöçĞÜŞİÖÇ\s]+$/.test(Y)&&ut.push("Sadece harf girebilirsiniz"),q.noNumbers&&/\d/.test(Y)&&ut.push("Sayı karakteri kullanamaz"),q.alphanumeric&&!/^[a-zA-Z0-9ğüşıöçĞÜŞİÖÇ\s]+$/.test(Y)&&ut.push("Sadece harf ve sayı kullanabilirsiniz"),q.pattern&&(new RegExp(q.pattern).test(Y)||ut.push(q.patternMessage||"Geçersiz format"));break;case"textarea":q.minLength&&Y.length<q.minLength&&ut.push(`En az ${q.minLength} karakter giriniz`),q.maxLength&&Y.length>q.maxLength&&ut.push(`En fazla ${q.maxLength} karakter girebilirsiniz`),q.minWords&&Y.trim().split(/\s+/).length<q.minWords&&ut.push(`En az ${q.minWords} kelime giriniz`),q.maxWords&&Y.trim().split(/\s+/).length>q.maxWords&&ut.push(`En fazla ${q.maxWords} kelime girebilirsiniz`);break;case"date":const ue=new Date(Y);if(isNaN(ue.getTime()))return{isValid:!1,error:"Geçerli bir tarih giriniz"};q.futureOnly&&ue<=new Date&&ut.push("Gelecekteki bir tarih seçiniz"),q.pastOnly&&ue>=new Date&&ut.push("Geçmişteki bir tarih seçiniz"),q.minDate&&ue<new Date(q.minDate)&&ut.push(`En erken ${q.minDate} tarihi seçebilirsiniz`),q.maxDate&&ue>new Date(q.maxDate)&&ut.push(`En geç ${q.maxDate} tarihi seçebilirsiniz`);break;case"dropdown":case"radio":if(k.options&&!k.options.includes(Y))return{isValid:!1,error:"Geçerli bir seçenek seçiniz"};break;case"multiselect":case"checkbox":q.minSelections&&Array.isArray(Y)&&Y.length<q.minSelections&&ut.push(`En az ${q.minSelections} seçenek seçiniz`),q.maxSelections&&Array.isArray(Y)&&Y.length>q.maxSelections&&ut.push(`En fazla ${q.maxSelections} seçenek seçebilirsiniz`);break;case"file":Y&&typeof Y=="object"&&Y.size&&(q.maxSize&&Y.size>q.maxSize&&ut.push(`Dosya boyutu en fazla ${(q.maxSize/(1024*1024)).toFixed(1)} MB olabilir`),q.allowedTypes&&!q.allowedTypes.includes(Y.type)&&ut.push(`Sadece şu dosya türleri kabul edilir: ${q.allowedTypes.join(", ")}`));break}return{isValid:ut.length===0,error:ut.length>0?ut[0]:null}}function N(k,Y){return k}function z(k,Y,W=!1,q=null){console.log("🚀 handleFieldChange called:",{fieldId:k,value:Y,isCustomField:W,fieldType:q?.type});const ut=W?T.customFields?.[k]:T[k];ut!==Y&&console.log("🔥 Field value changed:",{fieldId:k,oldValue:ut,newValue:Y});let yt=Y;if(q&&(yt=N(Y)),A(W?Bt=>({...Bt,customFields:{...Bt.customFields,[k]:yt}}):Bt=>({...Bt,[k]:yt})),q){const Bt=O(q,yt);F(En=>{const Oe={...En};return Bt.isValid?delete Oe[k]:Oe[k]=Bt.error,Oe})}}function R(){const k={},Y=g?.fields||g?.formStructure?.fields||[];return[...Iu,...Y].forEach(q=>{const yt=!Iu.some(En=>En.id===q.id)?T.customFields?.[q.id]:T[q.id],Bt=O(q,yt);Bt.isValid||(k[q.id]=Bt.error)}),F(k),Object.keys(k).length===0}async function Jt(k){if(k.preventDefault(),!R()){i("Lütfen form hatalarını düzeltin","error");return}try{p(!0);const W={id:uy(),createdAt:new Date().toISOString(),status:"new",name:T.name,company:T.company,proj:T.proj,phone:T.phone,email:T.email,customFields:T.customFields||{},formVersion:g?.version,formConfigSnapshot:g};await r(W),i("Teklif başarıyla gönderildi!","success"),A({customFields:{}}),F({})}catch(W){console.error("Submit error:",W),i("Form gönderilemedi. Lütfen tekrar deneyin.","error")}finally{p(!1)}}if(o)return D.createElement("div",{className:"loading-state"},D.createElement("div",{style:{textAlign:"center",padding:"40px"}},D.createElement("p",null,"Form yükleniyor..."),D.createElement("p",{style:{fontSize:"12px",color:"#666"}},"Form konfigürasyonu API'den alınıyor...")));if(!o&&!g)return D.createElement("div",{className:"error-state"},D.createElement("div",{style:{textAlign:"center",padding:"40px"}},D.createElement("p",{style:{color:"red"}},"Form konfigürasyonu yüklenemedi"),D.createElement("p",{style:{fontSize:"12px",color:"#666"}},"Lütfen sayfayı yenileyin veya admin ile iletişime geçin.")));function Wt(k,Y=!1){const W=k.id,q=Y?T.customFields?.[W]:T[W],ut=M[W],yt=it[W],Bt=q?O(k,q):null,En=!!(q&&Bt&&Bt.isValid),Oe={id:W,name:W,"data-field-id":W,className:ut?"error":yt?"warning":q?"valid":"",tabIndex:0,autoComplete:"off",onChange:It=>{console.log("📝 Input onChange event:",{fieldId:W,value:It.target.value});const tt=It.target.value;z(W,tt,Y,k),it[W]&&O(k,tt).isValid&&St(ct=>{const wt={...ct};return delete wt[W],wt}),M[W]&&O(k,tt).isValid&&F(ct=>{const wt={...ct};return delete wt[W],wt})},onKeyDown:It=>{const tt=It.ctrlKey||It.metaKey;if(It.key==="Enter"||It.key==="Tab"){const xt=O(k,It.currentTarget.value);F(ct=>{const wt={...ct};return xt.isValid?delete wt[W]:wt[W]=xt.error,wt}),St(ct=>{const wt={...ct};return delete wt[W],wt});return}if(!tt&&!hy.includes(It.key)&&It.key.length===1){const xt=It.key;if(k.type==="phone"&&(/[0-9\s()\-]/.test(xt)||xt==="+"&&It.currentTarget.selectionStart===0&&!It.currentTarget.value.includes("+")||(It.preventDefault(),St(wt=>({...wt,[W]:"Telefon alanı yalnızca sayı ve (+) gibi sembolleri kabul eder"})))),k.type==="text"){const ct=k.validation?.onlyLetters,wt=k.validation?.noNumbers;ct?/[a-zA-ZğüşıöçĞÜŞİÖÇ\s]/.test(xt)||(It.preventDefault(),St(Tn=>({...Tn,[W]:"Sadece harf girebilirsiniz"}))):wt&&/\d/.test(xt)&&(It.preventDefault(),St(Tn=>({...Tn,[W]:"Sayı karakteri kullanamaz"})))}}},onBlur:It=>{const tt=O(k,It.target.value);tt.isValid?F(xt=>{const ct={...xt};return delete ct[W],ct}):F(xt=>({...xt,[W]:tt.error})),St(xt=>{const ct={...xt};return delete ct[W],ct})}};function Me(It){const tt=It.placeholder||It.label||"",xt=It.validation||{};if(It.type==="number"){const ct=[];return xt.min!==void 0&&ct.push(`min: ${xt.min}`),xt.max!==void 0&&ct.push(`max: ${xt.max}`),xt.integer&&ct.push("int"),ct.length?`${tt} (${ct.join(", ")})`:tt}if(It.type==="text"||It.type==="textarea"){const ct=[];return xt.minLength&&ct.push(`min ${xt.minLength}`),xt.maxLength&&ct.push(`max ${xt.maxLength}`),ct.length?`${tt} (${ct.join(", ")})`:tt}return tt}let ue;switch(k.type){case"text":case"email":case"phone":ue=D.createElement("input",{...Oe,type:k.type==="phone"?"tel":k.type,value:q||"",placeholder:Me(k),maxLength:k.validation?.maxLength,minLength:k.validation?.minLength,autoFocus:k.autoFocus||!1});break;case"textarea":ue=D.createElement("textarea",{...Oe,value:q||"",placeholder:Me(k),rows:3,maxLength:k.validation?.maxLength});break;case"number":ue=D.createElement("input",{...Oe,type:"text",inputMode:k.validation?.integer?"numeric":"decimal",value:q||"",placeholder:Me(k),"data-min":k.validation?.min,"data-max":k.validation?.max,"data-integer":k.validation?.integer||!1,onKeyDown:tt=>{if(!(tt.ctrlKey||tt.metaKey)&&!hy.includes(tt.key)&&tt.key.length===1){const ct=/[0-9]/.test(tt.key),wt=tt.key===".",te=tt.key==="-",Tn=!k.validation?.integer,ai=!k.validation?.positive&&tt.currentTarget.selectionStart===0&&!tt.currentTarget.value.includes("-");if(!ct&&!(wt&&Tn)&&!(te&&ai)){tt.preventDefault(),St(Ba=>({...Ba,[W]:"Sadece sayısal karakter girebilirsiniz"}));return}}if(tt.key==="Enter"||tt.key==="Tab"){const ct=O(k,tt.currentTarget.value);F(wt=>{const te={...wt};return ct.isValid?delete te[W]:te[W]=ct.error,te}),St(wt=>{const te={...wt};return delete te[W],te})}},onPaste:tt=>{setTimeout(()=>{const xt=(tt.clipboardData||window.clipboardData).getData("text"),ct=N(xt);ct!==xt&&z(W,ct,Y,k)},0)},title:(()=>{const tt=[];return k.validation?.min!==void 0&&tt.push(`Min: ${k.validation.min}`),k.validation?.max!==void 0&&tt.push(`Max: ${k.validation.max}`),k.validation?.integer&&tt.push("Tam sayı"),k.validation?.positive&&tt.push("Pozitif sayı"),tt.length>0?tt.join(", "):""})()});break;case"date":ue=D.createElement("input",{...Oe,type:"date",value:q||""});break;case"dropdown":ue=D.createElement("select",{...Oe,value:q||""},D.createElement("option",{value:""},k.placeholder||`${k.label} seçin`),k.options?.map(tt=>D.createElement("option",{key:tt,value:tt},tt)));break;case"radio":ue=D.createElement("div",{className:"radio-group"},k.options?.map(tt=>D.createElement("label",{key:tt,className:"radio-option"},D.createElement("input",{type:"radio",name:W,value:tt,checked:q===tt,onChange:xt=>z(W,xt.target.value,Y)}),D.createElement("span",null,tt))));break;case"multiselect":case"checkbox":k.type==="checkbox"&&k.options?.length===1?ue=D.createElement("label",{className:"checkbox-single"},D.createElement("input",{type:"checkbox",checked:!!q,onChange:tt=>z(W,tt.target.checked,Y)}),D.createElement("span",null,k.options[0])):ue=D.createElement("div",{className:"checkbox-group"},k.options?.map(tt=>D.createElement("label",{key:tt,className:"checkbox-option"},D.createElement("input",{type:"checkbox",value:tt,checked:Array.isArray(q)?q.includes(tt):!1,onChange:xt=>{const ct=Array.isArray(q)?q:[],wt=xt.target.checked?[...ct,tt]:ct.filter(te=>te!==tt);z(W,wt,Y)}}),D.createElement("span",null,tt))));break;case"file":const It=Y?T.customFields?.[W]:T[W];ue=D.createElement("div",{className:"file-upload-container"},D.createElement("div",{className:"file-upload-area",onDragOver:tt=>{tt.preventDefault(),tt.currentTarget.classList.add("dragover")},onDragLeave:tt=>{tt.currentTarget.classList.remove("dragover")},onDrop:tt=>{tt.preventDefault(),tt.currentTarget.classList.remove("dragover"),C(W,tt.dataTransfer.files,Y)},onClick:()=>document.getElementById(`file-input-${W}`).click()},D.createElement("input",{id:`file-input-${W}`,type:"file",multiple:!0,accept:_h.map(tt=>`.${tt}`).join(","),style:{display:"none"},onChange:tt=>C(W,tt.target.files,Y)}),D.createElement("div",{className:"upload-text"},at?"Yükleniyor...":"Dosya seçin veya sürükleyip bırakın",D.createElement("div",{className:"upload-help"},`Desteklenen formatlar: ${_h.join(", ")}`))),It&&It.length>0&&D.createElement("div",{className:"file-preview"},It.map((tt,xt)=>D.createElement("div",{key:xt,className:"file-item"},D.createElement("div",{className:"file-icon"},nT(tt.type)?D.createElement("img",{src:tt.dataUrl,alt:tt.name,style:{width:"40px",height:"40px",objectFit:"cover"}}):D.createElement("span",null,fy(tt.name).toUpperCase())),D.createElement("div",{className:"file-info"},D.createElement("div",{className:"file-name"},tt.name),D.createElement("div",{className:"file-size"},`${(tt.size/1024).toFixed(1)} KB`)),D.createElement("button",{type:"button",className:"btn-remove",onClick:()=>{const ct=It.filter((wt,te)=>te!==xt);z(W,ct,Y)}},"×")))));break;default:ue=D.createElement("input",{...Oe,type:"text",value:q||"",placeholder:k.placeholder||k.label})}return D.createElement("div",{key:W,className:`field ${ut?"error":""}`},D.createElement("label",{htmlFor:W,className:"field-label"},k.label,k.required&&D.createElement("span",{className:"required"}," *"),ut||yt?D.createElement("span",{className:`field-status ${ut?"error":"warning"}`},ut||yt):En?D.createElement("span",{className:"field-status success",title:"Geçerli"},"✓"):null),D.createElement("div",{className:"input-container",style:{position:"relative"}},ue,null,null),null)}if(o)return D.createElement("div",{className:"loading"},"Form yükleniyor...");if(!g)return D.createElement("div",{className:"error"},"Form konfigürasyonu bulunamadı");const Q=Iu.map((k,Y)=>({...k,display:{formOrder:Y+1},autoFocus:Y===0})),mt=(g?.fields||g?.formStructure?.fields||[]).map((k,Y)=>({...k,display:{...k.display,formOrder:k.display?.formOrder??10+Y}})),Lt=[...Q].sort((k,Y)=>(k.display?.formOrder||0)-(Y.display?.formOrder||0)),x=[...mt].sort((k,Y)=>(k.display?.formOrder||0)-(Y.display?.formOrder||0));function J(){const k=[...Lt,...x],Y=[];return k.forEach(W=>{const ut=!Iu.some(Bt=>Bt.id===W.id)?T.customFields?.[W.id]:T[W.id],yt=Array.isArray(ut)?ut.length===0:ut==null||String(ut).trim()==="";!W.required&&yt&&Y.push({id:W.id,label:W.label})}),Y}async function lt(k){await r(k),i("Teklif başarıyla gönderildi!","success"),A({customFields:{}}),F({})}return Jt=async function(k){if(k.preventDefault(),!R()){i("Lütfen form hatalarını düzeltin","error");return}try{p(!0);const W={id:uy(),createdAt:new Date().toISOString(),status:"new",name:T.name,company:T.company,proj:T.proj,phone:T.phone,email:T.email,customFields:T.customFields||{},formVersion:g?.version,formConfigSnapshot:g,lang:localStorage.getItem("bk_lang")||"tr"},q=J();if(q.length>0){I(q),gt(W),Tt(!0),p(!1);return}await lt(W)}catch(W){console.error("Submit error:",W),i("Form gönderilemedi. Lütfen tekrar deneyin.","error")}finally{p(!1)}},D.createElement("div",{className:"container"},D.createElement("form",{onSubmit:Jt,className:"dynamic-form two-col"},D.createElement("div",{className:"form-section fixed-fields"},D.createElement("div",{className:"section-card"},(()=>{const k=localStorage.getItem("bk_lang")||"tr",Y=k==="en"?"Customer Information":"Müşteri Bilgileri",W=k==="en"?"Fields marked * are required":"* işaretli alanlar zorunludur";return D.createElement(D.Fragment,null,D.createElement("div",{className:"section-title"},Y),D.createElement("div",{className:"required-note"},W))})(),D.createElement("div",{className:"form-grid"},Lt.map(k=>Wt(k,!1))))),D.createElement("div",{className:"form-section custom-fields"},D.createElement("div",{className:"section-card"},(()=>{const Y=(localStorage.getItem("bk_lang")||"tr")==="en"?"Additional Fields":"Form Alanları";return D.createElement("div",{className:"section-title"},Y)})(),D.createElement("div",{className:"form-grid"},x.map(k=>Wt(k,!0))))),D.createElement("div",{className:"form-actions"},D.createElement("button",{type:"submit",className:"btn accent",disabled:d},d?"Gönderiliyor...":"Teklif Gönder")),Nt&&D.createElement("div",{className:"modal-overlay","data-backdrop":"true",onClick:()=>Tt(!1)},D.createElement("div",{className:"modal",onClick:k=>k.stopPropagation()},D.createElement("div",{className:"modal-header"},(()=>{const Y=(localStorage.getItem("bk_lang")||"tr")==="en"?"There are fields left empty":"Boş bırakılan alanlar var";return D.createElement("h3",null,Y)})()),D.createElement("div",{className:"modal-body"},(()=>{const Y=(localStorage.getItem("bk_lang")||"tr")==="en"?"Would you like to review the empty fields before submitting?":"Boş bırakılan alanları tekrar gözden geçirmek ister misiniz?";return D.createElement("p",null,Y)})(),D.createElement("div",{style:{maxHeight:200,overflow:"auto",marginTop:8}},D.createElement("ul",null,kt.map(k=>D.createElement("li",{key:k.id},k.label))))),D.createElement("div",{className:"modal-footer"},D.createElement("button",{type:"button",className:"btn secondary",onClick:()=>Tt(!1)},(localStorage.getItem("bk_lang")||"tr")==="en"?"Review fields":"Alanları gözden geçir"),D.createElement("button",{type:"button",className:"btn primary",onClick:async()=>{const k=Xt;Tt(!1),gt(null),await lt(k)}},(localStorage.getItem("bk_lang")||"tr")==="en"?"Continue and submit":"Devam et ve gönder"))))))}const aT=()=>{};var dy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_=function(r){const e=[];let i=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[i++]=o:o<2048?(e[i++]=o>>6|192,e[i++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[i++]=o>>18|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128,e[i++]=o&63|128):(e[i++]=o>>12|224,e[i++]=o>>6&63|128,e[i++]=o&63|128)}return e},rT=function(r){const e=[];let i=0,s=0;for(;i<r.length;){const o=r[i++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const f=r[i++];e[s++]=String.fromCharCode((o&31)<<6|f&63)}else if(o>239&&o<365){const f=r[i++],d=r[i++],p=r[i++],g=((o&7)<<18|(f&63)<<12|(d&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const f=r[i++],d=r[i++];e[s++]=String.fromCharCode((o&15)<<12|(f&63)<<6|d&63)}}return e.join("")},V_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const f=r[o],d=o+1<r.length,p=d?r[o+1]:0,g=o+2<r.length,v=g?r[o+2]:0,T=f>>2,A=(f&3)<<4|p>>4;let M=(p&15)<<2|v>>6,F=v&63;g||(F=64,d||(M=64)),s.push(i[T],i[A],i[M],i[F])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(N_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):rT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const f=i[r.charAt(o++)],p=o<r.length?i[r.charAt(o)]:0;++o;const v=o<r.length?i[r.charAt(o)]:64;++o;const A=o<r.length?i[r.charAt(o)]:64;if(++o,f==null||p==null||v==null||A==null)throw new sT;const M=f<<2|p>>4;if(s.push(M),v!==64){const F=p<<4&240|v>>2;if(s.push(F),A!==64){const at=v<<6&192|A;s.push(at)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class sT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lT=function(r){const e=N_(r);return V_.encodeByteArray(e,!0)},Qu=function(r){return lT(r).replace(/\./g,"")},oT=function(r){try{return V_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=()=>uT().__FIREBASE_DEFAULTS__,fT=()=>{if(typeof process>"u"||typeof dy>"u")return;const r=dy.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},hT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&oT(r[1]);return e&&JSON.parse(e)},sd=()=>{try{return aT()||cT()||fT()||hT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},dT=r=>sd()?.emulatorHosts?.[r],mT=r=>{const e=dT(r);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),s]:[e.substring(0,i),s]},I_=()=>sd()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,s)=>{i?this.reject(i):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gT(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,f=r.sub||r.user_id;if(!f)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:f,user_id:f,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Qu(JSON.stringify(i)),Qu(JSON.stringify(d)),""].join(".")}const Zl={};function _T(){const r={prod:[],emulator:[]};for(const e of Object.keys(Zl))Zl[e]?r.emulator.push(e):r.prod.push(e);return r}function vT(r){let e=document.getElementById(r),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),i=!0),{created:i,element:e}}let my=!1;function ET(r,e){if(typeof window>"u"||typeof document>"u"||!ld(window.location.host)||Zl[r]===e||Zl[r]||my)return;Zl[r]=e;function i(M){return`__firebase__banner__${M}`}const s="__firebase__banner",f=_T().prod.length>0;function d(){const M=document.getElementById(s);M&&M.remove()}function p(M){M.style.display="flex",M.style.background="#7faaf0",M.style.position="fixed",M.style.bottom="5px",M.style.left="5px",M.style.padding=".5em",M.style.borderRadius="5px",M.style.alignItems="center"}function g(M,F){M.setAttribute("width","24"),M.setAttribute("id",F),M.setAttribute("height","24"),M.setAttribute("viewBox","0 0 24 24"),M.setAttribute("fill","none"),M.style.marginLeft="-6px"}function v(){const M=document.createElement("span");return M.style.cursor="pointer",M.style.marginLeft="16px",M.style.fontSize="24px",M.innerHTML=" &times;",M.onclick=()=>{my=!0,d()},M}function T(M,F){M.setAttribute("id",F),M.innerText="Learn more",M.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",M.setAttribute("target","__blank"),M.style.paddingLeft="5px",M.style.textDecoration="underline"}function A(){const M=vT(s),F=i("text"),at=document.getElementById(F)||document.createElement("span"),ot=i("learnmore"),it=document.getElementById(ot)||document.createElement("a"),St=i("preprendIcon"),Nt=document.getElementById(St)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(M.created){const Tt=M.element;p(Tt),T(it,ot);const Xt=v();g(Nt,St),Tt.append(Nt,at,it,Xt),document.body.appendChild(Tt)}f?(at.innerText="Preview backend disconnected.",Nt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Nt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,at.innerText="Preview backend running in this workspace."),at.setAttribute("id",F)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bT(){const r=sd()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AT(){return!bT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ST(){try{return typeof indexedDB=="object"}catch{return!1}}function wT(){return new Promise((r,e)=>{try{let i=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="FirebaseError";class zs extends Error{constructor(e,i,s){super(i),this.code=e,this.customData=s,this.name=RT,Object.setPrototypeOf(this,zs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,O_.prototype.create)}}class O_{constructor(e,i,s){this.service=e,this.serviceName=i,this.errors=s}create(e,...i){const s=i[0]||{},o=`${this.service}/${e}`,f=this.errors[e],d=f?CT(f,s):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new zs(o,p,s)}}function CT(r,e){return r.replace(DT,(i,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const DT=/\{\$([^}]+)}/g;function Yu(r,e){if(r===e)return!0;const i=Object.keys(r),s=Object.keys(e);for(const o of i){if(!s.includes(o))return!1;const f=r[o],d=e[o];if(py(f)&&py(d)){if(!Yu(f,d))return!1}else if(f!==d)return!1}for(const o of s)if(!i.includes(o))return!1;return!0}function py(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(r){return r&&r._delegate?r._delegate:r}class ao{constructor(e,i,s){this.name=e,this.instanceFactory=i,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const s=new pT;if(this.instancesDeferred.set(i,s),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){const i=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VT(e))try{this.getOrInitializeService({instanceIdentifier:br})}catch{}for(const[i,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const f=this.getOrInitializeService({instanceIdentifier:o});s.resolve(f)}catch{}}}}clearInstance(e=br){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=br){return this.instances.has(e)}getOptions(e=br){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:i});for(const[f,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(f);s===p&&d.resolve(o)}return o}onInit(e,i){const s=this.normalizeInstanceIdentifier(i),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const f=this.instances.get(s);return f&&e(f,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,i){const s=this.onInitCallbacks.get(i);if(s)for(const o of s)try{o(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:NT(e),options:i}),this.instances.set(e,s),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=br){return this.component?this.component.multipleInstances?e:br:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NT(r){return r===br?void 0:r}function VT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new xT(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ft||(Ft={}));const OT={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},MT=Ft.INFO,kT={[Ft.DEBUG]:"log",[Ft.VERBOSE]:"log",[Ft.INFO]:"info",[Ft.WARN]:"warn",[Ft.ERROR]:"error"},zT=(r,e,...i)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=kT[e];if(o)console[o](`[${s}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class M_{constructor(e){this.name=e,this._logLevel=MT,this._logHandler=zT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ft.DEBUG,...e),this._logHandler(this,Ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ft.VERBOSE,...e),this._logHandler(this,Ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ft.INFO,...e),this._logHandler(this,Ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ft.WARN,...e),this._logHandler(this,Ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ft.ERROR,...e),this._logHandler(this,Ft.ERROR,...e)}}const UT=(r,e)=>e.some(i=>r instanceof i);let gy,yy;function LT(){return gy||(gy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PT(){return yy||(yy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const k_=new WeakMap,Vh=new WeakMap,z_=new WeakMap,vh=new WeakMap,od=new WeakMap;function BT(r){const e=new Promise((i,s)=>{const o=()=>{r.removeEventListener("success",f),r.removeEventListener("error",d)},f=()=>{i(Na(r.result)),o()},d=()=>{s(r.error),o()};r.addEventListener("success",f),r.addEventListener("error",d)});return e.then(i=>{i instanceof IDBCursor&&k_.set(i,r)}).catch(()=>{}),od.set(e,r),e}function qT(r){if(Vh.has(r))return;const e=new Promise((i,s)=>{const o=()=>{r.removeEventListener("complete",f),r.removeEventListener("error",d),r.removeEventListener("abort",d)},f=()=>{i(),o()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",f),r.addEventListener("error",d),r.addEventListener("abort",d)});Vh.set(r,e)}let Ih={get(r,e,i){if(r instanceof IDBTransaction){if(e==="done")return Vh.get(r);if(e==="objectStoreNames")return r.objectStoreNames||z_.get(r);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Na(r[e])},set(r,e,i){return r[e]=i,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function jT(r){Ih=r(Ih)}function FT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const s=r.call(Eh(this),e,...i);return z_.set(s,e.sort?e.sort():[e]),Na(s)}:PT().includes(r)?function(...e){return r.apply(Eh(this),e),Na(k_.get(this))}:function(...e){return Na(r.apply(Eh(this),e))}}function HT(r){return typeof r=="function"?FT(r):(r instanceof IDBTransaction&&qT(r),UT(r,LT())?new Proxy(r,Ih):r)}function Na(r){if(r instanceof IDBRequest)return BT(r);if(vh.has(r))return vh.get(r);const e=HT(r);return e!==r&&(vh.set(r,e),od.set(e,r)),e}const Eh=r=>od.get(r);function GT(r,e,{blocked:i,upgrade:s,blocking:o,terminated:f}={}){const d=indexedDB.open(r,e),p=Na(d);return s&&d.addEventListener("upgradeneeded",g=>{s(Na(d.result),g.oldVersion,g.newVersion,Na(d.transaction),g)}),i&&d.addEventListener("blocked",g=>i(g.oldVersion,g.newVersion,g)),p.then(g=>{f&&g.addEventListener("close",()=>f()),o&&g.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const QT=["get","getKey","getAll","getAllKeys","count"],YT=["put","add","delete","clear"],Th=new Map;function _y(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Th.get(e))return Th.get(e);const i=e.replace(/FromIndex$/,""),s=e!==i,o=YT.includes(i);if(!(i in(s?IDBIndex:IDBObjectStore).prototype)||!(o||QT.includes(i)))return;const f=async function(d,...p){const g=this.transaction(d,o?"readwrite":"readonly");let v=g.store;return s&&(v=v.index(p.shift())),(await Promise.all([v[i](...p),o&&g.done]))[0]};return Th.set(e,f),f}jT(r=>({...r,get:(e,i,s)=>_y(e,i)||r.get(e,i,s),has:(e,i)=>!!_y(e,i)||r.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if($T(i)){const s=i.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(i=>i).join(" ")}}function $T(r){return r.getComponent()?.type==="VERSION"}const Oh="@firebase/app",vy="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi=new M_("@firebase/app"),XT="@firebase/app-compat",ZT="@firebase/analytics-compat",JT="@firebase/analytics",WT="@firebase/app-check-compat",t1="@firebase/app-check",e1="@firebase/auth",n1="@firebase/auth-compat",i1="@firebase/database",a1="@firebase/data-connect",r1="@firebase/database-compat",s1="@firebase/functions",l1="@firebase/functions-compat",o1="@firebase/installations",u1="@firebase/installations-compat",c1="@firebase/messaging",f1="@firebase/messaging-compat",h1="@firebase/performance",d1="@firebase/performance-compat",m1="@firebase/remote-config",p1="@firebase/remote-config-compat",g1="@firebase/storage",y1="@firebase/storage-compat",_1="@firebase/firestore",v1="@firebase/ai",E1="@firebase/firestore-compat",T1="firebase",b1="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh="[DEFAULT]",A1={[Oh]:"fire-core",[XT]:"fire-core-compat",[JT]:"fire-analytics",[ZT]:"fire-analytics-compat",[t1]:"fire-app-check",[WT]:"fire-app-check-compat",[e1]:"fire-auth",[n1]:"fire-auth-compat",[i1]:"fire-rtdb",[a1]:"fire-data-connect",[r1]:"fire-rtdb-compat",[s1]:"fire-fn",[l1]:"fire-fn-compat",[o1]:"fire-iid",[u1]:"fire-iid-compat",[c1]:"fire-fcm",[f1]:"fire-fcm-compat",[h1]:"fire-perf",[d1]:"fire-perf-compat",[m1]:"fire-rc",[p1]:"fire-rc-compat",[g1]:"fire-gcs",[y1]:"fire-gcs-compat",[_1]:"fire-fst",[E1]:"fire-fst-compat",[v1]:"fire-vertex","fire-js":"fire-js",[T1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku=new Map,S1=new Map,kh=new Map;function Ey(r,e){try{r.container.addComponent(e)}catch(i){Gi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,i)}}function $u(r){const e=r.name;if(kh.has(e))return Gi.debug(`There were multiple attempts to register component ${e}.`),!1;kh.set(e,r);for(const i of Ku.values())Ey(i,r);for(const i of S1.values())Ey(i,r);return!0}function w1(r,e){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(e)}function R1(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Va=new O_("app","Firebase",C1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,i,s){this._isDeleted=!1,this._options={...e},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ao("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Va.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=b1;function U_(r,e={}){let i=r;typeof e!="object"&&(e={name:e});const s={name:Mh,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Va.create("bad-app-name",{appName:String(o)});if(i||(i=I_()),!i)throw Va.create("no-options");const f=Ku.get(o);if(f){if(Yu(i,f.options)&&Yu(s,f.config))return f;throw Va.create("duplicate-app",{appName:o})}const d=new IT(o);for(const g of kh.values())d.addComponent(g);const p=new D1(i,s,d);return Ku.set(o,p),p}function N1(r=Mh){const e=Ku.get(r);if(!e&&r===Mh&&I_())return U_();if(!e)throw Va.create("no-app",{appName:r});return e}function As(r,e,i){let s=A1[r]??r;i&&(s+=`-${i}`);const o=s.match(/\s|\//),f=e.match(/\s|\//);if(o||f){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&f&&d.push("and"),f&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gi.warn(d.join(" "));return}$u(new ao(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="firebase-heartbeat-database",I1=1,ro="firebase-heartbeat-store";let bh=null;function L_(){return bh||(bh=GT(V1,I1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ro)}catch(i){console.warn(i)}}}}).catch(r=>{throw Va.create("idb-open",{originalErrorMessage:r.message})})),bh}async function O1(r){try{const i=(await L_()).transaction(ro),s=await i.objectStore(ro).get(P_(r));return await i.done,s}catch(e){if(e instanceof zs)Gi.warn(e.message);else{const i=Va.create("idb-get",{originalErrorMessage:e?.message});Gi.warn(i.message)}}}async function Ty(r,e){try{const s=(await L_()).transaction(ro,"readwrite");await s.objectStore(ro).put(e,P_(r)),await s.done}catch(i){if(i instanceof zs)Gi.warn(i.message);else{const s=Va.create("idb-set",{originalErrorMessage:i?.message});Gi.warn(s.message)}}}function P_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1=1024,k1=30;class z1{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new L1(i),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=by();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>k1){const o=P1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Gi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=by(),{heartbeatsToSend:i,unsentEntries:s}=U1(this._heartbeatsCache.heartbeats),o=Qu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Gi.warn(e),""}}}function by(){return new Date().toISOString().substring(0,10)}function U1(r,e=M1){const i=[];let s=r.slice();for(const o of r){const f=i.find(d=>d.agent===o.agent);if(f){if(f.dates.push(o.date),Ay(i)>e){f.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),Ay(i)>e){i.pop();break}s=s.slice(1)}return{heartbeatsToSend:i,unsentEntries:s}}class L1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ST()?wT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await O1(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Ty(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Ty(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ay(r){return Qu(JSON.stringify({version:2,heartbeats:r})).length}function P1(r){if(r.length===0)return-1;let e=0,i=r[0].date;for(let s=1;s<r.length;s++)r[s].date<i&&(i=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(r){$u(new ao("platform-logger",e=>new KT(e),"PRIVATE")),$u(new ao("heartbeat",e=>new z1(e),"PRIVATE")),As(Oh,vy,r),As(Oh,vy,"esm2020"),As("fire-js","")}B1("");var q1="firebase",j1="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */As(q1,j1,"app");var Sy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ia,B_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,S){function C(){}C.prototype=S.prototype,I.F=S.prototype,I.prototype=new C,I.prototype.constructor=I,I.D=function(O,N,z){for(var R=Array(arguments.length-2),Jt=2;Jt<arguments.length;Jt++)R[Jt-2]=arguments[Jt];return S.prototype[N].apply(O,R)}}function i(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,i),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,S,C){C||(C=0);const O=Array(16);if(typeof S=="string")for(var N=0;N<16;++N)O[N]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(N=0;N<16;++N)O[N]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=I.g[0],C=I.g[1],N=I.g[2];let z=I.g[3],R;R=S+(z^C&(N^z))+O[0]+3614090360&4294967295,S=C+(R<<7&4294967295|R>>>25),R=z+(N^S&(C^N))+O[1]+3905402710&4294967295,z=S+(R<<12&4294967295|R>>>20),R=N+(C^z&(S^C))+O[2]+606105819&4294967295,N=z+(R<<17&4294967295|R>>>15),R=C+(S^N&(z^S))+O[3]+3250441966&4294967295,C=N+(R<<22&4294967295|R>>>10),R=S+(z^C&(N^z))+O[4]+4118548399&4294967295,S=C+(R<<7&4294967295|R>>>25),R=z+(N^S&(C^N))+O[5]+1200080426&4294967295,z=S+(R<<12&4294967295|R>>>20),R=N+(C^z&(S^C))+O[6]+2821735955&4294967295,N=z+(R<<17&4294967295|R>>>15),R=C+(S^N&(z^S))+O[7]+4249261313&4294967295,C=N+(R<<22&4294967295|R>>>10),R=S+(z^C&(N^z))+O[8]+1770035416&4294967295,S=C+(R<<7&4294967295|R>>>25),R=z+(N^S&(C^N))+O[9]+2336552879&4294967295,z=S+(R<<12&4294967295|R>>>20),R=N+(C^z&(S^C))+O[10]+4294925233&4294967295,N=z+(R<<17&4294967295|R>>>15),R=C+(S^N&(z^S))+O[11]+2304563134&4294967295,C=N+(R<<22&4294967295|R>>>10),R=S+(z^C&(N^z))+O[12]+1804603682&4294967295,S=C+(R<<7&4294967295|R>>>25),R=z+(N^S&(C^N))+O[13]+4254626195&4294967295,z=S+(R<<12&4294967295|R>>>20),R=N+(C^z&(S^C))+O[14]+2792965006&4294967295,N=z+(R<<17&4294967295|R>>>15),R=C+(S^N&(z^S))+O[15]+1236535329&4294967295,C=N+(R<<22&4294967295|R>>>10),R=S+(N^z&(C^N))+O[1]+4129170786&4294967295,S=C+(R<<5&4294967295|R>>>27),R=z+(C^N&(S^C))+O[6]+3225465664&4294967295,z=S+(R<<9&4294967295|R>>>23),R=N+(S^C&(z^S))+O[11]+643717713&4294967295,N=z+(R<<14&4294967295|R>>>18),R=C+(z^S&(N^z))+O[0]+3921069994&4294967295,C=N+(R<<20&4294967295|R>>>12),R=S+(N^z&(C^N))+O[5]+3593408605&4294967295,S=C+(R<<5&4294967295|R>>>27),R=z+(C^N&(S^C))+O[10]+38016083&4294967295,z=S+(R<<9&4294967295|R>>>23),R=N+(S^C&(z^S))+O[15]+3634488961&4294967295,N=z+(R<<14&4294967295|R>>>18),R=C+(z^S&(N^z))+O[4]+3889429448&4294967295,C=N+(R<<20&4294967295|R>>>12),R=S+(N^z&(C^N))+O[9]+568446438&4294967295,S=C+(R<<5&4294967295|R>>>27),R=z+(C^N&(S^C))+O[14]+3275163606&4294967295,z=S+(R<<9&4294967295|R>>>23),R=N+(S^C&(z^S))+O[3]+4107603335&4294967295,N=z+(R<<14&4294967295|R>>>18),R=C+(z^S&(N^z))+O[8]+1163531501&4294967295,C=N+(R<<20&4294967295|R>>>12),R=S+(N^z&(C^N))+O[13]+2850285829&4294967295,S=C+(R<<5&4294967295|R>>>27),R=z+(C^N&(S^C))+O[2]+4243563512&4294967295,z=S+(R<<9&4294967295|R>>>23),R=N+(S^C&(z^S))+O[7]+1735328473&4294967295,N=z+(R<<14&4294967295|R>>>18),R=C+(z^S&(N^z))+O[12]+2368359562&4294967295,C=N+(R<<20&4294967295|R>>>12),R=S+(C^N^z)+O[5]+4294588738&4294967295,S=C+(R<<4&4294967295|R>>>28),R=z+(S^C^N)+O[8]+2272392833&4294967295,z=S+(R<<11&4294967295|R>>>21),R=N+(z^S^C)+O[11]+1839030562&4294967295,N=z+(R<<16&4294967295|R>>>16),R=C+(N^z^S)+O[14]+4259657740&4294967295,C=N+(R<<23&4294967295|R>>>9),R=S+(C^N^z)+O[1]+2763975236&4294967295,S=C+(R<<4&4294967295|R>>>28),R=z+(S^C^N)+O[4]+1272893353&4294967295,z=S+(R<<11&4294967295|R>>>21),R=N+(z^S^C)+O[7]+4139469664&4294967295,N=z+(R<<16&4294967295|R>>>16),R=C+(N^z^S)+O[10]+3200236656&4294967295,C=N+(R<<23&4294967295|R>>>9),R=S+(C^N^z)+O[13]+681279174&4294967295,S=C+(R<<4&4294967295|R>>>28),R=z+(S^C^N)+O[0]+3936430074&4294967295,z=S+(R<<11&4294967295|R>>>21),R=N+(z^S^C)+O[3]+3572445317&4294967295,N=z+(R<<16&4294967295|R>>>16),R=C+(N^z^S)+O[6]+76029189&4294967295,C=N+(R<<23&4294967295|R>>>9),R=S+(C^N^z)+O[9]+3654602809&4294967295,S=C+(R<<4&4294967295|R>>>28),R=z+(S^C^N)+O[12]+3873151461&4294967295,z=S+(R<<11&4294967295|R>>>21),R=N+(z^S^C)+O[15]+530742520&4294967295,N=z+(R<<16&4294967295|R>>>16),R=C+(N^z^S)+O[2]+3299628645&4294967295,C=N+(R<<23&4294967295|R>>>9),R=S+(N^(C|~z))+O[0]+4096336452&4294967295,S=C+(R<<6&4294967295|R>>>26),R=z+(C^(S|~N))+O[7]+1126891415&4294967295,z=S+(R<<10&4294967295|R>>>22),R=N+(S^(z|~C))+O[14]+2878612391&4294967295,N=z+(R<<15&4294967295|R>>>17),R=C+(z^(N|~S))+O[5]+4237533241&4294967295,C=N+(R<<21&4294967295|R>>>11),R=S+(N^(C|~z))+O[12]+1700485571&4294967295,S=C+(R<<6&4294967295|R>>>26),R=z+(C^(S|~N))+O[3]+2399980690&4294967295,z=S+(R<<10&4294967295|R>>>22),R=N+(S^(z|~C))+O[10]+4293915773&4294967295,N=z+(R<<15&4294967295|R>>>17),R=C+(z^(N|~S))+O[1]+2240044497&4294967295,C=N+(R<<21&4294967295|R>>>11),R=S+(N^(C|~z))+O[8]+1873313359&4294967295,S=C+(R<<6&4294967295|R>>>26),R=z+(C^(S|~N))+O[15]+4264355552&4294967295,z=S+(R<<10&4294967295|R>>>22),R=N+(S^(z|~C))+O[6]+2734768916&4294967295,N=z+(R<<15&4294967295|R>>>17),R=C+(z^(N|~S))+O[13]+1309151649&4294967295,C=N+(R<<21&4294967295|R>>>11),R=S+(N^(C|~z))+O[4]+4149444226&4294967295,S=C+(R<<6&4294967295|R>>>26),R=z+(C^(S|~N))+O[11]+3174756917&4294967295,z=S+(R<<10&4294967295|R>>>22),R=N+(S^(z|~C))+O[2]+718787259&4294967295,N=z+(R<<15&4294967295|R>>>17),R=C+(z^(N|~S))+O[9]+3951481745&4294967295,I.g[0]=I.g[0]+S&4294967295,I.g[1]=I.g[1]+(N+(R<<21&4294967295|R>>>11))&4294967295,I.g[2]=I.g[2]+N&4294967295,I.g[3]=I.g[3]+z&4294967295}s.prototype.v=function(I,S){S===void 0&&(S=I.length);const C=S-this.blockSize,O=this.C;let N=this.h,z=0;for(;z<S;){if(N==0)for(;z<=C;)o(this,I,z),z+=this.blockSize;if(typeof I=="string"){for(;z<S;)if(O[N++]=I.charCodeAt(z++),N==this.blockSize){o(this,O),N=0;break}}else for(;z<S;)if(O[N++]=I[z++],N==this.blockSize){o(this,O),N=0;break}}this.h=N,this.o+=S},s.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var S=1;S<I.length-8;++S)I[S]=0;S=this.o*8;for(var C=I.length-8;C<I.length;++C)I[C]=S&255,S/=256;for(this.v(I),I=Array(16),S=0,C=0;C<4;++C)for(let O=0;O<32;O+=8)I[S++]=this.g[C]>>>O&255;return I};function f(I,S){var C=p;return Object.prototype.hasOwnProperty.call(C,I)?C[I]:C[I]=S(I)}function d(I,S){this.h=S;const C=[];let O=!0;for(let N=I.length-1;N>=0;N--){const z=I[N]|0;O&&z==S||(C[N]=z,O=!1)}this.g=C}var p={};function g(I){return-128<=I&&I<128?f(I,function(S){return new d([S|0],S<0?-1:0)}):new d([I|0],I<0?-1:0)}function v(I){if(isNaN(I)||!isFinite(I))return A;if(I<0)return it(v(-I));const S=[];let C=1;for(let O=0;I>=C;O++)S[O]=I/C|0,C*=4294967296;return new d(S,0)}function T(I,S){if(I.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(I.charAt(0)=="-")return it(T(I.substring(1),S));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=v(Math.pow(S,8));let O=A;for(let z=0;z<I.length;z+=8){var N=Math.min(8,I.length-z);const R=parseInt(I.substring(z,z+N),S);N<8?(N=v(Math.pow(S,N)),O=O.j(N).add(v(R))):(O=O.j(C),O=O.add(v(R)))}return O}var A=g(0),M=g(1),F=g(16777216);r=d.prototype,r.m=function(){if(ot(this))return-it(this).m();let I=0,S=1;for(let C=0;C<this.g.length;C++){const O=this.i(C);I+=(O>=0?O:4294967296+O)*S,S*=4294967296}return I},r.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(at(this))return"0";if(ot(this))return"-"+it(this).toString(I);const S=v(Math.pow(I,6));var C=this;let O="";for(;;){const N=Xt(C,S).g;C=St(C,N.j(S));let z=((C.g.length>0?C.g[0]:C.h)>>>0).toString(I);if(C=N,at(C))return z+O;for(;z.length<6;)z="0"+z;O=z+O}},r.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function at(I){if(I.h!=0)return!1;for(let S=0;S<I.g.length;S++)if(I.g[S]!=0)return!1;return!0}function ot(I){return I.h==-1}r.l=function(I){return I=St(this,I),ot(I)?-1:at(I)?0:1};function it(I){const S=I.g.length,C=[];for(let O=0;O<S;O++)C[O]=~I.g[O];return new d(C,~I.h).add(M)}r.abs=function(){return ot(this)?it(this):this},r.add=function(I){const S=Math.max(this.g.length,I.g.length),C=[];let O=0;for(let N=0;N<=S;N++){let z=O+(this.i(N)&65535)+(I.i(N)&65535),R=(z>>>16)+(this.i(N)>>>16)+(I.i(N)>>>16);O=R>>>16,z&=65535,R&=65535,C[N]=R<<16|z}return new d(C,C[C.length-1]&-2147483648?-1:0)};function St(I,S){return I.add(it(S))}r.j=function(I){if(at(this)||at(I))return A;if(ot(this))return ot(I)?it(this).j(it(I)):it(it(this).j(I));if(ot(I))return it(this.j(it(I)));if(this.l(F)<0&&I.l(F)<0)return v(this.m()*I.m());const S=this.g.length+I.g.length,C=[];for(var O=0;O<2*S;O++)C[O]=0;for(O=0;O<this.g.length;O++)for(let N=0;N<I.g.length;N++){const z=this.i(O)>>>16,R=this.i(O)&65535,Jt=I.i(N)>>>16,Wt=I.i(N)&65535;C[2*O+2*N]+=R*Wt,Nt(C,2*O+2*N),C[2*O+2*N+1]+=z*Wt,Nt(C,2*O+2*N+1),C[2*O+2*N+1]+=R*Jt,Nt(C,2*O+2*N+1),C[2*O+2*N+2]+=z*Jt,Nt(C,2*O+2*N+2)}for(I=0;I<S;I++)C[I]=C[2*I+1]<<16|C[2*I];for(I=S;I<2*S;I++)C[I]=0;return new d(C,0)};function Nt(I,S){for(;(I[S]&65535)!=I[S];)I[S+1]+=I[S]>>>16,I[S]&=65535,S++}function Tt(I,S){this.g=I,this.h=S}function Xt(I,S){if(at(S))throw Error("division by zero");if(at(I))return new Tt(A,A);if(ot(I))return S=Xt(it(I),S),new Tt(it(S.g),it(S.h));if(ot(S))return S=Xt(I,it(S)),new Tt(it(S.g),S.h);if(I.g.length>30){if(ot(I)||ot(S))throw Error("slowDivide_ only works with positive integers.");for(var C=M,O=S;O.l(I)<=0;)C=gt(C),O=gt(O);var N=kt(C,1),z=kt(O,1);for(O=kt(O,2),C=kt(C,2);!at(O);){var R=z.add(O);R.l(I)<=0&&(N=N.add(C),z=R),O=kt(O,1),C=kt(C,1)}return S=St(I,N.j(S)),new Tt(N,S)}for(N=A;I.l(S)>=0;){for(C=Math.max(1,Math.floor(I.m()/S.m())),O=Math.ceil(Math.log(C)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),z=v(C),R=z.j(S);ot(R)||R.l(I)>0;)C-=O,z=v(C),R=z.j(S);at(z)&&(z=M),N=N.add(z),I=St(I,R)}return new Tt(N,I)}r.B=function(I){return Xt(this,I).h},r.and=function(I){const S=Math.max(this.g.length,I.g.length),C=[];for(let O=0;O<S;O++)C[O]=this.i(O)&I.i(O);return new d(C,this.h&I.h)},r.or=function(I){const S=Math.max(this.g.length,I.g.length),C=[];for(let O=0;O<S;O++)C[O]=this.i(O)|I.i(O);return new d(C,this.h|I.h)},r.xor=function(I){const S=Math.max(this.g.length,I.g.length),C=[];for(let O=0;O<S;O++)C[O]=this.i(O)^I.i(O);return new d(C,this.h^I.h)};function gt(I){const S=I.g.length+1,C=[];for(let O=0;O<S;O++)C[O]=I.i(O)<<1|I.i(O-1)>>>31;return new d(C,I.h)}function kt(I,S){const C=S>>5;S%=32;const O=I.g.length-C,N=[];for(let z=0;z<O;z++)N[z]=S>0?I.i(z+C)>>>S|I.i(z+C+1)<<32-S:I.i(z+C);return new d(N,I.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,B_=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=T,Ia=d}).apply(typeof Sy<"u"?Sy:typeof self<"u"?self:typeof window<"u"?window:{});var Ou=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var q_,Yl,j_,Pu,zh,F_,H_,G_;(function(){var r,e=Object.defineProperty;function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ou=="object"&&Ou];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=i(this);function o(u,m){if(m)t:{var y=s;u=u.split(".");for(var b=0;b<u.length-1;b++){var P=u[b];if(!(P in y))break t;y=y[P]}u=u[u.length-1],b=y[u],m=m(b),m!=b&&m!=null&&e(y,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var y=[],b;for(b in m)Object.prototype.hasOwnProperty.call(m,b)&&y.push([b,m[b]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},d=this||self;function p(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,y){return u.call.apply(u.bind,arguments)}function v(u,m,y){return v=g,v.apply(null,arguments)}function T(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var b=y.slice();return b.push.apply(b,arguments),u.apply(this,b)}}function A(u,m){function y(){}y.prototype=m.prototype,u.Z=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Ob=function(b,P,G){for(var rt=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)rt[Rt-2]=arguments[Rt];return m.prototype[P].apply(b,rt)}}var M=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function F(u){const m=u.length;if(m>0){const y=Array(m);for(let b=0;b<m;b++)y[b]=u[b];return y}return[]}function at(u,m){for(let b=1;b<arguments.length;b++){const P=arguments[b];var y=typeof P;if(y=y!="object"?y:P?Array.isArray(P)?"array":y:"null",y=="array"||y=="object"&&typeof P.length=="number"){y=u.length||0;const G=P.length||0;u.length=y+G;for(let rt=0;rt<G;rt++)u[y+rt]=P[rt]}else u.push(P)}}class ot{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function it(u){d.setTimeout(()=>{throw u},0)}function St(){var u=I;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Nt{constructor(){this.h=this.g=null}add(m,y){const b=Tt.get();b.set(m,y),this.h?this.h.next=b:this.g=b,this.h=b}}var Tt=new ot(()=>new Xt,u=>u.reset());class Xt{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let gt,kt=!1,I=new Nt,S=()=>{const u=Promise.resolve(void 0);gt=()=>{u.then(C)}};function C(){for(var u;u=St();){try{u.h.call(u.g)}catch(y){it(y)}var m=Tt;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}kt=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};d.addEventListener("test",y,m),d.removeEventListener("test",y,m)}catch{}return u})();function R(u){return/^[\s\xa0]*$/.test(u)}function Jt(u,m){N.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}A(Jt,N),Jt.prototype.init=function(u,m){const y=this.type=u.type,b=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Jt.Z.h.call(this)},Jt.prototype.h=function(){Jt.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Wt="closure_listenable_"+(Math.random()*1e6|0),Q=0;function st(u,m,y,b,P){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!b,this.ha=P,this.key=++Q,this.da=this.fa=!1}function mt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Lt(u,m,y){for(const b in u)m.call(y,u[b],b,u)}function x(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function J(u){const m={};for(const y in u)m[y]=u[y];return m}const lt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,m){let y,b;for(let P=1;P<arguments.length;P++){b=arguments[P];for(y in b)u[y]=b[y];for(let G=0;G<lt.length;G++)y=lt[G],Object.prototype.hasOwnProperty.call(b,y)&&(u[y]=b[y])}}function Y(u){this.src=u,this.g={},this.h=0}Y.prototype.add=function(u,m,y,b,P){const G=u.toString();u=this.g[G],u||(u=this.g[G]=[],this.h++);const rt=q(u,m,b,P);return rt>-1?(m=u[rt],y||(m.fa=!1)):(m=new st(m,this.src,G,!!b,P),m.fa=y,u.push(m)),m};function W(u,m){const y=m.type;if(y in u.g){var b=u.g[y],P=Array.prototype.indexOf.call(b,m,void 0),G;(G=P>=0)&&Array.prototype.splice.call(b,P,1),G&&(mt(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function q(u,m,y,b){for(let P=0;P<u.length;++P){const G=u[P];if(!G.da&&G.listener==m&&G.capture==!!y&&G.ha==b)return P}return-1}var ut="closure_lm_"+(Math.random()*1e6|0),yt={};function Bt(u,m,y,b,P){if(Array.isArray(m)){for(let G=0;G<m.length;G++)Bt(u,m[G],y,b,P);return null}return y=xt(y),u&&u[Wt]?u.J(m,y,p(b)?!!b.capture:!1,P):En(u,m,y,!1,b,P)}function En(u,m,y,b,P,G){if(!m)throw Error("Invalid event type");const rt=p(P)?!!P.capture:!!P;let Rt=It(u);if(Rt||(u[ut]=Rt=new Y(u)),y=Rt.add(m,y,b,rt,G),y.proxy)return y;if(b=Oe(),y.proxy=b,b.src=u,b.listener=y,u.addEventListener)z||(P=rt),P===void 0&&(P=!1),u.addEventListener(m.toString(),b,P);else if(u.attachEvent)u.attachEvent(ce(m.toString()),b);else if(u.addListener&&u.removeListener)u.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Oe(){function u(y){return m.call(u.src,u.listener,y)}const m=Pa;return u}function Me(u,m,y,b,P){if(Array.isArray(m))for(var G=0;G<m.length;G++)Me(u,m[G],y,b,P);else b=p(b)?!!b.capture:!!b,y=xt(y),u&&u[Wt]?(u=u.i,G=String(m).toString(),G in u.g&&(m=u.g[G],y=q(m,y,b,P),y>-1&&(mt(m[y]),Array.prototype.splice.call(m,y,1),m.length==0&&(delete u.g[G],u.h--)))):u&&(u=It(u))&&(m=u.g[m.toString()],u=-1,m&&(u=q(m,y,b,P)),(y=u>-1?m[u]:null)&&ue(y))}function ue(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Wt])W(m.i,u);else{var y=u.type,b=u.proxy;m.removeEventListener?m.removeEventListener(y,b,u.capture):m.detachEvent?m.detachEvent(ce(y),b):m.addListener&&m.removeListener&&m.removeListener(b),(y=It(m))?(W(y,u),y.h==0&&(y.src=null,m[ut]=null)):mt(u)}}}function ce(u){return u in yt?yt[u]:yt[u]="on"+u}function Pa(u,m){if(u.da)u=!0;else{m=new Jt(m,this);const y=u.listener,b=u.ha||u.src;u.fa&&ue(u),u=y.call(b,m)}return u}function It(u){return u=u[ut],u instanceof Y?u:null}var tt="__closure_events_fn_"+(Math.random()*1e9>>>0);function xt(u){return typeof u=="function"?u:(u[tt]||(u[tt]=function(m){return u.handleEvent(m)}),u[tt])}function ct(){O.call(this),this.i=new Y(this),this.M=this,this.G=null}A(ct,O),ct.prototype[Wt]=!0,ct.prototype.removeEventListener=function(u,m,y,b){Me(this,u,m,y,b)};function wt(u,m){var y,b=u.G;if(b)for(y=[];b;b=b.G)y.push(b);if(u=u.M,b=m.type||m,typeof m=="string")m=new N(m,u);else if(m instanceof N)m.target=m.target||u;else{var P=m;m=new N(b,u),k(m,P)}P=!0;let G,rt;if(y)for(rt=y.length-1;rt>=0;rt--)G=m.g=y[rt],P=te(G,b,!0,m)&&P;if(G=m.g=u,P=te(G,b,!0,m)&&P,P=te(G,b,!1,m)&&P,y)for(rt=0;rt<y.length;rt++)G=m.g=y[rt],P=te(G,b,!1,m)&&P}ct.prototype.N=function(){if(ct.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const y=u.g[m];for(let b=0;b<y.length;b++)mt(y[b]);delete u.g[m],u.h--}}this.G=null},ct.prototype.J=function(u,m,y,b){return this.i.add(String(u),m,!1,y,b)},ct.prototype.K=function(u,m,y,b){return this.i.add(String(u),m,!0,y,b)};function te(u,m,y,b){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let P=!0;for(let G=0;G<m.length;++G){const rt=m[G];if(rt&&!rt.da&&rt.capture==y){const Rt=rt.listener,me=rt.ha||rt.src;rt.fa&&W(u.i,rt),P=Rt.call(me,b)!==!1&&P}}return P&&!b.defaultPrevented}function Tn(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=v(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:d.setTimeout(u,m||0)}function ai(u){u.g=Tn(()=>{u.g=null,u.i&&(u.i=!1,ai(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Ba extends O{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ai(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Si(u){O.call(this),this.h=u,this.g={}}A(Si,O);var kn=[];function ke(u){Lt(u.g,function(m,y){this.g.hasOwnProperty(y)&&ue(m)},u),u.g={}}Si.prototype.N=function(){Si.Z.N.call(this),ke(this)},Si.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mn=d.JSON.stringify,Ze=d.JSON.parse,js=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function xr(){}function Nr(){}var Rn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function et(){N.call(this,"d")}A(et,N);function bt(){N.call(this,"c")}A(bt,N);var ae={},Ge=null;function zn(){return Ge=Ge||new ct}ae.Ia="serverreachability";function Yi(u){N.call(this,ae.Ia,u)}A(Yi,N);function Ki(u){const m=zn();wt(m,new Yi(m))}ae.STAT_EVENT="statevent";function Vr(u,m){N.call(this,ae.STAT_EVENT,u),this.stat=m}A(Vr,N);function we(u){const m=zn();wt(m,new Vr(m,u))}ae.Ja="timingevent";function go(u,m){N.call(this,ae.Ja,u),this.size=m}A(go,N);function $i(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function Xi(){this.g=!0}Xi.prototype.ua=function(){this.g=!1};function Fs(u,m,y,b,P,G){u.info(function(){if(u.g)if(G){var rt="",Rt=G.split("&");for(let ee=0;ee<Rt.length;ee++){var me=Rt[ee].split("=");if(me.length>1){const De=me[0];me=me[1];const Cn=De.split("_");rt=Cn.length>=2&&Cn[1]=="type"?rt+(De+"="+me+"&"):rt+(De+"=redacted&")}}}else rt=null;else rt=G;return"XMLHTTP REQ ("+b+") [attempt "+P+"]: "+m+`
`+y+`
`+rt})}function Hs(u,m,y,b,P,G,rt){u.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+P+"]: "+m+`
`+y+`
`+G+" "+rt})}function wi(u,m,y,b){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+ri(u,y)+(b?" "+b:"")})}function gc(u,m){u.info(function(){return"TIMEOUT: "+m})}Xi.prototype.info=function(){};function ri(u,m){if(!u.g)return m;if(!m)return null;try{const G=JSON.parse(m);if(G){for(u=0;u<G.length;u++)if(Array.isArray(G[u])){var y=G[u];if(!(y.length<2)){var b=y[1];if(Array.isArray(b)&&!(b.length<1)){var P=b[0];if(P!="noop"&&P!="stop"&&P!="close")for(let rt=1;rt<b.length;rt++)b[rt]=""}}}}return mn(G)}catch{return m}}var Re={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Je={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ri;function qa(){}A(qa,xr),qa.prototype.g=function(){return new XMLHttpRequest},Ri=new qa;function ja(u){return encodeURIComponent(String(u))}function yc(u){var m=1;u=u.split(":");const y=[];for(;m>0&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function Kn(u,m,y,b){this.j=u,this.i=m,this.l=y,this.S=b||1,this.V=new Si(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zi}function Zi(){this.i=null,this.g="",this.h=!1}var Ir={},si={};function li(u,m,y){u.M=1,u.A=Di(ve(m)),u.u=y,u.R=!0,Ji(u,null)}function Ji(u,m){u.F=Date.now(),Fa(u),u.B=ve(u.A);var y=u.B,b=u.S;Array.isArray(b)||(b=[String(b)]),Eo(y.i,"t",b),u.C=0,y=u.j.L,u.h=new Zi,u.g=jr(u.j,y?m:null,!u.u),u.P>0&&(u.O=new Ba(v(u.Y,u,u.g),u.P)),m=u.V,y=u.g,b=u.ba;var P="readystatechange";Array.isArray(P)||(P&&(kn[0]=P.toString()),P=kn);for(let G=0;G<P.length;G++){const rt=Bt(y,P[G],b||m.handleEvent,!1,m.h||m);if(!rt)break;m.g[rt.key]=rt}m=u.J?J(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Ki(),Fs(u.i,u.v,u.B,u.l,u.S,u.u)}Kn.prototype.ba=function(u){u=u.target;const m=this.O;m&&sn(u)==3?m.j():this.Y(u)},Kn.prototype.Y=function(u){try{if(u==this.g)t:{const Rt=sn(this.g),me=this.g.ya(),ee=this.g.ca();if(!(Rt<3)&&(Rt!=3||this.g&&(this.h.h||this.g.la()||tr(this.g)))){this.K||Rt!=4||me==7||(me==8||ee<=0?Ki(3):Ki(2)),ui(this);var m=this.g.ca();this.X=m;var y=Wi(this);if(this.o=m==200,Hs(this.i,this.v,this.B,this.l,this.S,Rt,m),this.o){if(this.U&&!this.L){e:{if(this.g){var b,P=this.g;if((b=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(b)){var G=b;break e}}G=null}if(u=G)wi(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Or(this,u);else{this.o=!1,this.m=3,we(12),ci(this),Ha(this);break t}}if(this.R){u=!0;let De;for(;!this.K&&this.C<y.length;)if(De=yo(this,y),De==si){Rt==4&&(this.m=4,we(14),u=!1),wi(this.i,this.l,null,"[Incomplete Response]");break}else if(De==Ir){this.m=4,we(15),wi(this.i,this.l,y,"[Invalid Chunk]"),u=!1;break}else wi(this.i,this.l,De,null),Or(this,De);if(Ce(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||y.length!=0||this.h.h||(this.m=1,we(16),u=!1),this.o=this.o&&u,!u)wi(this.i,this.l,y,"[Invalid Chunked Response]"),ci(this),Ha(this);else if(y.length>0&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.aa&&!rt.P&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),tl(rt),rt.P=!0,we(11))}}else wi(this.i,this.l,y,null),Or(this,y);Rt==4&&ci(this),this.o&&!this.K&&(Rt==4?el(this.j,this):(this.o=!1,Fa(this)))}else er(this.g),m==400&&y.indexOf("Unknown SID")>0?(this.m=3,we(12)):(this.m=0,we(13)),ci(this),Ha(this)}}}catch{}finally{}};function Wi(u){if(!Ce(u))return u.g.la();const m=tr(u.g);if(m==="")return"";let y="";const b=m.length,P=sn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return ci(u),Ha(u),"";u.h.i=new d.TextDecoder}for(let G=0;G<b;G++)u.h.h=!0,y+=u.h.i.decode(m[G],{stream:!(P&&G==b-1)});return m.length=0,u.h.g+=y,u.C=0,u.h.g}function Ce(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function yo(u,m){var y=u.C,b=m.indexOf(`
`,y);return b==-1?si:(y=Number(m.substring(y,b)),isNaN(y)?Ir:(b+=1,b+y>m.length?si:(m=m.slice(b,b+y),u.C=b+y,m)))}Kn.prototype.cancel=function(){this.K=!0,ci(this)};function Fa(u){u.T=Date.now()+u.H,oi(u,u.H)}function oi(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=$i(v(u.aa,u),m)}function ui(u){u.D&&(d.clearTimeout(u.D),u.D=null)}Kn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(gc(this.i,this.B),this.M!=2&&(Ki(),we(17)),ci(this),this.m=2,Ha(this)):oi(this,this.T-u)};function Ha(u){u.j.I==0||u.K||el(u.j,u)}function ci(u){ui(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,ke(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Or(u,m){try{var y=u.j;if(y.I!=0&&(y.g==u||Ya(y.h,u))){if(!u.L&&Ya(y.h,u)&&y.I==3){try{var b=y.Ba.g.parse(m)}catch{b=null}if(Array.isArray(b)&&b.length==3){var P=b;if(P[0]==0){t:if(!y.v){if(y.g)if(y.g.F+3e3<u.F)qr(y),fi(y);else break t;Ws(y),we(18)}}else y.xa=P[1],0<y.xa-y.K&&P[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=$i(v(y.Va,y),6e3));Un(y.h)<=1&&y.ta&&(y.ta=void 0)}else Vi(y,11)}else if((u.L||y.g==u)&&qr(y),!R(m))for(P=y.Ba.g.parse(m),m=0;m<P.length;m++){let ee=P[m];const De=ee[0];if(!(De<=y.K))if(y.K=De,ee=ee[1],y.I==2)if(ee[0]=="c"){y.M=ee[1],y.ba=ee[2];const Cn=ee[3];Cn!=null&&(y.ka=Cn,y.j.info("VER="+y.ka));const hi=ee[4];hi!=null&&(y.za=hi,y.j.info("SVER="+y.za));const Zn=ee[5];Zn!=null&&typeof Zn=="number"&&Zn>0&&(b=1.5*Zn,y.O=b,y.j.info("backChannelRequestTimeoutMs_="+b)),b=y;const Jn=u.g;if(Jn){const Wn=Jn.g?Jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wn){var G=b.h;G.g||Wn.indexOf("spdy")==-1&&Wn.indexOf("quic")==-1&&Wn.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Mr(G,G.h),G.h=null))}if(b.G){const il=Jn.g?Jn.g.getResponseHeader("X-HTTP-Session-Id"):null;il&&(b.wa=il,re(b.J,b.G,il))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-u.F,y.j.info("Handshake RTT: "+y.T+"ms")),b=y;var rt=u;if(b.na=xo(b,b.L?b.ba:null,b.W),rt.L){Ci(b.h,rt);var Rt=rt,me=b.O;me&&(Rt.H=me),Rt.D&&(ui(Rt),Fa(Rt)),b.g=rt}else wo(b);y.i.length>0&&rr(y)}else ee[0]!="stop"&&ee[0]!="close"||Vi(y,7);else y.I==3&&(ee[0]=="stop"||ee[0]=="close"?ee[0]=="stop"?Vi(y,7):ir(y):ee[0]!="noop"&&y.l&&y.l.qa(ee),y.A=0)}}Ki(4)}catch{}}var _c=class{constructor(u,m){this.g=u,this.map=m}};function Ga(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Qa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Un(u){return u.h?1:u.g?u.g.size:0}function Ya(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Mr(u,m){u.g?u.g.add(m):u.h=m}function Ci(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ga.prototype.cancel=function(){if(this.i=kr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function kr(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.G);return m}return F(u.i)}var zr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vc(u,m){if(u){u=u.split("&");for(let y=0;y<u.length;y++){const b=u[y].indexOf("=");let P,G=null;b>=0?(P=u[y].substring(0,b),G=u[y].substring(b+1)):P=u[y],m(P,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function $n(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof $n?(this.l=u.l,ta(this,u.j),this.o=u.o,this.g=u.g,Ka(this,u.u),this.h=u.h,ea(this,To(u.i)),this.m=u.m):u&&(m=String(u).match(zr))?(this.l=!1,ta(this,m[1]||"",!0),this.o=$a(m[2]||""),this.g=$a(m[3]||"",!0),Ka(this,m[4]),this.h=$a(m[5]||"",!0),ea(this,m[6]||"",!0),this.m=$a(m[7]||"")):(this.l=!1,this.i=new Ln(null,this.l))}$n.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Qe(m,Qs,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Qe(m,Qs,!0),"@"),u.push(ja(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&u.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Qe(y,y.charAt(0)=="/"?na:Ys,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Qe(y,vo)),u.join("")},$n.prototype.resolve=function(u){const m=ve(this);let y=!!u.j;y?ta(m,u.j):y=!!u.o,y?m.o=u.o:y=!!u.g,y?m.g=u.g:y=u.u!=null;var b=u.h;if(y)Ka(m,u.u);else if(y=!!u.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var P=m.h.lastIndexOf("/");P!=-1&&(b=m.h.slice(0,P+1)+b)}if(P=b,P==".."||P==".")b="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){b=P.lastIndexOf("/",0)==0,P=P.split("/");const G=[];for(let rt=0;rt<P.length;){const Rt=P[rt++];Rt=="."?b&&rt==P.length&&G.push(""):Rt==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),b&&rt==P.length&&G.push("")):(G.push(Rt),b=!0)}b=G.join("/")}else b=P}return y?m.h=b:y=u.i.toString()!=="",y?ea(m,To(u.i)):y=!!u.m,y&&(m.m=u.m),m};function ve(u){return new $n(u)}function ta(u,m,y){u.j=y?$a(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Ka(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function ea(u,m,y){m instanceof Ln?(u.i=m,Xs(u.i,u.l)):(y||(m=Qe(m,_o)),u.i=new Ln(m,u.l))}function re(u,m,y){u.i.set(m,y)}function Di(u){return re(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function $a(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qe(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,Gs),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Gs(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Qs=/[#\/\?@]/g,Ys=/[#\?:]/g,na=/[#\?]/g,_o=/[#\?@]/g,vo=/#/g;function Ln(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function xi(u){u.g||(u.g=new Map,u.h=0,u.i&&vc(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}r=Ln.prototype,r.add=function(u,m){xi(this),this.i=null,u=Xn(this,u);let y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function Ks(u,m){xi(u),m=Xn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function $s(u,m){return xi(u),m=Xn(u,m),u.g.has(m)}r.forEach=function(u,m){xi(this),this.g.forEach(function(y,b){y.forEach(function(P){u.call(m,P,b,this)},this)},this)};function Ur(u,m){xi(u);let y=[];if(typeof m=="string")$s(u,m)&&(y=y.concat(u.g.get(Xn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)y=y.concat(u[m]);return y}r.set=function(u,m){return xi(this),this.i=null,u=Xn(this,u),$s(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=Ur(this,u),u.length>0?String(u[0]):m):m};function Eo(u,m,y){Ks(u,m),y.length>0&&(u.i=null,u.g.set(Xn(u,m),F(y)),u.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let b=0;b<m.length;b++){var y=m[b];const P=ja(y);y=Ur(this,y);for(let G=0;G<y.length;G++){let rt=P;y[G]!==""&&(rt+="="+ja(y[G])),u.push(rt)}}return this.i=u.join("&")};function To(u){const m=new Ln;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Xn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Xs(u,m){m&&!u.j&&(xi(u),u.i=null,u.g.forEach(function(y,b){const P=b.toLowerCase();b!=P&&(Ks(this,b),Eo(this,P,y))},u)),u.j=m}function Zs(u,m){const y=new Xi;if(d.Image){const b=new Image;b.onload=T(pn,y,"TestLoadImage: loaded",!0,m,b),b.onerror=T(pn,y,"TestLoadImage: error",!1,m,b),b.onabort=T(pn,y,"TestLoadImage: abort",!1,m,b),b.ontimeout=T(pn,y,"TestLoadImage: timeout",!1,m,b),d.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=u}else m(!1)}function ia(u,m){const y=new Xi,b=new AbortController,P=setTimeout(()=>{b.abort(),pn(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:b.signal}).then(G=>{clearTimeout(P),G.ok?pn(y,"TestPingServer: ok",!0,m):pn(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(P),pn(y,"TestPingServer: error",!1,m)})}function pn(u,m,y,b,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),b(y)}catch{}}function bo(){this.g=new js}function Xa(u){this.i=u.Sb||null,this.h=u.ab||!1}A(Xa,xr),Xa.prototype.g=function(){return new Za(this.i,this.h)};function Za(u,m){ct.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}A(Za,ct),r=Za.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Ni(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||d).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gn(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ni(this)),this.g&&(this.readyState=3,Ni(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;aa(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function aa(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?gn(this):Ni(this),this.readyState==3&&aa(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,gn(this))},r.Na=function(u){this.g&&(this.response=u,gn(this))},r.ga=function(){this.g&&gn(this)};function gn(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Ni(u)}r.setRequestHeader=function(u,m){this.A.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function Ni(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Za.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ra(u){let m="";return Lt(u,function(y,b){m+=b,m+=":",m+=y,m+=`\r
`}),m}function Pn(u,m,y){t:{for(b in y){var b=!1;break t}b=!0}b||(y=ra(y),typeof u=="string"?y!=null&&ja(y):re(u,m,y))}function he(u){ct.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}A(he,ct);var Lr=/^https?$/i,Ao=["POST","PUT"];r=he.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,m,y,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ri.g(),this.g.onreadystatechange=M(v(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(G){Ja(this,G);return}if(u=y||"",y=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var P in b)y.set(P,b[P]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const G of b.keys())y.set(G,b.get(G));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(y.keys()).find(G=>G.toLowerCase()=="content-type"),P=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(Ao,m,void 0)>=0)||b||P||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,rt]of y)this.g.setRequestHeader(G,rt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(G){Ja(this,G)}};function Ja(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,Wa(u),qe(u)}function Wa(u){u.A||(u.A=!0,wt(u,"complete"),wt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,wt(this,"complete"),wt(this,"abort"),qe(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qe(this,!0)),he.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Js(this):this.Xa())},r.Xa=function(){Js(this)};function Js(u){if(u.h&&typeof f<"u"){if(u.v&&sn(u)==4)setTimeout(u.Ca.bind(u),0);else if(wt(u,"readystatechange"),sn(u)==4){u.h=!1;try{const G=u.ca();t:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var y;if(!(y=m)){var b;if(b=G===0){let rt=String(u.D).match(zr)[1]||null;!rt&&d.self&&d.self.location&&(rt=d.self.location.protocol.slice(0,-1)),b=!Lr.test(rt?rt.toLowerCase():"")}y=b}if(y)wt(u,"complete"),wt(u,"success");else{u.o=6;try{var P=sn(u)>2?u.g.statusText:""}catch{P=""}u.l=P+" ["+u.ca()+"]",Wa(u)}}finally{qe(u)}}}}function qe(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const y=u.g;u.g=null,m||wt(u,"ready");try{y.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function sn(u){return u.g?u.g.readyState:0}r.ca=function(){try{return sn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Ze(m)}};function tr(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function er(u){const m={};u=(u.g&&sn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<u.length;b++){if(R(u[b]))continue;var y=yc(u[b]);const P=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const G=m[P]||[];m[P]=G,G.push(y)}x(m,function(b){return b.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function nr(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function Pr(u){this.za=0,this.i=[],this.j=new Xi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=nr("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=nr("baseRetryDelayMs",5e3,u),this.Za=nr("retryDelaySeedMs",1e4,u),this.Ta=nr("forwardChannelMaxRetries",2,u),this.va=nr("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Ga(u&&u.concurrentRequestLimit),this.Ba=new bo,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Pr.prototype,r.ka=8,r.I=1,r.connect=function(u,m,y,b){we(0),this.W=u,this.H=m||{},y&&b!==void 0&&(this.H.OSID=y,this.H.OAID=b),this.F=this.X,this.J=xo(this,null,this.W),rr(this)};function ir(u){if(ar(u),u.I==3){var m=u.V++,y=ve(u.J);if(re(y,"SID",u.M),re(y,"RID",m),re(y,"TYPE","terminate"),sr(u,y),m=new Kn(u,u.j,m),m.M=2,m.A=Di(ve(y)),y=!1,d.navigator&&d.navigator.sendBeacon)try{y=d.navigator.sendBeacon(m.A.toString(),"")}catch{}!y&&d.Image&&(new Image().src=m.A,y=!0),y||(m.g=jr(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Fa(m)}Do(u)}function fi(u){u.g&&(tl(u),u.g.cancel(),u.g=null)}function ar(u){fi(u),u.v&&(d.clearTimeout(u.v),u.v=null),qr(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function rr(u){if(!Qa(u.h)&&!u.m){u.m=!0;var m=u.Ea;gt||S(),kt||(gt(),kt=!0),I.add(m,u),u.D=0}}function Ec(u,m){return Un(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=$i(v(u.Ea,u,m),Co(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const P=new Kn(this,this.j,u);let G=this.o;if(this.U&&(G?(G=J(G),k(G,this.U)):G=this.U),this.u!==null||this.R||(P.J=G,G=null),this.S)t:{for(var m=0,y=0;y<this.i.length;y++){e:{var b=this.i[y];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break e}b=void 0}if(b===void 0)break;if(m+=b,m>4096){m=y;break t}if(m===4096||y===this.i.length-1){m=y+1;break t}}m=1e3}else m=1e3;m=Br(this,P,m),y=ve(this.J),re(y,"RID",u),re(y,"CVER",22),this.G&&re(y,"X-HTTP-Session-Id",this.G),sr(this,y),G&&(this.R?m="headers="+ja(ra(G))+"&"+m:this.u&&Pn(y,this.u,G)),Mr(this.h,P),this.Ra&&re(y,"TYPE","init"),this.S?(re(y,"$req",m),re(y,"SID","null"),P.U=!0,li(P,y,null)):li(P,y,m),this.I=2}}else this.I==3&&(u?So(this,u):this.i.length==0||Qa(this.h)||So(this))};function So(u,m){var y;m?y=m.l:y=u.V++;const b=ve(u.J);re(b,"SID",u.M),re(b,"RID",y),re(b,"AID",u.K),sr(u,b),u.u&&u.o&&Pn(b,u.u,u.o),y=new Kn(u,u.j,y,u.D+1),u.u===null&&(y.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Br(u,y,1e3),y.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Mr(u.h,y),li(y,b,m)}function sr(u,m){u.H&&Lt(u.H,function(y,b){re(m,b,y)}),u.l&&Lt({},function(y,b){re(m,b,y)})}function Br(u,m,y){y=Math.min(u.i.length,y);const b=u.l?v(u.l.Ka,u.l,u):null;t:{var P=u.i;let Rt=-1;for(;;){const me=["count="+y];Rt==-1?y>0?(Rt=P[0].g,me.push("ofs="+Rt)):Rt=0:me.push("ofs="+Rt);let ee=!0;for(let De=0;De<y;De++){var G=P[De].g;const Cn=P[De].map;if(G-=Rt,G<0)Rt=Math.max(0,P[De].g-100),ee=!1;else try{G="req"+G+"_"||"";try{var rt=Cn instanceof Map?Cn:Object.entries(Cn);for(const[hi,Zn]of rt){let Jn=Zn;p(Zn)&&(Jn=mn(Zn)),me.push(G+hi+"="+encodeURIComponent(Jn))}}catch(hi){throw me.push(G+"type="+encodeURIComponent("_badmap")),hi}}catch{b&&b(Cn)}}if(ee){rt=me.join("&");break t}}rt=void 0}return u=u.i.splice(0,y),m.G=u,rt}function wo(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;gt||S(),kt||(gt(),kt=!0),I.add(m,u),u.A=0}}function Ws(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=$i(v(u.Da,u),Co(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Ro(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=$i(v(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,we(10),fi(this),Ro(this))};function tl(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function Ro(u){u.g=new Kn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=ve(u.na);re(m,"RID","rpc"),re(m,"SID",u.M),re(m,"AID",u.K),re(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&re(m,"TO",u.ia),re(m,"TYPE","xmlhttp"),sr(u,m),u.u&&u.o&&Pn(m,u.u,u.o),u.O&&(u.g.H=u.O);var y=u.g;u=u.ba,y.M=1,y.A=Di(ve(m)),y.u=null,y.R=!0,Ji(y,u)}r.Va=function(){this.C!=null&&(this.C=null,fi(this),Ws(this),we(19))};function qr(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function el(u,m){var y=null;if(u.g==m){qr(u),tl(u),u.g=null;var b=2}else if(Ya(u.h,m))y=m.G,Ci(u.h,m),b=1;else return;if(u.I!=0){if(m.o)if(b==1){y=m.u?m.u.length:0,m=Date.now()-m.F;var P=u.D;b=zn(),wt(b,new go(b,y)),rr(u)}else wo(u);else if(P=m.m,P==3||P==0&&m.X>0||!(b==1&&Ec(u,m)||b==2&&Ws(u)))switch(y&&y.length>0&&(m=u.h,m.i=m.i.concat(y)),P){case 1:Vi(u,5);break;case 4:Vi(u,10);break;case 3:Vi(u,6);break;default:Vi(u,2)}}}function Co(u,m){let y=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(y*=2),y*m}function Vi(u,m){if(u.j.info("Error code "+m),m==2){var y=v(u.bb,u),b=u.Ua;const P=!b;b=new $n(b||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ta(b,"https"),Di(b),P?Zs(b.toString(),y):ia(b.toString(),y)}else we(2);u.I=0,u.l&&u.l.pa(m),Do(u),ar(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),we(2)):(this.j.info("Failed to ping google.com"),we(1))};function Do(u){if(u.I=0,u.ja=[],u.l){const m=kr(u.h);(m.length!=0||u.i.length!=0)&&(at(u.ja,m),at(u.ja,u.i),u.h.i.length=0,F(u.i),u.i.length=0),u.l.oa()}}function xo(u,m,y){var b=y instanceof $n?ve(y):new $n(y);if(b.g!="")m&&(b.g=m+"."+b.g),Ka(b,b.u);else{var P=d.location;b=P.protocol,m=m?m+"."+P.hostname:P.hostname,P=+P.port;const G=new $n(null);b&&ta(G,b),m&&(G.g=m),P&&Ka(G,P),y&&(G.h=y),b=G}return y=u.G,m=u.wa,y&&m&&re(b,y,m),re(b,"VER",u.ka),sr(u,b),b}function jr(u,m,y){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new he(new Xa({ab:y})):new he(u.ma),m.Fa(u.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function No(){}r=No.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Fr(){}Fr.prototype.g=function(u,m){return new yn(u,m)};function yn(u,m){ct.call(this),this.g=new Pr(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!R(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!R(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new sa(this)}A(yn,ct),yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){ir(this.g)},yn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.v&&(y={},y.__data__=mn(u),u=y);m.i.push(new _c(m.Ya++,u)),m.I==3&&rr(m)},yn.prototype.N=function(){this.g.l=null,delete this.j,ir(this.g),delete this.g,yn.Z.N.call(this)};function nl(u){et.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const y in m){u=y;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}A(nl,et);function Vo(){bt.call(this),this.status=1}A(Vo,bt);function sa(u){this.g=u}A(sa,No),sa.prototype.ra=function(){wt(this.g,"a")},sa.prototype.qa=function(u){wt(this.g,new nl(u))},sa.prototype.pa=function(u){wt(this.g,new Vo)},sa.prototype.oa=function(){wt(this.g,"b")},Fr.prototype.createWebChannel=Fr.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,G_=function(){return new Fr},H_=function(){return zn()},F_=ae,zh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,Pu=Re,Je.COMPLETE="complete",j_=Je,Nr.EventType=Rn,Rn.OPEN="a",Rn.CLOSE="b",Rn.ERROR="c",Rn.MESSAGE="d",ct.prototype.listen=ct.prototype.J,Yl=Nr,he.prototype.listenOnce=he.prototype.K,he.prototype.getLastError=he.prototype.Ha,he.prototype.getLastErrorCode=he.prototype.ya,he.prototype.getStatus=he.prototype.ca,he.prototype.getResponseJson=he.prototype.La,he.prototype.getResponseText=he.prototype.la,he.prototype.send=he.prototype.ea,he.prototype.setWithCredentials=he.prototype.Fa,q_=he}).apply(typeof Ou<"u"?Ou:typeof self<"u"?self:typeof window<"u"?window:{});const wy="@firebase/firestore",Ry="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Us="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new M_("@firebase/firestore");function _s(){return Rr.logLevel}function ft(r,...e){if(Rr.logLevel<=Ft.DEBUG){const i=e.map(ud);Rr.debug(`Firestore (${Us}): ${r}`,...i)}}function Qi(r,...e){if(Rr.logLevel<=Ft.ERROR){const i=e.map(ud);Rr.error(`Firestore (${Us}): ${r}`,...i)}}function xs(r,...e){if(Rr.logLevel<=Ft.WARN){const i=e.map(ud);Rr.warn(`Firestore (${Us}): ${r}`,...i)}}function ud(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(i){return JSON.stringify(i)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(r,e,i){let s="Unexpected state";typeof e=="string"?s=e:i=e,Q_(r,s,i)}function Q_(r,e,i){let s=`FIRESTORE (${Us}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(i!==void 0)try{s+=" CONTEXT: "+JSON.stringify(i)}catch{s+=" CONTEXT: "+i}throw Qi(s),new Error(s)}function be(r,e,i,s){let o="Unexpected state";typeof i=="string"?o=i:s=i,r||Q_(e,o,s)}function Ht(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ht extends zs{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(){this.promise=new Promise(((e,i)=>{this.resolve=e,this.reject=i}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class F1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable((()=>i(cn.UNAUTHENTICATED)))}shutdown(){}}class H1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class G1{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){be(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,i(g)):Promise.resolve();let f=new Ss;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new Ss,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=f;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new Ss)}}),0),d()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((s=>this.i!==e?(ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(be(typeof s.accessToken=="string",31837,{l:s}),new Y_(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string",2055,{h:e}),new cn(e)}}class Q1{constructor(e,i,s){this.P=e,this.T=i,this.I=s,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Y1{constructor(e,i,s){this.P=e,this.T=i,this.I=s}getToken(){return Promise.resolve(new Q1(this.P,this.T,this.I))}start(e,i){e.enqueueRetryable((()=>i(cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Cy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K1{constructor(e,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,R1(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,i){be(this.o===void 0,3512);const s=f=>{f.error!=null&&ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const d=f.token!==this.m;return this.m=f.token,ft("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?i(f.token):Promise.resolve()};this.o=f=>{e.enqueueRetryable((()=>s(f)))};const o=f=>{ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((f=>o(f))),setTimeout((()=>{if(!this.appCheck){const f=this.V.getImmediate({optional:!0});f?o(f):ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Cy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((i=>i?(be(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new Cy(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let s=0;s<r;s++)i[s]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=$1(40);for(let f=0;f<o.length;++f)s.length<20&&o[f]<i&&(s+=e.charAt(o[f]%62))}return s}}function Pt(r,e){return r<e?-1:r>e?1:0}function Uh(r,e){const i=Math.min(r.length,e.length);for(let s=0;s<i;s++){const o=r.charAt(s),f=e.charAt(s);if(o!==f)return Ah(o)===Ah(f)?Pt(o,f):Ah(o)?1:-1}return Pt(r.length,e.length)}const X1=55296,Z1=57343;function Ah(r){const e=r.charCodeAt(0);return e>=X1&&e<=Z1}function Ns(r,e,i){return r.length===e.length&&r.every(((s,o)=>i(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy="__name__";class _i{constructor(e,i,s){i===void 0?i=0:i>e.length&&Dt(637,{offset:i,range:e.length}),s===void 0?s=e.length-i:s>e.length-i&&Dt(1746,{length:s,range:e.length-i}),this.segments=e,this.offset=i,this.len=s}get length(){return this.len}isEqual(e){return _i.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof _i?e.forEach((s=>{i.push(s)})):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,s=this.limit();i<s;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const s=Math.min(e.length,i.length);for(let o=0;o<s;o++){const f=_i.compareSegments(e.get(o),i.get(o));if(f!==0)return f}return Pt(e.length,i.length)}static compareSegments(e,i){const s=_i.isNumericId(e),o=_i.isNumericId(i);return s&&!o?-1:!s&&o?1:s&&o?_i.extractNumericId(e).compare(_i.extractNumericId(i)):Uh(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ia.fromString(e.substring(4,e.length-2))}}class ye extends _i{construct(e,i,s){return new ye(e,i,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const s of e){if(s.indexOf("//")>=0)throw new ht(nt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);i.push(...s.split("/").filter((o=>o.length>0)))}return new ye(i)}static emptyPath(){return new ye([])}}const J1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends _i{construct(e,i,s){return new hn(e,i,s)}static isValidIdentifier(e){return J1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Dy}static keyField(){return new hn([Dy])}static fromServerFormat(e){const i=[];let s="",o=0;const f=()=>{if(s.length===0)throw new ht(nt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(s),s=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new ht(nt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ht(nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(s+=p,o++):(f(),o++)}if(f(),d)throw new ht(nt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(i)}static emptyPath(){return new hn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.path=e}static fromPath(e){return new vt(ye.fromString(e))}static fromName(e){return new vt(ye.fromString(e).popFirst(5))}static empty(){return new vt(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return ye.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new vt(new ye(e.slice()))}}function W1(r,e,i,s){if(e===!0&&s===!0)throw new ht(nt.INVALID_ARGUMENT,`${r} and ${i} cannot be used together.`)}function xy(r){if(vt.isDocumentKey(r))throw new ht(nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function $_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function ac(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Dt(12329,{type:typeof r})}function Bu(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ht(nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=ac(r);throw new ht(nt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(r,e){const i={typeString:r};return e&&(i.value=e),i}function fo(r,e){if(!$_(r))throw new ht(nt.INVALID_ARGUMENT,"JSON must be an object");let i;for(const s in e)if(e[s]){const o=e[s].typeString,f="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){i=`JSON missing required field: '${s}'`;break}const d=r[s];if(o&&typeof d!==o){i=`JSON field '${s}' must be a ${o}.`;break}if(f!==void 0&&d!==f.value){i=`Expected '${s}' field to equal '${f.value}'`;break}}if(i)throw new ht(nt.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=-62135596800,Vy=1e6;class _e{static now(){return _e.fromMillis(Date.now())}static fromDate(e){return _e.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),s=Math.floor((e-1e3*i)*Vy);return new _e(i,s)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new ht(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new ht(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<Ny)throw new ht(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ht(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vy}_compareTo(e){return this.seconds===e.seconds?Pt(this.nanoseconds,e.nanoseconds):Pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fo(e,_e._jsonSchema))return new _e(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ny;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_e._jsonSchemaVersion="firestore/timestamp/1.0",_e._jsonSchema={type:Be("string",_e._jsonSchemaVersion),seconds:Be("number"),nanoseconds:Be("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new _e(0,0))}static max(){return new Ct(new _e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=-1;function tb(r,e){const i=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ct.fromTimestamp(s===1e9?new _e(i+1,0):new _e(i,s));return new Oa(o,vt.empty(),e)}function eb(r){return new Oa(r.readTime,r.key,so)}class Oa{constructor(e,i,s){this.readTime=e,this.documentKey=i,this.largestBatchId=s}static min(){return new Oa(Ct.min(),vt.empty(),so)}static max(){return new Oa(Ct.max(),vt.empty(),so)}}function nb(r,e){let i=r.readTime.compareTo(e.readTime);return i!==0?i:(i=vt.comparator(r.documentKey,e.documentKey),i!==0?i:Pt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ab{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rc(r){if(r.code!==nt.FAILED_PRECONDITION||r.message!==ib)throw r;ft("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&Dt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new Z(((s,o)=>{this.nextCallback=f=>{this.wrapSuccess(e,f).next(s,o)},this.catchCallback=f=>{this.wrapFailure(i,f).next(s,o)}}))}toPromise(){return new Promise(((e,i)=>{this.next(e,i)}))}wrapUserFunction(e){try{const i=e();return i instanceof Z?i:Z.resolve(i)}catch(i){return Z.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction((()=>e(i))):Z.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction((()=>e(i))):Z.reject(i)}static resolve(e){return new Z(((i,s)=>{i(e)}))}static reject(e){return new Z(((i,s)=>{s(e)}))}static waitFor(e){return new Z(((i,s)=>{let o=0,f=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++f,d&&f===o&&i()}),(g=>s(g)))})),d=!0,f===o&&i()}))}static or(e){let i=Z.resolve(!1);for(const s of e)i=i.next((o=>o?Z.resolve(o):s()));return i}static forEach(e,i){const s=[];return e.forEach(((o,f)=>{s.push(i.call(this,o,f))})),this.waitFor(s)}static mapArray(e,i){return new Z(((s,o)=>{const f=e.length,d=new Array(f);let p=0;for(let g=0;g<f;g++){const v=g;i(e[v]).next((T=>{d[v]=T,++p,p===f&&s(d)}),(T=>o(T)))}}))}static doWhile(e,i){return new Z(((s,o)=>{const f=()=>{e()===!0?i().next((()=>{f()}),o):s()};f()}))}}function rb(r){const e=r.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function Ls(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>i.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=-1;function lc(r){return r==null}function Xu(r){return r===0&&1/r==-1/0}function lb(r){return typeof r=="number"&&Number.isInteger(r)&&!Xu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="";function ob(r){let e="";for(let i=0;i<r.length;i++)e.length>0&&(e=Iy(e)),e=ub(r.get(i),e);return Iy(e)}function ub(r,e){let i=e;const s=r.length;for(let o=0;o<s;o++){const f=r.charAt(o);switch(f){case"\0":i+="";break;case X_:i+="";break;default:i+=f}}return i}function Iy(r){return r+X_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(r){let e=0;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e++;return e}function Ps(r,e){for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e(i,r[i])}function Z_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e,i){this.comparator=e,this.root=i||an.EMPTY}insert(e,i){return new Ie(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new Ie(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return i.value;s<0?i=i.left:s>0&&(i=i.right)}return null}indexOf(e){let i=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return i+s.left.size;o<0?s=s.left:(i+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((i,s)=>(e(i,s),!1)))}toString(){const e=[];return this.inorderTraversal(((i,s)=>(e.push(`${i}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mu(this.root,e,this.comparator,!0)}}class Mu{constructor(e,i,s,o){this.isReverse=o,this.nodeStack=[];let f=1;for(;!e.isEmpty();)if(f=i?s(e.key,i):1,i&&o&&(f*=-1),f<0)e=this.isReverse?e.left:e.right;else{if(f===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,i,s,o,f){this.key=e,this.value=i,this.color=s??an.RED,this.left=o??an.EMPTY,this.right=f??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,s,o,f){return new an(e??this.key,i??this.value,s??this.color,o??this.left,f??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,s){let o=this;const f=s(e,o.key);return o=f<0?o.copy(null,null,null,o.left.insert(e,i,s),null):f===0?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(e,i,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let s,o=this;if(i(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,i),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),i(e,o.key)===0){if(o.right.isEmpty())return an.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,i))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Dt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Dt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Dt(27949);return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw Dt(57766)}get value(){throw Dt(16141)}get color(){throw Dt(16727)}get left(){throw Dt(29726)}get right(){throw Dt(36894)}copy(e,i,s,o,f){return this}insert(e,i,s){return new an(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.comparator=e,this.data=new Ie(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((i,s)=>(e(i),!1)))}forEachInRange(e,i){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;i(o.key)}}forEachWhile(e,i){let s;for(s=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new My(this.data.getIterator())}getIteratorFrom(e){return new My(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach((s=>{i=i.add(s)})),i}isEqual(e){if(!(e instanceof He)||this.size!==e.size)return!1;const i=this.data.getIterator(),s=e.data.getIterator();for(;i.hasNext();){const o=i.getNext().key,f=s.getNext().key;if(this.comparator(o,f)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((i=>{e.push(i)})),e}toString(){const e=[];return this.forEach((i=>e.push(i))),"SortedSet("+e.toString()+")"}copy(e){const i=new He(this.comparator);return i.data=e,i}}class My{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new Da([])}unionWith(e){let i=new He(hn.comparator);for(const s of this.fields)i=i.add(s);for(const s of e)i=i.add(s);return new Da(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return Ns(this.fields,e.fields,((i,s)=>i.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const i=(function(o){try{return atob(o)}catch(f){throw typeof DOMException<"u"&&f instanceof DOMException?new J_("Invalid base64 string: "+f):f}})(e);return new rn(i)}static fromUint8Array(e){const i=(function(o){let f="";for(let d=0;d<o.length;++d)f+=String.fromCharCode(o[d]);return f})(e);return new rn(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const s=new Uint8Array(i.length);for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const cb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ma(r){if(be(!!r,39018),typeof r=="string"){let e=0;const i=cb.exec(r);if(be(!!i,46558,{timestamp:r}),i[1]){let o=i[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ve(r.seconds),nanos:Ve(r.nanos)}}function Ve(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ka(r){return typeof r=="string"?rn.fromBase64String(r):rn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="server_timestamp",tv="__type__",ev="__previous_value__",nv="__local_write_time__";function cd(r){return(r?.mapValue?.fields||{})[tv]?.stringValue===W_}function oc(r){const e=r.mapValue.fields[ev];return cd(e)?oc(e):e}function lo(r){const e=Ma(r.mapValue.fields[nv].timestampValue);return new _e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,i,s,o,f,d,p,g,v,T){this.databaseId=e,this.appId=i,this.persistenceKey=s,this.host=o,this.ssl=f,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=v,this.isUsingEmulator=T}}const Zu="(default)";class oo{constructor(e,i){this.projectId=e,this.database=i||Zu}static empty(){return new oo("","")}get isDefaultDatabase(){return this.database===Zu}isEqual(e){return e instanceof oo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="__type__",hb="__max__",ku={mapValue:{}},av="__vector__",Ju="value";function za(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?cd(r)?4:mb(r)?9007199254740991:db(r)?10:11:Dt(28295,{value:r})}function Ai(r,e){if(r===e)return!0;const i=za(r);if(i!==za(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return lo(r).isEqual(lo(e));case 3:return(function(o,f){if(typeof o.timestampValue=="string"&&typeof f.timestampValue=="string"&&o.timestampValue.length===f.timestampValue.length)return o.timestampValue===f.timestampValue;const d=Ma(o.timestampValue),p=Ma(f.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,f){return ka(o.bytesValue).isEqual(ka(f.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,f){return Ve(o.geoPointValue.latitude)===Ve(f.geoPointValue.latitude)&&Ve(o.geoPointValue.longitude)===Ve(f.geoPointValue.longitude)})(r,e);case 2:return(function(o,f){if("integerValue"in o&&"integerValue"in f)return Ve(o.integerValue)===Ve(f.integerValue);if("doubleValue"in o&&"doubleValue"in f){const d=Ve(o.doubleValue),p=Ve(f.doubleValue);return d===p?Xu(d)===Xu(p):isNaN(d)&&isNaN(p)}return!1})(r,e);case 9:return Ns(r.arrayValue.values||[],e.arrayValue.values||[],Ai);case 10:case 11:return(function(o,f){const d=o.mapValue.fields||{},p=f.mapValue.fields||{};if(Oy(d)!==Oy(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!Ai(d[g],p[g])))return!1;return!0})(r,e);default:return Dt(52216,{left:r})}}function uo(r,e){return(r.values||[]).find((i=>Ai(i,e)))!==void 0}function Vs(r,e){if(r===e)return 0;const i=za(r),s=za(e);if(i!==s)return Pt(i,s);switch(i){case 0:case 9007199254740991:return 0;case 1:return Pt(r.booleanValue,e.booleanValue);case 2:return(function(f,d){const p=Ve(f.integerValue||f.doubleValue),g=Ve(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(r,e);case 3:return ky(r.timestampValue,e.timestampValue);case 4:return ky(lo(r),lo(e));case 5:return Uh(r.stringValue,e.stringValue);case 6:return(function(f,d){const p=ka(f),g=ka(d);return p.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(f,d){const p=f.split("/"),g=d.split("/");for(let v=0;v<p.length&&v<g.length;v++){const T=Pt(p[v],g[v]);if(T!==0)return T}return Pt(p.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(f,d){const p=Pt(Ve(f.latitude),Ve(d.latitude));return p!==0?p:Pt(Ve(f.longitude),Ve(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return zy(r.arrayValue,e.arrayValue);case 10:return(function(f,d){const p=f.fields||{},g=d.fields||{},v=p[Ju]?.arrayValue,T=g[Ju]?.arrayValue,A=Pt(v?.values?.length||0,T?.values?.length||0);return A!==0?A:zy(v,T)})(r.mapValue,e.mapValue);case 11:return(function(f,d){if(f===ku.mapValue&&d===ku.mapValue)return 0;if(f===ku.mapValue)return 1;if(d===ku.mapValue)return-1;const p=f.fields||{},g=Object.keys(p),v=d.fields||{},T=Object.keys(v);g.sort(),T.sort();for(let A=0;A<g.length&&A<T.length;++A){const M=Uh(g[A],T[A]);if(M!==0)return M;const F=Vs(p[g[A]],v[T[A]]);if(F!==0)return F}return Pt(g.length,T.length)})(r.mapValue,e.mapValue);default:throw Dt(23264,{he:i})}}function ky(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Pt(r,e);const i=Ma(r),s=Ma(e),o=Pt(i.seconds,s.seconds);return o!==0?o:Pt(i.nanos,s.nanos)}function zy(r,e){const i=r.values||[],s=e.values||[];for(let o=0;o<i.length&&o<s.length;++o){const f=Vs(i[o],s[o]);if(f)return f}return Pt(i.length,s.length)}function Is(r){return Lh(r)}function Lh(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(i){const s=Ma(i);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(i){return ka(i).toBase64()})(r.bytesValue):"referenceValue"in r?(function(i){return vt.fromName(i).toString()})(r.referenceValue):"geoPointValue"in r?(function(i){return`geo(${i.latitude},${i.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(i){let s="[",o=!0;for(const f of i.values||[])o?o=!1:s+=",",s+=Lh(f);return s+"]"})(r.arrayValue):"mapValue"in r?(function(i){const s=Object.keys(i.fields||{}).sort();let o="{",f=!0;for(const d of s)f?f=!1:o+=",",o+=`${d}:${Lh(i.fields[d])}`;return o+"}"})(r.mapValue):Dt(61005,{value:r})}function qu(r){switch(za(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=oc(r);return e?16+qu(e):16;case 5:return 2*r.stringValue.length;case 6:return ka(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,f)=>o+qu(f)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Ps(s.fields,((f,d)=>{o+=f.length+qu(d)})),o})(r.mapValue);default:throw Dt(13486,{value:r})}}function Uy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Ph(r){return!!r&&"integerValue"in r}function fd(r){return!!r&&"arrayValue"in r}function Ly(r){return!!r&&"nullValue"in r}function Py(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Sh(r){return!!r&&"mapValue"in r}function db(r){return(r?.mapValue?.fields||{})[iv]?.stringValue===av}function Jl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ps(r.mapValue.fields,((i,s)=>e.mapValue.fields[i]=Jl(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(r.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=Jl(r.arrayValue.values[i]);return e}return{...r}}function mb(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===hb}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.value=e}static empty(){return new vi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let s=0;s<e.length-1;++s)if(i=(i.mapValue.fields||{})[e.get(s)],!Sh(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jl(i)}setAll(e){let i=hn.emptyPath(),s={},o=[];e.forEach(((d,p)=>{if(!i.isImmediateParentOf(p)){const g=this.getFieldsMap(i);this.applyChanges(g,s,o),s={},o=[],i=p.popLast()}d?s[p.lastSegment()]=Jl(d):o.push(p.lastSegment())}));const f=this.getFieldsMap(i);this.applyChanges(f,s,o)}delete(e){const i=this.field(e.popLast());Sh(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return Ai(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=i.mapValue.fields[e.get(s)];Sh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},i.mapValue.fields[e.get(s)]=o),i=o}return i.mapValue.fields}applyChanges(e,i,s){Ps(i,((o,f)=>e[o]=f));for(const o of s)delete e[o]}clone(){return new vi(Jl(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,i,s,o,f,d,p){this.key=e,this.documentType=i,this.version=s,this.readTime=o,this.createTime=f,this.data=d,this.documentState=p}static newInvalidDocument(e){return new fn(e,0,Ct.min(),Ct.min(),Ct.min(),vi.empty(),0)}static newFoundDocument(e,i,s,o){return new fn(e,1,i,Ct.min(),s,o,0)}static newNoDocument(e,i){return new fn(e,2,i,Ct.min(),Ct.min(),vi.empty(),0)}static newUnknownDocument(e,i){return new fn(e,3,i,Ct.min(),Ct.min(),vi.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(Ct.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,i){this.position=e,this.inclusive=i}}function By(r,e,i){let s=0;for(let o=0;o<r.position.length;o++){const f=e[o],d=r.position[o];if(f.field.isKeyField()?s=vt.comparator(vt.fromName(d.referenceValue),i.key):s=Vs(d,i.data.field(f.field)),f.dir==="desc"&&(s*=-1),s!==0)break}return s}function qy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let i=0;i<r.position.length;i++)if(!Ai(r.position[i],e.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,i="asc"){this.field=e,this.dir=i}}function pb(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{}class Pe extends rv{constructor(e,i,s){super(),this.field=e,this.op=i,this.value=s}static create(e,i,s){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,s):new yb(e,i,s):i==="array-contains"?new Eb(e,s):i==="in"?new Tb(e,s):i==="not-in"?new bb(e,s):i==="array-contains-any"?new Ab(e,s):new Pe(e,i,s)}static createKeyFieldInFilter(e,i,s){return i==="in"?new _b(e,s):new vb(e,s)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(Vs(i,this.value)):i!==null&&za(this.value)===za(i)&&this.matchesComparison(Vs(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Dt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ii extends rv{constructor(e,i){super(),this.filters=e,this.op=i,this.Pe=null}static create(e,i){return new ii(e,i)}matches(e){return sv(this)?this.filters.find((i=>!i.matches(e)))===void 0:this.filters.find((i=>i.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,i)=>e.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sv(r){return r.op==="and"}function lv(r){return gb(r)&&sv(r)}function gb(r){for(const e of r.filters)if(e instanceof ii)return!1;return!0}function Bh(r){if(r instanceof Pe)return r.field.canonicalString()+r.op.toString()+Is(r.value);if(lv(r))return r.filters.map((e=>Bh(e))).join(",");{const e=r.filters.map((i=>Bh(i))).join(",");return`${r.op}(${e})`}}function ov(r,e){return r instanceof Pe?(function(s,o){return o instanceof Pe&&s.op===o.op&&s.field.isEqual(o.field)&&Ai(s.value,o.value)})(r,e):r instanceof ii?(function(s,o){return o instanceof ii&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((f,d,p)=>f&&ov(d,o.filters[p])),!0):!1})(r,e):void Dt(19439)}function uv(r){return r instanceof Pe?(function(i){return`${i.field.canonicalString()} ${i.op} ${Is(i.value)}`})(r):r instanceof ii?(function(i){return i.op.toString()+" {"+i.getFilters().map(uv).join(" ,")+"}"})(r):"Filter"}class yb extends Pe{constructor(e,i,s){super(e,i,s),this.key=vt.fromName(s.referenceValue)}matches(e){const i=vt.comparator(e.key,this.key);return this.matchesComparison(i)}}class _b extends Pe{constructor(e,i){super(e,"in",i),this.keys=cv("in",i)}matches(e){return this.keys.some((i=>i.isEqual(e.key)))}}class vb extends Pe{constructor(e,i){super(e,"not-in",i),this.keys=cv("not-in",i)}matches(e){return!this.keys.some((i=>i.isEqual(e.key)))}}function cv(r,e){return(e.arrayValue?.values||[]).map((i=>vt.fromName(i.referenceValue)))}class Eb extends Pe{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return fd(i)&&uo(i.arrayValue,this.value)}}class Tb extends Pe{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&uo(this.value.arrayValue,i)}}class bb extends Pe{constructor(e,i){super(e,"not-in",i)}matches(e){if(uo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&i.nullValue===void 0&&!uo(this.value.arrayValue,i)}}class Ab extends Pe{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!fd(i)||!i.arrayValue.values)&&i.arrayValue.values.some((s=>uo(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,i=null,s=[],o=[],f=null,d=null,p=null){this.path=e,this.collectionGroup=i,this.orderBy=s,this.filters=o,this.limit=f,this.startAt=d,this.endAt=p,this.Te=null}}function jy(r,e=null,i=[],s=[],o=null,f=null,d=null){return new Sb(r,e,i,s,o,f,d)}function hd(r){const e=Ht(r);if(e.Te===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map((s=>Bh(s))).join(","),i+="|ob:",i+=e.orderBy.map((s=>(function(f){return f.field.canonicalString()+f.dir})(s))).join(","),lc(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((s=>Is(s))).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((s=>Is(s))).join(",")),e.Te=i}return e.Te}function dd(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!pb(r.orderBy[i],e.orderBy[i]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if(!ov(r.filters[i],e.filters[i]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!qy(r.startAt,e.startAt)&&qy(r.endAt,e.endAt)}function qh(r){return vt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,i=null,s=[],o=[],f=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=s,this.filters=o,this.limit=f,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function wb(r,e,i,s,o,f,d,p){return new Bs(r,e,i,s,o,f,d,p)}function md(r){return new Bs(r)}function Fy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function fv(r){return r.collectionGroup!==null}function Wl(r){const e=Ht(r);if(e.Ie===null){e.Ie=[];const i=new Set;for(const f of e.explicitOrderBy)e.Ie.push(f),i.add(f.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new He(hn.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((v=>{v.isInequality()&&(p=p.add(v.field))}))})),p})(e).forEach((f=>{i.has(f.canonicalString())||f.isKeyField()||e.Ie.push(new co(f,s))})),i.has(hn.keyField().canonicalString())||e.Ie.push(new co(hn.keyField(),s))}return e.Ie}function Ei(r){const e=Ht(r);return e.Ee||(e.Ee=Rb(e,Wl(r))),e.Ee}function Rb(r,e){if(r.limitType==="F")return jy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const f=o.dir==="desc"?"asc":"desc";return new co(o.field,f)}));const i=r.endAt?new Wu(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Wu(r.startAt.position,r.startAt.inclusive):null;return jy(r.path,r.collectionGroup,e,r.filters,r.limit,i,s)}}function jh(r,e){const i=r.filters.concat([e]);return new Bs(r.path,r.collectionGroup,r.explicitOrderBy.slice(),i,r.limit,r.limitType,r.startAt,r.endAt)}function Fh(r,e,i){return new Bs(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,i,r.startAt,r.endAt)}function uc(r,e){return dd(Ei(r),Ei(e))&&r.limitType===e.limitType}function hv(r){return`${hd(Ei(r))}|lt:${r.limitType}`}function vs(r){return`Query(target=${(function(i){let s=i.path.canonicalString();return i.collectionGroup!==null&&(s+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(s+=`, filters: [${i.filters.map((o=>uv(o))).join(", ")}]`),lc(i.limit)||(s+=", limit: "+i.limit),i.orderBy.length>0&&(s+=`, orderBy: [${i.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),i.startAt&&(s+=", startAt: ",s+=i.startAt.inclusive?"b:":"a:",s+=i.startAt.position.map((o=>Is(o))).join(",")),i.endAt&&(s+=", endAt: ",s+=i.endAt.inclusive?"a:":"b:",s+=i.endAt.position.map((o=>Is(o))).join(",")),`Target(${s})`})(Ei(r))}; limitType=${r.limitType})`}function cc(r,e){return e.isFoundDocument()&&(function(s,o){const f=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(f):vt.isDocumentKey(s.path)?s.path.isEqual(f):s.path.isImmediateParentOf(f)})(r,e)&&(function(s,o){for(const f of Wl(s))if(!f.field.isKeyField()&&o.data.field(f.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const f of s.filters)if(!f.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(d,p,g){const v=By(d,p,g);return d.inclusive?v<=0:v<0})(s.startAt,Wl(s),o)||s.endAt&&!(function(d,p,g){const v=By(d,p,g);return d.inclusive?v>=0:v>0})(s.endAt,Wl(s),o))})(r,e)}function Cb(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function dv(r){return(e,i)=>{let s=!1;for(const o of Wl(r)){const f=Db(o,e,i);if(f!==0)return f;s=s||o.field.isKeyField()}return 0}}function Db(r,e,i){const s=r.field.isKeyField()?vt.comparator(e.key,i.key):(function(f,d,p){const g=d.data.field(f),v=p.data.field(f);return g!==null&&v!==null?Vs(g,v):Dt(42886)})(r.field,e,i);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Dt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),s=this.inner[i];if(s!==void 0){for(const[o,f]of s)if(this.equalsFn(o,e))return f}}has(e){return this.get(e)!==void 0}set(e,i){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,i]],void this.innerSize++;for(let f=0;f<o.length;f++)if(this.equalsFn(o[f][0],e))return void(o[f]=[e,i]);o.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[i]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ps(this.inner,((i,s)=>{for(const[o,f]of s)e(o,f)}))}isEmpty(){return Z_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=new Ie(vt.comparator);function Ua(){return xb}const mv=new Ie(vt.comparator);function Kl(...r){let e=mv;for(const i of r)e=e.insert(i.key,i);return e}function Nb(r){let e=mv;return r.forEach(((i,s)=>e=e.insert(i,s.overlayedDocument))),e}function Ar(){return to()}function pv(){return to()}function to(){return new Cr((r=>r.toString()),((r,e)=>r.isEqual(e)))}const Vb=new He(vt.comparator);function Yt(...r){let e=Vb;for(const i of r)e=e.add(i);return e}const Ib=new He(Pt);function Ob(){return Ib}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xu(e)?"-0":e}}function gv(r){return{integerValue:""+r}}function Mb(r,e){return lb(e)?gv(e):pd(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(){this._=void 0}}function kb(r,e,i){return r instanceof Hh?(function(o,f){const d={fields:{[tv]:{stringValue:W_},[nv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return f&&cd(f)&&(f=oc(f)),f&&(d.fields[ev]=f),{mapValue:d}})(i,e):r instanceof tc?yv(r,e):r instanceof ec?_v(r,e):(function(o,f){const d=Ub(o,f),p=Hy(d)+Hy(o.Ae);return Ph(d)&&Ph(o.Ae)?gv(p):pd(o.serializer,p)})(r,e)}function zb(r,e,i){return r instanceof tc?yv(r,e):r instanceof ec?_v(r,e):i}function Ub(r,e){return r instanceof Gh?(function(s){return Ph(s)||(function(f){return!!f&&"doubleValue"in f})(s)})(e)?e:{integerValue:0}:null}class Hh extends fc{}class tc extends fc{constructor(e){super(),this.elements=e}}function yv(r,e){const i=vv(e);for(const s of r.elements)i.some((o=>Ai(o,s)))||i.push(s);return{arrayValue:{values:i}}}class ec extends fc{constructor(e){super(),this.elements=e}}function _v(r,e){let i=vv(e);for(const s of r.elements)i=i.filter((o=>!Ai(o,s)));return{arrayValue:{values:i}}}class Gh extends fc{constructor(e,i){super(),this.serializer=e,this.Ae=i}}function Hy(r){return Ve(r.integerValue||r.doubleValue)}function vv(r){return fd(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function Lb(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof tc&&o instanceof tc||s instanceof ec&&o instanceof ec?Ns(s.elements,o.elements,Ai):s instanceof Gh&&o instanceof Gh?Ai(s.Ae,o.Ae):s instanceof Hh&&o instanceof Hh})(r.transform,e.transform)}class Sr{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new Sr}static exists(e){return new Sr(void 0,e)}static updateTime(e){return new Sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ju(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class gd{}function Ev(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Bb(r.key,Sr.none()):new yd(r.key,r.data,Sr.none());{const i=r.data,s=vi.empty();let o=new He(hn.comparator);for(let f of e.fields)if(!o.has(f)){let d=i.field(f);d===null&&f.length>1&&(f=f.popLast(),d=i.field(f)),d===null?s.delete(f):s.set(f,d),o=o.add(f)}return new hc(r.key,s,new Da(o.toArray()),Sr.none())}}function Pb(r,e,i){r instanceof yd?(function(o,f,d){const p=o.value.clone(),g=Qy(o.fieldTransforms,f,d.transformResults);p.setAll(g),f.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(r,e,i):r instanceof hc?(function(o,f,d){if(!ju(o.precondition,f))return void f.convertToUnknownDocument(d.version);const p=Qy(o.fieldTransforms,f,d.transformResults),g=f.data;g.setAll(Tv(o)),g.setAll(p),f.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,i):(function(o,f,d){f.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,i)}function eo(r,e,i,s){return r instanceof yd?(function(f,d,p,g){if(!ju(f.precondition,d))return p;const v=f.value.clone(),T=Yy(f.fieldTransforms,g,d);return v.setAll(T),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null})(r,e,i,s):r instanceof hc?(function(f,d,p,g){if(!ju(f.precondition,d))return p;const v=Yy(f.fieldTransforms,g,d),T=d.data;return T.setAll(Tv(f)),T.setAll(v),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),p===null?null:p.unionWith(f.fieldMask.fields).unionWith(f.fieldTransforms.map((A=>A.field)))})(r,e,i,s):(function(f,d,p){return ju(f.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(r,e,i)}function Gy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Ns(s,o,((f,d)=>Lb(f,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class yd extends gd{constructor(e,i,s,o=[]){super(),this.key=e,this.value=i,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class hc extends gd{constructor(e,i,s,o,f=[]){super(),this.key=e,this.data=i,this.fieldMask=s,this.precondition=o,this.fieldTransforms=f,this.type=1}getFieldMask(){return this.fieldMask}}function Tv(r){const e=new Map;return r.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const s=r.data.field(i);e.set(i,s)}})),e}function Qy(r,e,i){const s=new Map;be(r.length===i.length,32656,{Re:i.length,Ve:r.length});for(let o=0;o<i.length;o++){const f=r[o],d=f.transform,p=e.data.field(f.field);s.set(f.field,zb(d,p,i[o]))}return s}function Yy(r,e,i){const s=new Map;for(const o of r){const f=o.transform,d=i.data.field(o.field);s.set(o.field,kb(f,d,e))}return s}class Bb extends gd{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,i,s,o){this.batchId=e,this.localWriteTime=i,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,i){const s=i.mutationResults;for(let o=0;o<this.mutations.length;o++){const f=this.mutations[o];f.key.isEqual(e.key)&&Pb(f,e,s[o])}}applyToLocalView(e,i){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(i=eo(s,e,i,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(i=eo(s,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const s=pv();return this.mutations.forEach((o=>{const f=e.get(o.key),d=f.overlayedDocument;let p=this.applyToLocalView(d,f.mutatedFields);p=i.has(o.key)?null:p;const g=Ev(d,p);g!==null&&s.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Ct.min())})),s}keys(){return this.mutations.reduce(((e,i)=>e.add(i.key)),Yt())}isEqual(e){return this.batchId===e.batchId&&Ns(this.mutations,e.mutations,((i,s)=>Gy(i,s)))&&Ns(this.baseMutations,e.baseMutations,((i,s)=>Gy(i,s)))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,i){this.count=e,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le,jt;function bv(r){if(r===void 0)return Qi("GRPC error has no .code"),nt.UNKNOWN;switch(r){case Le.OK:return nt.OK;case Le.CANCELLED:return nt.CANCELLED;case Le.UNKNOWN:return nt.UNKNOWN;case Le.DEADLINE_EXCEEDED:return nt.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return nt.RESOURCE_EXHAUSTED;case Le.INTERNAL:return nt.INTERNAL;case Le.UNAVAILABLE:return nt.UNAVAILABLE;case Le.UNAUTHENTICATED:return nt.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return nt.INVALID_ARGUMENT;case Le.NOT_FOUND:return nt.NOT_FOUND;case Le.ALREADY_EXISTS:return nt.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return nt.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return nt.FAILED_PRECONDITION;case Le.ABORTED:return nt.ABORTED;case Le.OUT_OF_RANGE:return nt.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return nt.UNIMPLEMENTED;case Le.DATA_LOSS:return nt.DATA_LOSS;default:return Dt(39323,{code:r})}}(jt=Le||(Le={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=new Ia([4294967295,4294967295],0);function Ky(r){const e=Hb().encode(r),i=new B_;return i.update(e),new Uint8Array(i.digest())}function $y(r){const e=new DataView(r.buffer),i=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),f=e.getUint32(12,!0);return[new Ia([i,s],0),new Ia([o,f],0)]}class _d{constructor(e,i,s){if(this.bitmap=e,this.padding=i,this.hashCount=s,i<0||i>=8)throw new $l(`Invalid padding: ${i}`);if(s<0)throw new $l(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new $l(`Invalid hash count: ${s}`);if(e.length===0&&i!==0)throw new $l(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*e.length-i,this.pe=Ia.fromNumber(this.ge)}ye(e,i,s){let o=e.add(i.multiply(Ia.fromNumber(s)));return o.compare(Gb)===1&&(o=new Ia([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const i=Ky(e),[s,o]=$y(i);for(let f=0;f<this.hashCount;f++){const d=this.ye(s,o,f);if(!this.we(d))return!1}return!0}static create(e,i,s){const o=e%8==0?0:8-e%8,f=new Uint8Array(Math.ceil(e/8)),d=new _d(f,o,i);return s.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const i=Ky(e),[s,o]=$y(i);for(let f=0;f<this.hashCount;f++){const d=this.ye(s,o,f);this.Se(d)}}Se(e){const i=Math.floor(e/8),s=e%8;this.bitmap[i]|=1<<s}}class $l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,i,s,o,f){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=f}static createSynthesizedRemoteEventForCurrentChange(e,i,s){const o=new Map;return o.set(e,ho.createSynthesizedTargetChangeForCurrentChange(e,i,s)),new dc(Ct.min(),o,new Ie(Pt),Ua(),Yt())}}class ho{constructor(e,i,s,o,f){this.resumeToken=e,this.current=i,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=f}static createSynthesizedTargetChangeForCurrentChange(e,i,s){return new ho(s,i,Yt(),Yt(),Yt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,i,s,o){this.be=e,this.removedTargetIds=i,this.key=s,this.De=o}}class Av{constructor(e,i){this.targetId=e,this.Ce=i}}class Sv{constructor(e,i,s=rn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=i,this.resumeToken=s,this.cause=o}}class Xy{constructor(){this.ve=0,this.Fe=Zy(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Yt(),i=Yt(),s=Yt();return this.Fe.forEach(((o,f)=>{switch(f){case 0:e=e.add(o);break;case 2:i=i.add(o);break;case 1:s=s.add(o);break;default:Dt(38017,{changeType:f})}})),new ho(this.Me,this.xe,e,i,s)}qe(){this.Oe=!1,this.Fe=Zy()}Qe(e,i){this.Oe=!0,this.Fe=this.Fe.insert(e,i)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,be(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Qb{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ua(),this.Je=zu(),this.He=zu(),this.Ye=new Ie(Pt)}Ze(e){for(const i of e.be)e.De&&e.De.isFoundDocument()?this.Xe(i,e.De):this.et(i,e.key,e.De);for(const i of e.removedTargetIds)this.et(i,e.key,e.De)}tt(e){this.forEachTarget(e,(i=>{const s=this.nt(i);switch(e.state){case 0:this.rt(i)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(i)&&(this.it(i),s.Le(e.resumeToken));break;default:Dt(56790,{state:e.state})}}))}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.ze.forEach(((s,o)=>{this.rt(o)&&i(o)}))}st(e){const i=e.targetId,s=e.Ce.count,o=this.ot(i);if(o){const f=o.target;if(qh(f))if(s===0){const d=new vt(f.path);this.et(i,d,fn.newNoDocument(d,Ct.min()))}else be(s===1,20013,{expectedCount:s});else{const d=this._t(i);if(d!==s){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(i);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,v)}}}}}ut(e){const i=e.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:f=0}=i;let d,p;try{d=ka(s).toUint8Array()}catch(g){if(g instanceof J_)return xs("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new _d(d,o,f)}catch(g){return xs(g instanceof $l?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,i,s){return i.Ce.count===s-this.Pt(e,i.targetId)?0:2}Pt(e,i){const s=this.Ge.getRemoteKeysForTarget(i);let o=0;return s.forEach((f=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${f.path.canonicalString()}`;e.mightContain(p)||(this.et(i,f,null),o++)})),o}Tt(e){const i=new Map;this.ze.forEach(((f,d)=>{const p=this.ot(d);if(p){if(f.current&&qh(p.target)){const g=new vt(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,fn.newNoDocument(g,e))}f.Be&&(i.set(d,f.ke()),f.qe())}}));let s=Yt();this.He.forEach(((f,d)=>{let p=!0;d.forEachWhile((g=>{const v=this.ot(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(f))})),this.je.forEach(((f,d)=>d.setReadTime(e)));const o=new dc(e,i,this.Ye,this.je,s);return this.je=Ua(),this.Je=zu(),this.He=zu(),this.Ye=new Ie(Pt),o}Xe(e,i){if(!this.rt(e))return;const s=this.Et(e,i.key)?2:0;this.nt(e).Qe(i.key,s),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(e)),this.He=this.He.insert(i.key,this.dt(i.key).add(e))}et(e,i,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,i)?o.Qe(i,1):o.$e(i),this.He=this.He.insert(i,this.dt(i).delete(e)),this.He=this.He.insert(i,this.dt(i).add(e)),s&&(this.je=this.je.insert(i,s))}removeTarget(e){this.ze.delete(e)}_t(e){const i=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let i=this.ze.get(e);return i||(i=new Xy,this.ze.set(e,i)),i}dt(e){let i=this.He.get(e);return i||(i=new He(Pt),this.He=this.He.insert(e,i)),i}It(e){let i=this.Je.get(e);return i||(i=new He(Pt),this.Je=this.Je.insert(e,i)),i}rt(e){const i=this.ot(e)!==null;return i||ft("WatchChangeAggregator","Detected inactive target",e),i}ot(e){const i=this.ze.get(e);return i&&i.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Xy),this.Ge.getRemoteKeysForTarget(e).forEach((i=>{this.et(e,i,null)}))}Et(e,i){return this.Ge.getRemoteKeysForTarget(e).has(i)}}function zu(){return new Ie(vt.comparator)}function Zy(){return new Ie(vt.comparator)}const Yb={asc:"ASCENDING",desc:"DESCENDING"},Kb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$b={and:"AND",or:"OR"};class Xb{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function Qh(r,e){return r.useProto3Json||lc(e)?e:{value:e}}function Yh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function ws(r){return be(!!r,49232),Ct.fromTimestamp((function(i){const s=Ma(i);return new _e(s.seconds,s.nanos)})(r))}function Rv(r,e){return Kh(r,e).canonicalString()}function Kh(r,e){const i=(function(o){return new ye(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?i:i.child(e)}function Cv(r){const e=ye.fromString(r);return be(Iv(e),10190,{key:e.toString()}),e}function wh(r,e){const i=Cv(e);if(i.get(1)!==r.databaseId.projectId)throw new ht(nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+r.databaseId.projectId);if(i.get(3)!==r.databaseId.database)throw new ht(nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+r.databaseId.database);return new vt(xv(i))}function Dv(r,e){return Rv(r.databaseId,e)}function Zb(r){const e=Cv(r);return e.length===4?ye.emptyPath():xv(e)}function Jy(r){return new ye(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function xv(r){return be(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Jb(r,e){let i;if("targetChange"in e){e.targetChange;const s=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Dt(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],f=(function(v,T){return v.useProto3Json?(be(T===void 0||typeof T=="string",58123),rn.fromBase64String(T||"")):(be(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),rn.fromUint8Array(T||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(v){const T=v.code===void 0?nt.UNKNOWN:bv(v.code);return new ht(T,v.message||"")})(d);i=new Sv(s,o,f,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=wh(r,s.document.name),f=ws(s.document.updateTime),d=s.document.createTime?ws(s.document.createTime):Ct.min(),p=new vi({mapValue:{fields:s.document.fields}}),g=fn.newFoundDocument(o,f,d,p),v=s.targetIds||[],T=s.removedTargetIds||[];i=new Fu(v,T,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=wh(r,s.document),f=s.readTime?ws(s.readTime):Ct.min(),d=fn.newNoDocument(o,f),p=s.removedTargetIds||[];i=new Fu([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=wh(r,s.document),f=s.removedTargetIds||[];i=new Fu([],f,o,null)}else{if(!("filter"in e))return Dt(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:f}=s,d=new Fb(o,f),p=s.targetId;i=new Av(p,d)}}return i}function Wb(r,e){return{documents:[Dv(r,e.path)]}}function tA(r,e){const i={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),i.structuredQuery.from=[{collectionId:s.lastSegment()}]),i.parent=Dv(r,o);const f=(function(v){if(v.length!==0)return Vv(ii.create(v,"and"))})(e.filters);f&&(i.structuredQuery.where=f);const d=(function(v){if(v.length!==0)return v.map((T=>(function(M){return{field:Es(M.field),direction:iA(M.dir)}})(T)))})(e.orderBy);d&&(i.structuredQuery.orderBy=d);const p=Qh(r,e.limit);return p!==null&&(i.structuredQuery.limit=p),e.startAt&&(i.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(i.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:i,parent:o}}function eA(r){let e=Zb(r.parent);const i=r.structuredQuery,s=i.from?i.from.length:0;let o=null;if(s>0){be(s===1,65062);const T=i.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let f=[];i.where&&(f=(function(A){const M=Nv(A);return M instanceof ii&&lv(M)?M.getFilters():[M]})(i.where));let d=[];i.orderBy&&(d=(function(A){return A.map((M=>(function(at){return new co(Ts(at.field),(function(it){switch(it){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(at.direction))})(M)))})(i.orderBy));let p=null;i.limit&&(p=(function(A){let M;return M=typeof A=="object"?A.value:A,lc(M)?null:M})(i.limit));let g=null;i.startAt&&(g=(function(A){const M=!!A.before,F=A.values||[];return new Wu(F,M)})(i.startAt));let v=null;return i.endAt&&(v=(function(A){const M=!A.before,F=A.values||[];return new Wu(F,M)})(i.endAt)),wb(e,o,d,f,p,"F",g,v)}function nA(r,e){const i=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dt(28987,{purpose:o})}})(e.purpose);return i==null?null:{"goog-listen-tags":i}}function Nv(r){return r.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const s=Ts(i.unaryFilter.field);return Pe.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Ts(i.unaryFilter.field);return Pe.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const f=Ts(i.unaryFilter.field);return Pe.create(f,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ts(i.unaryFilter.field);return Pe.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Dt(61313);default:return Dt(60726)}})(r):r.fieldFilter!==void 0?(function(i){return Pe.create(Ts(i.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Dt(58110);default:return Dt(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(i){return ii.create(i.compositeFilter.filters.map((s=>Nv(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Dt(1026)}})(i.compositeFilter.op))})(r):Dt(30097,{filter:r})}function iA(r){return Yb[r]}function aA(r){return Kb[r]}function rA(r){return $b[r]}function Es(r){return{fieldPath:r.canonicalString()}}function Ts(r){return hn.fromServerFormat(r.fieldPath)}function Vv(r){return r instanceof Pe?(function(i){if(i.op==="=="){if(Py(i.value))return{unaryFilter:{field:Es(i.field),op:"IS_NAN"}};if(Ly(i.value))return{unaryFilter:{field:Es(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(Py(i.value))return{unaryFilter:{field:Es(i.field),op:"IS_NOT_NAN"}};if(Ly(i.value))return{unaryFilter:{field:Es(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Es(i.field),op:aA(i.op),value:i.value}}})(r):r instanceof ii?(function(i){const s=i.getFilters().map((o=>Vv(o)));return s.length===1?s[0]:{compositeFilter:{op:rA(i.op),filters:s}}})(r):Dt(54877,{filter:r})}function Iv(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,i,s,o,f=Ct.min(),d=Ct.min(),p=rn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=i,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=f,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new xa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.yt=e}}function lA(r){const e=eA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Fh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this.Cn=new uA}addToCollectionParentIndex(e,i){return this.Cn.add(i),Z.resolve()}getCollectionParents(e,i){return Z.resolve(this.Cn.getEntries(i))}addFieldIndex(e,i){return Z.resolve()}deleteFieldIndex(e,i){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,i){return Z.resolve()}getDocumentsMatchingTarget(e,i){return Z.resolve(null)}getIndexType(e,i){return Z.resolve(0)}getFieldIndexes(e,i){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,i){return Z.resolve(Oa.min())}getMinOffsetFromCollectionGroup(e,i){return Z.resolve(Oa.min())}updateCollectionGroup(e,i,s){return Z.resolve()}updateIndexEntries(e,i){return Z.resolve()}}class uA{constructor(){this.index={}}add(e){const i=e.lastSegment(),s=e.popLast(),o=this.index[i]||new He(ye.comparator),f=!o.has(s);return this.index[i]=o.add(s),f}has(e){const i=e.lastSegment(),s=e.popLast(),o=this.index[i];return o&&o.has(s)}getEntries(e){return(this.index[e]||new He(ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ov=41943040;class wn{static withCacheSize(e){return new wn(e,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(Ov,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Os(0)}static cr(){return new Os(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="LruGarbageCollector",cA=1048576;function e_([r,e],[i,s]){const o=Pt(r,i);return o===0?Pt(e,s):o}class fA{constructor(e){this.Ir=e,this.buffer=new He(e_),this.Er=0}dr(){return++this.Er}Ar(e){const i=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const s=this.buffer.last();e_(i,s)<0&&(this.buffer=this.buffer.delete(s).add(i))}}get maxValue(){return this.buffer.last()[0]}}class hA{constructor(e,i,s){this.garbageCollector=e,this.asyncQueue=i,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ft(t_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){Ls(i)?ft(t_,"Ignoring IndexedDB error during garbage collection: ",i):await rc(i)}await this.Vr(3e5)}))}}class dA{constructor(e,i){this.mr=e,this.params=i}calculateTargetCount(e,i){return this.mr.gr(e).next((s=>Math.floor(i/100*s)))}nthSequenceNumber(e,i){if(i===0)return Z.resolve(sc.ce);const s=new fA(i);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,i,s){return this.mr.removeTargets(e,i,s)}removeOrphanedDocuments(e,i){return this.mr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(ft("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(Wy)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wy):this.yr(e,i)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,i){let s,o,f,d,p,g,v;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(ft("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,d=Date.now(),this.nthSequenceNumber(e,o)))).next((A=>(s=A,p=Date.now(),this.removeTargets(e,s,i)))).next((A=>(f=A,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((A=>(v=Date.now(),_s()<=Ft.DEBUG&&ft("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${f} targets in `+(g-p)+`ms
	Removed ${A} documents in `+(v-g)+`ms
Total Duration: ${v-T}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:f,documentsRemoved:A}))))}}function mA(r,e){return new dA(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.changes=new Cr((e=>e.toString()),((e,i)=>e.isEqual(i))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const s=this.changes.get(i);return s!==void 0?Z.resolve(s):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,i,s,o){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,i){let s=null;return this.documentOverlayCache.getOverlay(e,i).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,i)))).next((o=>(s!==null&&eo(s.mutation,o,Da.empty(),_e.now()),o)))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next((s=>this.getLocalViewOfDocuments(e,s,Yt()).next((()=>s))))}getLocalViewOfDocuments(e,i,s=Yt()){const o=Ar();return this.populateOverlays(e,o,i).next((()=>this.computeViews(e,i,o,s).next((f=>{let d=Kl();return f.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,i){const s=Ar();return this.populateOverlays(e,s,i).next((()=>this.computeViews(e,i,s,Yt())))}populateOverlays(e,i,s){const o=[];return s.forEach((f=>{i.has(f)||o.push(f)})),this.documentOverlayCache.getOverlays(e,o).next((f=>{f.forEach(((d,p)=>{i.set(d,p)}))}))}computeViews(e,i,s,o){let f=Ua();const d=to(),p=(function(){return to()})();return i.forEach(((g,v)=>{const T=s.get(v.key);o.has(v.key)&&(T===void 0||T.mutation instanceof hc)?f=f.insert(v.key,v):T!==void 0?(d.set(v.key,T.mutation.getFieldMask()),eo(T.mutation,v,T.mutation.getFieldMask(),_e.now())):d.set(v.key,Da.empty())})),this.recalculateAndSaveOverlays(e,f).next((g=>(g.forEach(((v,T)=>d.set(v,T))),i.forEach(((v,T)=>p.set(v,new gA(T,d.get(v)??null)))),p)))}recalculateAndSaveOverlays(e,i){const s=to();let o=new Ie(((d,p)=>d-p)),f=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next((d=>{for(const p of d)p.keys().forEach((g=>{const v=i.get(g);if(v===null)return;let T=s.get(g)||Da.empty();T=p.applyToLocalView(v,T),s.set(g,T);const A=(o.get(p.batchId)||Yt()).add(g);o=o.insert(p.batchId,A)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),v=g.key,T=g.value,A=pv();T.forEach((M=>{if(!f.has(M)){const F=Ev(i.get(M),s.get(M));F!==null&&A.set(M,F),f=f.add(M)}})),d.push(this.documentOverlayCache.saveOverlays(e,v,A))}return Z.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,i,s,o){return(function(d){return vt.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):fv(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,s,o):this.getDocumentsMatchingCollectionQuery(e,i,s,o)}getNextDocuments(e,i,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,s,o).next((f=>{const d=o-f.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,s.largestBatchId,o-f.size):Z.resolve(Ar());let p=so,g=f;return d.next((v=>Z.forEach(v,((T,A)=>(p<A.largestBatchId&&(p=A.largestBatchId),f.get(T)?Z.resolve():this.remoteDocumentCache.getEntry(e,T).next((M=>{g=g.insert(T,M)}))))).next((()=>this.populateOverlays(e,v,f))).next((()=>this.computeViews(e,g,v,Yt()))).next((T=>({batchId:p,changes:Nb(T)})))))}))}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new vt(i)).next((s=>{let o=Kl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,i,s,o){const f=i.collectionGroup;let d=Kl();return this.indexManager.getCollectionParents(e,f).next((p=>Z.forEach(p,(g=>{const v=(function(A,M){return new Bs(M,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(i,g.child(f));return this.getDocumentsMatchingCollectionQuery(e,v,s,o).next((T=>{T.forEach(((A,M)=>{d=d.insert(A,M)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,i,s,o){let f;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,s.largestBatchId).next((d=>(f=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,s,f,o)))).next((d=>{f.forEach(((g,v)=>{const T=v.getKey();d.get(T)===null&&(d=d.insert(T,fn.newInvalidDocument(T)))}));let p=Kl();return d.forEach(((g,v)=>{const T=f.get(g);T!==void 0&&eo(T.mutation,v,Da.empty(),_e.now()),cc(i,v)&&(p=p.insert(g,v))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,i){return Z.resolve(this.Lr.get(i))}saveBundleMetadata(e,i){return this.Lr.set(i.id,(function(o){return{id:o.id,version:o.version,createTime:ws(o.createTime)}})(i)),Z.resolve()}getNamedQuery(e,i){return Z.resolve(this.kr.get(i))}saveNamedQuery(e,i){return this.kr.set(i.name,(function(o){return{name:o.name,query:lA(o.bundledQuery),readTime:ws(o.readTime)}})(i)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(){this.overlays=new Ie(vt.comparator),this.qr=new Map}getOverlay(e,i){return Z.resolve(this.overlays.get(i))}getOverlays(e,i){const s=Ar();return Z.forEach(i,(o=>this.getOverlay(e,o).next((f=>{f!==null&&s.set(o,f)})))).next((()=>s))}saveOverlays(e,i,s){return s.forEach(((o,f)=>{this.St(e,i,f)})),Z.resolve()}removeOverlaysForBatchId(e,i,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((f=>this.overlays=this.overlays.remove(f))),this.qr.delete(s)),Z.resolve()}getOverlaysForCollection(e,i,s){const o=Ar(),f=i.length+1,d=new vt(i.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,v=g.getKey();if(!i.isPrefixOf(v.path))break;v.path.length===f&&g.largestBatchId>s&&o.set(g.getKey(),g)}return Z.resolve(o)}getOverlaysForCollectionGroup(e,i,s,o){let f=new Ie(((v,T)=>v-T));const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===i&&v.largestBatchId>s){let T=f.get(v.largestBatchId);T===null&&(T=Ar(),f=f.insert(v.largestBatchId,T)),T.set(v.getKey(),v)}}const p=Ar(),g=f.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((v,T)=>p.set(v,T))),!(p.size()>=o)););return Z.resolve(p)}St(e,i,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new jb(i,s));let f=this.qr.get(i);f===void 0&&(f=Yt(),this.qr.set(i,f)),this.qr.set(i,f.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(){this.Qr=new He(Xe.$r),this.Ur=new He(Xe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,i){const s=new Xe(e,i);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,i){e.forEach((s=>this.addReference(s,i)))}removeReference(e,i){this.Gr(new Xe(e,i))}zr(e,i){e.forEach((s=>this.removeReference(s,i)))}jr(e){const i=new vt(new ye([])),s=new Xe(i,e),o=new Xe(i,e+1),f=[];return this.Ur.forEachInRange([s,o],(d=>{this.Gr(d),f.push(d.key)})),f}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const i=new vt(new ye([])),s=new Xe(i,e),o=new Xe(i,e+1);let f=Yt();return this.Ur.forEachInRange([s,o],(d=>{f=f.add(d.key)})),f}containsKey(e){const i=new Xe(e,0),s=this.Qr.firstAfterOrEqual(i);return s!==null&&e.isEqual(s.key)}}class Xe{constructor(e,i){this.key=e,this.Yr=i}static $r(e,i){return vt.comparator(e.key,i.key)||Pt(e.Yr,i.Yr)}static Kr(e,i){return Pt(e.Yr,i.Yr)||vt.comparator(e.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new He(Xe.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,s,o){const f=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new qb(f,i,s,o);this.mutationQueue.push(d);for(const p of o)this.Zr=this.Zr.add(new Xe(p.key,f)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return Z.resolve(d)}lookupMutationBatch(e,i){return Z.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(e,i){const s=i+1,o=this.ei(s),f=o<0?0:o;return Z.resolve(this.mutationQueue.length>f?this.mutationQueue[f]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?sb:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const s=new Xe(i,0),o=new Xe(i,Number.POSITIVE_INFINITY),f=[];return this.Zr.forEachInRange([s,o],(d=>{const p=this.Xr(d.Yr);f.push(p)})),Z.resolve(f)}getAllMutationBatchesAffectingDocumentKeys(e,i){let s=new He(Pt);return i.forEach((o=>{const f=new Xe(o,0),d=new Xe(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([f,d],(p=>{s=s.add(p.Yr)}))})),Z.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,i){const s=i.path,o=s.length+1;let f=s;vt.isDocumentKey(f)||(f=f.child(""));const d=new Xe(new vt(f),0);let p=new He(Pt);return this.Zr.forEachWhile((g=>{const v=g.key.path;return!!s.isPrefixOf(v)&&(v.length===o&&(p=p.add(g.Yr)),!0)}),d),Z.resolve(this.ti(p))}ti(e){const i=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&i.push(o)})),i}removeMutationBatch(e,i){be(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Z.forEach(i.mutations,(o=>{const f=new Xe(o.key,i.batchId);return s=s.delete(f),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,i){const s=new Xe(i,0),o=this.Zr.firstAfterOrEqual(s);return Z.resolve(i.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,i){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const i=this.ei(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.ri=e,this.docs=(function(){return new Ie(vt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const s=i.key,o=this.docs.get(s),f=o?o.size:0,d=this.ri(i);return this.docs=this.docs.insert(s,{document:i.mutableCopy(),size:d}),this.size+=d-f,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const s=this.docs.get(i);return Z.resolve(s?s.document.mutableCopy():fn.newInvalidDocument(i))}getEntries(e,i){let s=Ua();return i.forEach((o=>{const f=this.docs.get(o);s=s.insert(o,f?f.document.mutableCopy():fn.newInvalidDocument(o))})),Z.resolve(s)}getDocumentsMatchingQuery(e,i,s,o){let f=Ua();const d=i.path,p=new vt(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:v,value:{document:T}}=g.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||nb(eb(T),s)<=0||(o.has(T.key)||cc(i,T))&&(f=f.insert(T.key,T.mutableCopy()))}return Z.resolve(f)}getAllFromCollectionGroup(e,i,s,o){Dt(9500)}ii(e,i){return Z.forEach(this.docs,(s=>i(s)))}newChangeBuffer(e){return new AA(this)}getSize(e){return Z.resolve(this.size)}}class AA extends pA{constructor(e){super(),this.Nr=e}applyChanges(e){const i=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?i.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),Z.waitFor(i)}getFromCache(e,i){return this.Nr.getEntry(e,i)}getAllFromCache(e,i){return this.Nr.getEntries(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e){this.persistence=e,this.si=new Cr((i=>hd(i)),dd),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.oi=0,this._i=new vd,this.targetCount=0,this.ai=Os.ur()}forEachTarget(e,i){return this.si.forEach(((s,o)=>i(o))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,i,s){return s&&(this.lastRemoteSnapshotVersion=s),i>this.oi&&(this.oi=i),Z.resolve()}Pr(e){this.si.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.ai=new Os(i),this.highestTargetId=i),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,i){return this.Pr(i),this.targetCount+=1,Z.resolve()}updateTargetData(e,i){return this.Pr(i),Z.resolve()}removeTargetData(e,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,i,s){let o=0;const f=[];return this.si.forEach(((d,p)=>{p.sequenceNumber<=i&&s.get(p.targetId)===null&&(this.si.delete(d),f.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),Z.waitFor(f).next((()=>o))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,i){const s=this.si.get(i)||null;return Z.resolve(s)}addMatchingKeys(e,i,s){return this._i.Wr(i,s),Z.resolve()}removeMatchingKeys(e,i,s){this._i.zr(i,s);const o=this.persistence.referenceDelegate,f=[];return o&&i.forEach((d=>{f.push(o.markPotentiallyOrphaned(e,d))})),Z.waitFor(f)}removeMatchingKeysForTargetId(e,i){return this._i.jr(i),Z.resolve()}getMatchingKeysForTargetId(e,i){const s=this._i.Hr(i);return Z.resolve(s)}containsKey(e,i){return Z.resolve(this._i.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,i){this.ui={},this.overlays={},this.ci=new sc(0),this.li=!1,this.li=!0,this.hi=new EA,this.referenceDelegate=e(this),this.Pi=new SA(this),this.indexManager=new oA,this.remoteDocumentCache=(function(o){return new bA(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new sA(i),this.Ii=new _A(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new vA,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let s=this.ui[e.toKey()];return s||(s=new TA(i,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,i,s){ft("MemoryPersistence","Starting transaction:",e);const o=new wA(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((f=>this.referenceDelegate.di(o).next((()=>f)))).toPromise().then((f=>(o.raiseOnCommittedEvent(),f)))}Ai(e,i){return Z.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,i))))}}class wA extends ab{constructor(e){super(),this.currentSequenceNumber=e}}class Ed{constructor(e){this.persistence=e,this.Ri=new vd,this.Vi=null}static mi(e){return new Ed(e)}get fi(){if(this.Vi)return this.Vi;throw Dt(60996)}addReference(e,i,s){return this.Ri.addReference(s,i),this.fi.delete(s.toString()),Z.resolve()}removeReference(e,i,s){return this.Ri.removeReference(s,i),this.fi.add(s.toString()),Z.resolve()}markPotentiallyOrphaned(e,i){return this.fi.add(i.toString()),Z.resolve()}removeTarget(e,i){this.Ri.jr(i.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,i.targetId).next((o=>{o.forEach((f=>this.fi.add(f.toString())))})).next((()=>s.removeTargetData(e,i)))}Ei(){this.Vi=new Set}di(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,(s=>{const o=vt.fromPath(s);return this.gi(e,o).next((f=>{f||i.removeEntry(o,Ct.min())}))})).next((()=>(this.Vi=null,i.apply(e))))}updateLimboDocument(e,i){return this.gi(e,i).next((s=>{s?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(e){return 0}gi(e,i){return Z.or([()=>Z.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ai(e,i)])}}class nc{constructor(e,i){this.persistence=e,this.pi=new Cr((s=>ob(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=mA(this,i)}static mi(e,i){return new nc(e,i)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}gr(e){const i=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>i.next((o=>s+o))))}wr(e){let i=0;return this.pr(e,(s=>{i++})).next((()=>i))}pr(e,i){return Z.forEach(this.pi,((s,o)=>this.br(e,s,o).next((f=>f?Z.resolve():i(o)))))}removeTargets(e,i,s){return this.persistence.getTargetCache().removeTargets(e,i,s)}removeOrphanedDocuments(e,i){let s=0;const o=this.persistence.getRemoteDocumentCache(),f=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,i).next((p=>{p||(s++,f.removeEntry(d,Ct.min()))})))).next((()=>f.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}removeTarget(e,i){const s=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,i,s){return this.pi.set(s,e.currentSequenceNumber),Z.resolve()}removeReference(e,i,s){return this.pi.set(s,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}Ti(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=qu(e.data.value)),i}br(e,i,s){return Z.or([()=>this.persistence.Ai(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const o=this.pi.get(i);return Z.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,i,s,o){this.targetId=e,this.fromCache=i,this.Es=s,this.ds=o}static As(e,i){let s=Yt(),o=Yt();for(const f of i.docChanges)switch(f.type){case 0:s=s.add(f.doc.key);break;case 1:o=o.add(f.doc.key)}return new Td(e,i.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return AT()?8:rb(TT())>0?6:4})()}initialize(e,i){this.ps=e,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(e,i,s,o){const f={result:null};return this.ys(e,i).next((d=>{f.result=d})).next((()=>{if(!f.result)return this.ws(e,i,o,s).next((d=>{f.result=d}))})).next((()=>{if(f.result)return;const d=new RA;return this.Ss(e,i,d).next((p=>{if(f.result=p,this.Vs)return this.bs(e,i,d,p.size)}))})).next((()=>f.result))}bs(e,i,s,o){return s.documentReadCount<this.fs?(_s()<=Ft.DEBUG&&ft("QueryEngine","SDK will not create cache indexes for query:",vs(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(_s()<=Ft.DEBUG&&ft("QueryEngine","Query:",vs(i),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(_s()<=Ft.DEBUG&&ft("QueryEngine","The SDK decides to create cache indexes for query:",vs(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ei(i))):Z.resolve())}ys(e,i){if(Fy(i))return Z.resolve(null);let s=Ei(i);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(i.limit!==null&&o===1&&(i=Fh(i,null,"F"),s=Ei(i)),this.indexManager.getDocumentsMatchingTarget(e,s).next((f=>{const d=Yt(...f);return this.ps.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,s).next((g=>{const v=this.Ds(i,p);return this.Cs(i,v,d,g.readTime)?this.ys(e,Fh(i,null,"F")):this.vs(e,v,i,g)}))))})))))}ws(e,i,s,o){return Fy(i)||o.isEqual(Ct.min())?Z.resolve(null):this.ps.getDocuments(e,s).next((f=>{const d=this.Ds(i,f);return this.Cs(i,d,s,o)?Z.resolve(null):(_s()<=Ft.DEBUG&&ft("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),vs(i)),this.vs(e,d,i,tb(o,so)).next((p=>p)))}))}Ds(e,i){let s=new He(dv(e));return i.forEach(((o,f)=>{cc(e,f)&&(s=s.add(f))})),s}Cs(e,i,s,o){if(e.limit===null)return!1;if(s.size!==i.size)return!0;const f=e.limitType==="F"?i.last():i.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(o)>0)}Ss(e,i,s){return _s()<=Ft.DEBUG&&ft("QueryEngine","Using full collection scan to execute query:",vs(i)),this.ps.getDocumentsMatchingQuery(e,i,Oa.min(),s)}vs(e,i,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((f=>(i.forEach((d=>{f=f.insert(d.key,d)})),f)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd="LocalStore",DA=3e8;class xA{constructor(e,i,s,o){this.persistence=e,this.Fs=i,this.serializer=o,this.Ms=new Ie(Pt),this.xs=new Cr((f=>hd(f)),dd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>e.collect(i,this.Ms)))}}function NA(r,e,i,s){return new xA(r,e,i,s)}async function kv(r,e){const i=Ht(r);return await i.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return i.mutationQueue.getAllMutationBatches(s).next((f=>(o=f,i.Bs(e),i.mutationQueue.getAllMutationBatches(s)))).next((f=>{const d=[],p=[];let g=Yt();for(const v of o){d.push(v.batchId);for(const T of v.mutations)g=g.add(T.key)}for(const v of f){p.push(v.batchId);for(const T of v.mutations)g=g.add(T.key)}return i.localDocuments.getDocuments(s,g).next((v=>({Ls:v,removedBatchIds:d,addedBatchIds:p})))}))}))}function zv(r){const e=Ht(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>e.Pi.getLastRemoteSnapshotVersion(i)))}function VA(r,e){const i=Ht(r),s=e.snapshotVersion;let o=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(f=>{const d=i.Ns.newChangeBuffer({trackRemovals:!0});o=i.Ms;const p=[];e.targetChanges.forEach(((T,A)=>{const M=o.get(A);if(!M)return;p.push(i.Pi.removeMatchingKeys(f,T.removedDocuments,A).next((()=>i.Pi.addMatchingKeys(f,T.addedDocuments,A))));let F=M.withSequenceNumber(f.currentSequenceNumber);e.targetMismatches.get(A)!==null?F=F.withResumeToken(rn.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):T.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(T.resumeToken,s)),o=o.insert(A,F),(function(ot,it,St){return ot.resumeToken.approximateByteSize()===0||it.snapshotVersion.toMicroseconds()-ot.snapshotVersion.toMicroseconds()>=DA?!0:St.addedDocuments.size+St.modifiedDocuments.size+St.removedDocuments.size>0})(M,F,T)&&p.push(i.Pi.updateTargetData(f,F))}));let g=Ua(),v=Yt();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&p.push(i.persistence.referenceDelegate.updateLimboDocument(f,T))})),p.push(IA(f,d,e.documentUpdates).next((T=>{g=T.ks,v=T.qs}))),!s.isEqual(Ct.min())){const T=i.Pi.getLastRemoteSnapshotVersion(f).next((A=>i.Pi.setTargetsMetadata(f,f.currentSequenceNumber,s)));p.push(T)}return Z.waitFor(p).next((()=>d.apply(f))).next((()=>i.localDocuments.getLocalViewOfDocuments(f,g,v))).next((()=>g))})).then((f=>(i.Ms=o,f)))}function IA(r,e,i){let s=Yt(),o=Yt();return i.forEach((f=>s=s.add(f))),e.getEntries(r,s).next((f=>{let d=Ua();return i.forEach(((p,g)=>{const v=f.get(p);g.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Ct.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):ft(bd,"Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",g.version)})),{ks:d,qs:o}}))}function OA(r,e){const i=Ht(r);return i.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return i.Pi.getTargetData(s,e).next((f=>f?(o=f,Z.resolve(o)):i.Pi.allocateTargetId(s).next((d=>(o=new xa(e,d,"TargetPurposeListen",s.currentSequenceNumber),i.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=i.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(s.targetId,s),i.xs.set(e,s.targetId)),s}))}async function $h(r,e,i){const s=Ht(r),o=s.Ms.get(e),f=i?"readwrite":"readwrite-primary";try{i||await s.persistence.runTransaction("Release target",f,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Ls(d))throw d;ft(bd,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function n_(r,e,i){const s=Ht(r);let o=Ct.min(),f=Yt();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,v,T){const A=Ht(g),M=A.xs.get(T);return M!==void 0?Z.resolve(A.Ms.get(M)):A.Pi.getTargetData(v,T)})(s,d,Ei(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,p.targetId).next((g=>{f=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,i?o:Ct.min(),i?f:Yt()))).next((p=>(MA(s,Cb(e),p),{documents:p,Qs:f})))))}function MA(r,e,i){let s=r.Os.get(e)||Ct.min();i.forEach(((o,f)=>{f.readTime.compareTo(s)>0&&(s=f.readTime)})),r.Os.set(e,s)}class i_{constructor(){this.activeTargetIds=Ob()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kA{constructor(){this.Mo=new i_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,s){}addLocalQueryTarget(e,i=!0){return i&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,i,s){this.xo[e]=i}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new i_,Promise.resolve()}handleUserChange(e,i,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="ConnectivityMonitor";class r_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ft(a_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ft(a_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu=null;function Xh(){return Uu===null?Uu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uu++,"0x"+Uu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh="RestConnection",UA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Zu?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,i,s,o,f){const d=Xh(),p=this.zo(e,i.toUriEncodedString());ft(Rh,`Sending RPC '${e}' ${d}:`,p,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,f);const{host:v}=new URL(p),T=ld(v);return this.Jo(e,p,g,s,T).then((A=>(ft(Rh,`Received RPC '${e}' ${d}: `,A),A)),(A=>{throw xs(Rh,`RPC '${e}' ${d} failed with error: `,A,"url: ",p,"request:",s),A}))}Ho(e,i,s,o,f,d){return this.Go(e,i,s,o,f)}jo(e,i,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Us})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((o,f)=>e[f]=o)),s&&s.headers.forEach(((o,f)=>e[f]=o))}zo(e,i){const s=UA[e];return`${this.Uo}/v1/${i}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class BA extends LA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,i,s,o,f){const d=Xh();return new Promise(((p,g)=>{const v=new q_;v.setWithCredentials(!0),v.listenOnce(j_.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Pu.NO_ERROR:const A=v.getResponseJson();ft(un,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(A)),p(A);break;case Pu.TIMEOUT:ft(un,`RPC '${e}' ${d} timed out`),g(new ht(nt.DEADLINE_EXCEEDED,"Request time out"));break;case Pu.HTTP_ERROR:const M=v.getStatus();if(ft(un,`RPC '${e}' ${d} failed with status:`,M,"response text:",v.getResponseText()),M>0){let F=v.getResponseJson();Array.isArray(F)&&(F=F[0]);const at=F?.error;if(at&&at.status&&at.message){const ot=(function(St){const Nt=St.toLowerCase().replace(/_/g,"-");return Object.values(nt).indexOf(Nt)>=0?Nt:nt.UNKNOWN})(at.status);g(new ht(ot,at.message))}else g(new ht(nt.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new ht(nt.UNAVAILABLE,"Connection failed."));break;default:Dt(9055,{l_:e,streamId:d,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{ft(un,`RPC '${e}' ${d} completed.`)}}));const T=JSON.stringify(o);ft(un,`RPC '${e}' ${d} sending request:`,o),v.send(i,"POST",T,s,15)}))}T_(e,i,s){const o=Xh(),f=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=G_(),p=H_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,i,s),g.encodeInitMessageHeaders=!0;const T=f.join("");ft(un,`Creating RPC '${e}' stream ${o}: ${T}`,g);const A=d.createWebChannel(T,g);this.I_(A);let M=!1,F=!1;const at=new PA({Yo:it=>{F?ft(un,`Not sending because RPC '${e}' stream ${o} is closed:`,it):(M||(ft(un,`Opening RPC '${e}' stream ${o} transport.`),A.open(),M=!0),ft(un,`RPC '${e}' stream ${o} sending:`,it),A.send(it))},Zo:()=>A.close()}),ot=(it,St,Nt)=>{it.listen(St,(Tt=>{try{Nt(Tt)}catch(Xt){setTimeout((()=>{throw Xt}),0)}}))};return ot(A,Yl.EventType.OPEN,(()=>{F||(ft(un,`RPC '${e}' stream ${o} transport opened.`),at.o_())})),ot(A,Yl.EventType.CLOSE,(()=>{F||(F=!0,ft(un,`RPC '${e}' stream ${o} transport closed`),at.a_(),this.E_(A))})),ot(A,Yl.EventType.ERROR,(it=>{F||(F=!0,xs(un,`RPC '${e}' stream ${o} transport errored. Name:`,it.name,"Message:",it.message),at.a_(new ht(nt.UNAVAILABLE,"The operation could not be completed")))})),ot(A,Yl.EventType.MESSAGE,(it=>{if(!F){const St=it.data[0];be(!!St,16349);const Nt=St,Tt=Nt?.error||Nt[0]?.error;if(Tt){ft(un,`RPC '${e}' stream ${o} received error:`,Tt);const Xt=Tt.status;let gt=(function(S){const C=Le[S];if(C!==void 0)return bv(C)})(Xt),kt=Tt.message;gt===void 0&&(gt=nt.INTERNAL,kt="Unknown error status: "+Xt+" with message "+Tt.message),F=!0,at.a_(new ht(gt,kt)),A.close()}else ft(un,`RPC '${e}' stream ${o} received:`,St),at.u_(St)}})),ot(p,F_.STAT_EVENT,(it=>{it.stat===zh.PROXY?ft(un,`RPC '${e}' stream ${o} detected buffering proxy`):it.stat===zh.NOPROXY&&ft(un,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{at.__()}),0),at}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((i=>i===e))}}function Ch(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(r){return new Xb(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,i,s=1e3,o=1.5,f=6e4){this.Mi=e,this.timerId=i,this.d_=s,this.A_=o,this.R_=f,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const i=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,i-s);o>0&&ft("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="PersistentStream";class qA{constructor(e,i,s,o,f,d,p,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=f,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Uv(e,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():i&&i.code===nt.RESOURCE_EXHAUSTED?(Qi(i.toString()),Qi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===nt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(i)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===i&&this.G_(s,o)}),(s=>{e((()=>{const o=new ht(nt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,i){const s=this.W_(this.D_);this.stream=this.j_(e,i),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ft(s_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return i=>{this.Mi.enqueueAndForget((()=>this.D_===e?i():(ft(s_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class jA extends qA{constructor(e,i,s,o,f,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,s,o,d),this.serializer=f}j_(e,i){return this.connection.T_("Listen",e,i)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const i=Jb(this.serializer,e),s=(function(f){if(!("targetChange"in f))return Ct.min();const d=f.targetChange;return d.targetIds&&d.targetIds.length?Ct.min():d.readTime?ws(d.readTime):Ct.min()})(e);return this.listener.H_(i,s)}Y_(e){const i={};i.database=Jy(this.serializer),i.addTarget=(function(f,d){let p;const g=d.target;if(p=qh(g)?{documents:Wb(f,g)}:{query:tA(f,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=wv(f,d.resumeToken);const v=Qh(f,d.expectedCount);v!==null&&(p.expectedCount=v)}else if(d.snapshotVersion.compareTo(Ct.min())>0){p.readTime=Yh(f,d.snapshotVersion.toTimestamp());const v=Qh(f,d.expectedCount);v!==null&&(p.expectedCount=v)}return p})(this.serializer,e);const s=nA(this.serializer,e);s&&(i.labels=s),this.q_(i)}Z_(e){const i={};i.database=Jy(this.serializer),i.removeTarget=e,this.q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{}class HA extends FA{constructor(e,i,s,o){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ht(nt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,d])=>this.connection.Go(e,Kh(i,s),o,f,d))).catch((f=>{throw f.name==="FirebaseError"?(f.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ht(nt.UNKNOWN,f.toString())}))}Ho(e,i,s,o,f){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Ho(e,Kh(i,s),o,d,p,f))).catch((d=>{throw d.name==="FirebaseError"?(d.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ht(nt.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class GA{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Qi(i),this.aa=!1):ft("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="RemoteStore";class QA{constructor(e,i,s,o,f){this.localStore=e,this.datastore=i,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=f,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{po(this)&&(ft(Ms,"Restarting streams for network reachability change."),await(async function(g){const v=Ht(g);v.Ea.add(4),await mo(v),v.Ra.set("Unknown"),v.Ea.delete(4),await pc(v)})(this))}))})),this.Ra=new GA(s,o)}}async function pc(r){if(po(r))for(const e of r.da)await e(!0)}async function mo(r){for(const e of r.da)await e(!1)}function Lv(r,e){const i=Ht(r);i.Ia.has(e.targetId)||(i.Ia.set(e.targetId,e),Rd(i)?wd(i):qs(i).O_()&&Sd(i,e))}function Ad(r,e){const i=Ht(r),s=qs(i);i.Ia.delete(e),s.O_()&&Pv(i,e),i.Ia.size===0&&(s.O_()?s.L_():po(i)&&i.Ra.set("Unknown"))}function Sd(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ct.min())>0){const i=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}qs(r).Y_(e)}function Pv(r,e){r.Va.Ue(e),qs(r).Z_(e)}function wd(r){r.Va=new Qb({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),qs(r).start(),r.Ra.ua()}function Rd(r){return po(r)&&!qs(r).x_()&&r.Ia.size>0}function po(r){return Ht(r).Ea.size===0}function Bv(r){r.Va=void 0}async function YA(r){r.Ra.set("Online")}async function KA(r){r.Ia.forEach(((e,i)=>{Sd(r,e)}))}async function $A(r,e){Bv(r),Rd(r)?(r.Ra.ha(e),wd(r)):r.Ra.set("Unknown")}async function XA(r,e,i){if(r.Ra.set("Online"),e instanceof Sv&&e.state===2&&e.cause)try{await(async function(o,f){const d=f.cause;for(const p of f.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ia.delete(p),o.Va.removeTarget(p))})(r,e)}catch(s){ft(Ms,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await l_(r,s)}else if(e instanceof Fu?r.Va.Ze(e):e instanceof Av?r.Va.st(e):r.Va.tt(e),!i.isEqual(Ct.min()))try{const s=await zv(r.localStore);i.compareTo(s)>=0&&await(function(f,d){const p=f.Va.Tt(d);return p.targetChanges.forEach(((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const T=f.Ia.get(v);T&&f.Ia.set(v,T.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,v)=>{const T=f.Ia.get(g);if(!T)return;f.Ia.set(g,T.withResumeToken(rn.EMPTY_BYTE_STRING,T.snapshotVersion)),Pv(f,g);const A=new xa(T.target,g,v,T.sequenceNumber);Sd(f,A)})),f.remoteSyncer.applyRemoteEvent(p)})(r,i)}catch(s){ft(Ms,"Failed to raise snapshot:",s),await l_(r,s)}}async function l_(r,e,i){if(!Ls(e))throw e;r.Ea.add(1),await mo(r),r.Ra.set("Offline"),i||(i=()=>zv(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ft(Ms,"Retrying IndexedDB access"),await i(),r.Ea.delete(1),await pc(r)}))}async function o_(r,e){const i=Ht(r);i.asyncQueue.verifyOperationInProgress(),ft(Ms,"RemoteStore received new credentials");const s=po(i);i.Ea.add(3),await mo(i),s&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.Ea.delete(3),await pc(i)}async function ZA(r,e){const i=Ht(r);e?(i.Ea.delete(2),await pc(i)):e||(i.Ea.add(2),await mo(i),i.Ra.set("Unknown"))}function qs(r){return r.ma||(r.ma=(function(i,s,o){const f=Ht(i);return f.sa(),new jA(s,f.connection,f.authCredentials,f.appCheckCredentials,f.serializer,o)})(r.datastore,r.asyncQueue,{Xo:YA.bind(null,r),t_:KA.bind(null,r),r_:$A.bind(null,r),H_:XA.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Rd(r)?wd(r):r.Ra.set("Unknown")):(await r.ma.stop(),Bv(r))}))),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,i,s,o,f){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=s,this.op=o,this.removalCallback=f,this.deferred=new Ss,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,i,s,o,f){const d=Date.now()+s,p=new Cd(e,i,d,o,f);return p.start(s),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ht(nt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qv(r,e){if(Qi("AsyncQueue",`${e}: ${r}`),Ls(r))return new ht(nt.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{static emptySet(e){return new Rs(e.comparator)}constructor(e){this.comparator=e?(i,s)=>e(i,s)||vt.comparator(i.key,s.key):(i,s)=>vt.comparator(i.key,s.key),this.keyedMap=Kl(),this.sortedSet=new Ie(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((i,s)=>(e(i),!1)))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof Rs)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;i.hasNext();){const o=i.getNext().key,f=s.getNext().key;if(!o.isEqual(f))return!1}return!0}toString(){const e=[];return this.forEach((i=>{e.push(i.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const s=new Rs;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=i,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(){this.ga=new Ie(vt.comparator)}track(e){const i=e.doc.key,s=this.ga.get(i);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(i,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(i,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(i,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(i):e.type===1&&s.type===2?this.ga=this.ga.insert(i,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):Dt(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(i,e)}ya(){const e=[];return this.ga.inorderTraversal(((i,s)=>{e.push(s)})),e}}class ks{constructor(e,i,s,o,f,d,p,g,v){this.query=e,this.docs=i,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=f,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,i,s,o,f){const d=[];return i.forEach((p=>{d.push({type:0,doc:p})})),new ks(e,i,Rs.emptySet(i),d,s,o,!0,!1,f)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,s=e.docChanges;if(i.length!==s.length)return!1;for(let o=0;o<i.length;o++)if(i[o].type!==s[o].type||!i[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class WA{constructor(){this.queries=c_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,s){const o=Ht(i),f=o.queries;o.queries=c_(),f.forEach(((d,p)=>{for(const g of p.Sa)g.onError(s)}))})(this,new ht(nt.ABORTED,"Firestore shutting down"))}}function c_(){return new Cr((r=>hv(r)),uc)}async function tS(r,e){const i=Ht(r);let s=3;const o=e.query;let f=i.queries.get(o);f?!f.ba()&&e.Da()&&(s=2):(f=new JA,s=e.Da()?0:1);try{switch(s){case 0:f.wa=await i.onListen(o,!0);break;case 1:f.wa=await i.onListen(o,!1);break;case 2:await i.onFirstRemoteStoreListen(o)}}catch(d){const p=qv(d,`Initialization of query '${vs(e.query)}' failed`);return void e.onError(p)}i.queries.set(o,f),f.Sa.push(e),e.va(i.onlineState),f.wa&&e.Fa(f.wa)&&Dd(i)}async function eS(r,e){const i=Ht(r),s=e.query;let o=3;const f=i.queries.get(s);if(f){const d=f.Sa.indexOf(e);d>=0&&(f.Sa.splice(d,1),f.Sa.length===0?o=e.Da()?0:1:!f.ba()&&e.Da()&&(o=2))}switch(o){case 0:return i.queries.delete(s),i.onUnlisten(s,!0);case 1:return i.queries.delete(s),i.onUnlisten(s,!1);case 2:return i.onLastRemoteStoreUnlisten(s);default:return}}function nS(r,e){const i=Ht(r);let s=!1;for(const o of e){const f=o.query,d=i.queries.get(f);if(d){for(const p of d.Sa)p.Fa(o)&&(s=!0);d.wa=o}}s&&Dd(i)}function iS(r,e,i){const s=Ht(r),o=s.queries.get(e);if(o)for(const f of o.Sa)f.onError(i);s.queries.delete(e)}function Dd(r){r.Ca.forEach((e=>{e.next()}))}var Zh,f_;(f_=Zh||(Zh={})).Ma="default",f_.Cache="cache";class aS{constructor(e,i,s){this.query=e,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new ks(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),i=!0):this.La(e,this.onlineState)&&(this.ka(e),i=!0),this.Na=e,i}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),i=!0),i}La(e,i){if(!e.fromCache||!this.Da())return!0;const s=i!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(e){e=ks.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Zh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e){this.key=e}}class Fv{constructor(e){this.key=e}}class rS{constructor(e,i){this.query=e,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Yt(),this.mutatedKeys=Yt(),this.eu=dv(e),this.tu=new Rs(this.eu)}get nu(){return this.Ya}ru(e,i){const s=i?i.iu:new u_,o=i?i.tu:this.tu;let f=i?i.mutatedKeys:this.mutatedKeys,d=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,A)=>{const M=o.get(T),F=cc(this.query,A)?A:null,at=!!M&&this.mutatedKeys.has(M.key),ot=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let it=!1;M&&F?M.data.isEqual(F.data)?at!==ot&&(s.track({type:3,doc:F}),it=!0):this.su(M,F)||(s.track({type:2,doc:F}),it=!0,(g&&this.eu(F,g)>0||v&&this.eu(F,v)<0)&&(p=!0)):!M&&F?(s.track({type:0,doc:F}),it=!0):M&&!F&&(s.track({type:1,doc:M}),it=!0,(g||v)&&(p=!0)),it&&(F?(d=d.add(F),f=ot?f.add(T):f.delete(T)):(d=d.delete(T),f=f.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),f=f.delete(T.key),s.track({type:1,doc:T})}return{tu:d,iu:s,Cs:p,mutatedKeys:f}}su(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,s,o){const f=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((T,A)=>(function(F,at){const ot=it=>{switch(it){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dt(20277,{Rt:it})}};return ot(F)-ot(at)})(T.type,A.type)||this.eu(T.doc,A.doc))),this.ou(s),o=o??!1;const p=i&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,v=g!==this.Za;return this.Za=g,d.length!==0||v?{snapshot:new ks(this.query,e.tu,f,d,e.mutatedKeys,g===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new u_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),e.modifiedDocuments.forEach((i=>{})),e.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Yt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const i=[];return e.forEach((s=>{this.Xa.has(s)||i.push(new Fv(s))})),this.Xa.forEach((s=>{e.has(s)||i.push(new jv(s))})),i}cu(e){this.Ya=e.Qs,this.Xa=Yt();const i=this.ru(e.documents);return this.applyChanges(i,!0)}lu(){return ks.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const xd="SyncEngine";class sS{constructor(e,i,s){this.query=e,this.targetId=i,this.view=s}}class lS{constructor(e){this.key=e,this.hu=!1}}class oS{constructor(e,i,s,o,f,d){this.localStore=e,this.remoteStore=i,this.eventManager=s,this.sharedClientState=o,this.currentUser=f,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Cr((p=>hv(p)),uc),this.Iu=new Map,this.Eu=new Set,this.du=new Ie(vt.comparator),this.Au=new Map,this.Ru=new vd,this.Vu={},this.mu=new Map,this.fu=Os.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function uS(r,e,i=!0){const s=Kv(r);let o;const f=s.Tu.get(e);return f?(s.sharedClientState.addLocalQueryTarget(f.targetId),o=f.view.lu()):o=await Hv(s,e,i,!0),o}async function cS(r,e){const i=Kv(r);await Hv(i,e,!0,!1)}async function Hv(r,e,i,s){const o=await OA(r.localStore,Ei(e)),f=o.targetId,d=r.sharedClientState.addLocalQueryTarget(f,i);let p;return s&&(p=await fS(r,e,f,d==="current",o.resumeToken)),r.isPrimaryClient&&i&&Lv(r.remoteStore,o),p}async function fS(r,e,i,s,o){r.pu=(A,M,F)=>(async function(ot,it,St,Nt){let Tt=it.view.ru(St);Tt.Cs&&(Tt=await n_(ot.localStore,it.query,!1).then((({documents:I})=>it.view.ru(I,Tt))));const Xt=Nt&&Nt.targetChanges.get(it.targetId),gt=Nt&&Nt.targetMismatches.get(it.targetId)!=null,kt=it.view.applyChanges(Tt,ot.isPrimaryClient,Xt,gt);return d_(ot,it.targetId,kt.au),kt.snapshot})(r,A,M,F);const f=await n_(r.localStore,e,!0),d=new rS(e,f.Qs),p=d.ru(f.documents),g=ho.createSynthesizedTargetChangeForCurrentChange(i,s&&r.onlineState!=="Offline",o),v=d.applyChanges(p,r.isPrimaryClient,g);d_(r,i,v.au);const T=new sS(e,i,d);return r.Tu.set(e,T),r.Iu.has(i)?r.Iu.get(i).push(e):r.Iu.set(i,[e]),v.snapshot}async function hS(r,e,i){const s=Ht(r),o=s.Tu.get(e),f=s.Iu.get(o.targetId);if(f.length>1)return s.Iu.set(o.targetId,f.filter((d=>!uc(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await $h(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),i&&Ad(s.remoteStore,o.targetId),Jh(s,o.targetId)})).catch(rc)):(Jh(s,o.targetId),await $h(s.localStore,o.targetId,!0))}async function dS(r,e){const i=Ht(r),s=i.Tu.get(e),o=i.Iu.get(s.targetId);i.isPrimaryClient&&o.length===1&&(i.sharedClientState.removeLocalQueryTarget(s.targetId),Ad(i.remoteStore,s.targetId))}async function Gv(r,e){const i=Ht(r);try{const s=await VA(i.localStore,e);e.targetChanges.forEach(((o,f)=>{const d=i.Au.get(f);d&&(be(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?be(d.hu,14607):o.removedDocuments.size>0&&(be(d.hu,42227),d.hu=!1))})),await Yv(i,s,e)}catch(s){await rc(s)}}function h_(r,e,i){const s=Ht(r);if(s.isPrimaryClient&&i===0||!s.isPrimaryClient&&i===1){const o=[];s.Tu.forEach(((f,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const g=Ht(d);g.onlineState=p;let v=!1;g.queries.forEach(((T,A)=>{for(const M of A.Sa)M.va(p)&&(v=!0)})),v&&Dd(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function mS(r,e,i){const s=Ht(r);s.sharedClientState.updateQueryState(e,"rejected",i);const o=s.Au.get(e),f=o&&o.key;if(f){let d=new Ie(vt.comparator);d=d.insert(f,fn.newNoDocument(f,Ct.min()));const p=Yt().add(f),g=new dc(Ct.min(),new Map,new Ie(Pt),d,p);await Gv(s,g),s.du=s.du.remove(f),s.Au.delete(e),Nd(s)}else await $h(s.localStore,e,!1).then((()=>Jh(s,e,i))).catch(rc)}function Jh(r,e,i=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),i&&r.Pu.yu(s,i);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||Qv(r,s)}))}function Qv(r,e){r.Eu.delete(e.path.canonicalString());const i=r.du.get(e);i!==null&&(Ad(r.remoteStore,i),r.du=r.du.remove(e),r.Au.delete(i),Nd(r))}function d_(r,e,i){for(const s of i)s instanceof jv?(r.Ru.addReference(s.key,e),pS(r,s)):s instanceof Fv?(ft(xd,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||Qv(r,s.key)):Dt(19791,{wu:s})}function pS(r,e){const i=e.key,s=i.path.canonicalString();r.du.get(i)||r.Eu.has(s)||(ft(xd,"New document in limbo: "+i),r.Eu.add(s),Nd(r))}function Nd(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const i=new vt(ye.fromString(e)),s=r.fu.next();r.Au.set(s,new lS(i)),r.du=r.du.insert(i,s),Lv(r.remoteStore,new xa(Ei(md(i.path)),s,"TargetPurposeLimboResolution",sc.ce))}}async function Yv(r,e,i){const s=Ht(r),o=[],f=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,g)=>{d.push(s.pu(g,e,i).then((v=>{if((v||i)&&s.isPrimaryClient){const T=v?!v.fromCache:i?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(v){o.push(v);const T=Td.As(g.targetId,v);f.push(T)}})))})),await Promise.all(d),s.Pu.H_(o),await(async function(g,v){const T=Ht(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>Z.forEach(v,(M=>Z.forEach(M.Es,(F=>T.persistence.referenceDelegate.addReference(A,M.targetId,F))).next((()=>Z.forEach(M.ds,(F=>T.persistence.referenceDelegate.removeReference(A,M.targetId,F)))))))))}catch(A){if(!Ls(A))throw A;ft(bd,"Failed to update sequence numbers: "+A)}for(const A of v){const M=A.targetId;if(!A.fromCache){const F=T.Ms.get(M),at=F.snapshotVersion,ot=F.withLastLimboFreeSnapshotVersion(at);T.Ms=T.Ms.insert(M,ot)}}})(s.localStore,f))}async function gS(r,e){const i=Ht(r);if(!i.currentUser.isEqual(e)){ft(xd,"User change. New user:",e.toKey());const s=await kv(i.localStore,e);i.currentUser=e,(function(f,d){f.mu.forEach((p=>{p.forEach((g=>{g.reject(new ht(nt.CANCELLED,d))}))})),f.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Yv(i,s.Ls)}}function yS(r,e){const i=Ht(r),s=i.Au.get(e);if(s&&s.hu)return Yt().add(s.key);{let o=Yt();const f=i.Iu.get(e);if(!f)return o;for(const d of f){const p=i.Tu.get(d);o=o.unionWith(p.view.nu)}return o}}function Kv(r){const e=Ht(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mS.bind(null,e),e.Pu.H_=nS.bind(null,e.eventManager),e.Pu.yu=iS.bind(null,e.eventManager),e}class ic{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,i){return null}Mu(e,i){return null}vu(e){return NA(this.persistence,new CA,e.initialUser,this.serializer)}Cu(e){return new Mv(Ed.mi,this.serializer)}Du(e){return new kA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ic.provider={build:()=>new ic};class _S extends ic{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,i){be(this.persistence.referenceDelegate instanceof nc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new hA(s,e.asyncQueue,i)}Cu(e){const i=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new Mv((s=>nc.mi(s,i)),this.serializer)}}class Wh{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>h_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=gS.bind(null,this.syncEngine),await ZA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new WA})()}createDatastore(e){const i=mc(e.databaseInfo.databaseId),s=(function(f){return new BA(f)})(e.databaseInfo);return(function(f,d,p,g){return new HA(f,d,p,g)})(e.authCredentials,e.appCheckCredentials,s,i)}createRemoteStore(e){return(function(s,o,f,d,p){return new QA(s,o,f,d,p)})(this.localStore,this.datastore,e.asyncQueue,(i=>h_(this.syncEngine,i,0)),(function(){return r_.v()?new r_:new zA})())}createSyncEngine(e,i){return(function(o,f,d,p,g,v,T){const A=new oS(o,f,d,p,g,v);return T&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const s=Ht(i);ft(Ms,"RemoteStore shutting down."),s.Ea.add(5),await mo(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Wh.provider={build:()=>new Wh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Qi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,i){setTimeout((()=>{this.muted||e(i)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La="FirestoreClient";class ES{constructor(e,i,s,o,f){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=s,this.databaseInfo=o,this.user=cn.UNAUTHENTICATED,this.clientId=K_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=f,this.authCredentials.start(s,(async d=>{ft(La,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(ft(La,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ss;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const s=qv(i,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Dh(r,e){r.asyncQueue.verifyOperationInProgress(),ft(La,"Initializing OfflineComponentProvider");const i=r.configuration;await e.initialize(i);let s=i.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await kv(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function m_(r,e){r.asyncQueue.verifyOperationInProgress();const i=await TS(r);ft(La,"Initializing OnlineComponentProvider"),await e.initialize(i,r.configuration),r.setCredentialChangeListener((s=>o_(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>o_(e.remoteStore,o))),r._onlineComponents=e}async function TS(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ft(La,"Using user provided OfflineComponentProvider");try{await Dh(r,r._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!(function(o){return o.name==="FirebaseError"?o.code===nt.FAILED_PRECONDITION||o.code===nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(i))throw i;xs("Error using user provided cache. Falling back to memory cache: "+i),await Dh(r,new ic)}}else ft(La,"Using default OfflineComponentProvider"),await Dh(r,new _S(void 0));return r._offlineComponents}async function bS(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ft(La,"Using user provided OnlineComponentProvider"),await m_(r,r._uninitializedComponentsProvider._online)):(ft(La,"Using default OnlineComponentProvider"),await m_(r,new Wh))),r._onlineComponents}async function p_(r){const e=await bS(r),i=e.eventManager;return i.onListen=uS.bind(null,e.syncEngine),i.onUnlisten=hS.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=cS.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=dS.bind(null,e.syncEngine),i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="firestore.googleapis.com",y_=!0;class __{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ht(nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Xv,this.ssl=y_}else this.host=e.host,this.ssl=e.ssl??y_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ov;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cA)throw new ht(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}W1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$v(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ht(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ht(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ht(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vd{constructor(e,i,s,o){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new __({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ht(nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ht(nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new __(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new F1;switch(s.type){case"firstParty":return new Y1(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ht(nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const s=g_.get(i);s&&(ft("ComponentProvider","Removing Datastore"),g_.delete(i),s.terminate())})(this),Promise.resolve()}}function AS(r,e,i,s={}){r=Bu(r,Vd);const o=ld(e),f=r._getSettings(),d={...f,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${i}`;o&&(gT(`https://${p}`),ET("Firestore",!0)),f.host!==Xv&&f.host!==p&&xs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...f,host:p,ssl:o,emulatorOptions:s};if(!Yu(g,d)&&(r._setSettings(g),s.mockUserToken)){let v,T;if(typeof s.mockUserToken=="string")v=s.mockUserToken,T=cn.MOCK_USER;else{v=yT(s.mockUserToken,r._app?.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new ht(nt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new cn(A)}r._authCredentials=new H1(new Y_(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,i,s){this.converter=i,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Dr(this.firestore,e,this._query)}}class dn{constructor(e,i,s){this.converter=i,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dn(this.firestore,e,this._key)}toJSON(){return{type:dn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,i,s){if(fo(i,dn._jsonSchema))return new dn(e,s||null,new vt(ye.fromString(i.referencePath)))}}dn._jsonSchemaVersion="firestore/documentReference/1.0",dn._jsonSchema={type:Be("string",dn._jsonSchemaVersion),referencePath:Be("string")};class Cs extends Dr{constructor(e,i,s){super(e,i,md(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dn(this.firestore,null,new vt(e))}withConverter(e){return new Cs(this.firestore,e,this._path)}}function SS(r,e,...i){if(r=io(r),r instanceof Vd){const s=ye.fromString(e,...i);return xy(s),new Cs(r,null,s)}{if(!(r instanceof dn||r instanceof Cs))throw new ht(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ye.fromString(e,...i));return xy(s),new Cs(r.firestore,null,s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="AsyncQueue";class E_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Uv(this,"async_queue_retry"),this._c=()=>{const s=Ch();s&&ft(v_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const i=Ch();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const i=Ch();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new Ss;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ls(e))throw e;ft(v_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const i=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Qi("INTERNAL UNHANDLED ERROR: ",T_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=i,i}enqueueAfterDelay(e,i,s){this.uc(),this.oc.indexOf(e)>-1&&(i=0);const o=Cd.createAndSchedule(this,e,i,s,(f=>this.hc(f)));return this.tc.push(o),o}uc(){this.nc&&Dt(47125,{Pc:T_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const i of this.tc)if(i.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((i,s)=>i.targetTimeMs-s.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const i=this.tc.indexOf(e);this.tc.splice(i,1)}}function T_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(r){return(function(i,s){if(typeof i!="object"||i===null)return!1;const o=i;for(const f of s)if(f in o&&typeof o[f]=="function")return!0;return!1})(r,["next","error","complete"])}class td extends Vd{constructor(e,i,s,o){super(e,i,s,o),this.type="firestore",this._queue=new E_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new E_(e),this._firestoreClient=void 0,await e}}}function wS(r,e){const i=typeof r=="object"?r:N1(),s=typeof r=="string"?r:Zu,o=w1(i,"firestore").getImmediate({identifier:s});if(!o._initialized){const f=mT("firestore");f&&AS(o,...f)}return o}function RS(r){if(r._terminated)throw new ht(nt.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||CS(r),r._firestoreClient}function CS(r){const e=r._freezeSettings(),i=(function(o,f,d,p){return new fb(o,f,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,$v(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new ES(r._authCredentials,r._appCheckCredentials,r._queue,i,r._componentsProvider&&(function(o){const f=o?._online.build();return{_offline:o?._offline.build(f),_online:f}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yn(rn.fromBase64String(e))}catch(i){throw new ht(nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new Yn(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fo(e,Yn._jsonSchema))return Yn.fromBase64String(e.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:Be("string",Yn._jsonSchemaVersion),bytes:Be("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new ht(nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new ht(nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new ht(nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pt(this._lat,e._lat)||Pt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ti._jsonSchemaVersion}}static fromJSON(e){if(fo(e,Ti._jsonSchema))return new Ti(e.latitude,e.longitude)}}Ti._jsonSchemaVersion="firestore/geoPoint/1.0",Ti._jsonSchema={type:Be("string",Ti._jsonSchemaVersion),latitude:Be("number"),longitude:Be("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this._values=(e||[]).map((i=>i))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let f=0;f<s.length;++f)if(s[f]!==o[f])return!1;return!0})(this._values,e._values)}toJSON(){return{type:bi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fo(e,bi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((i=>typeof i=="number")))return new bi(e.vectorValues);throw new ht(nt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bi._jsonSchemaVersion="firestore/vectorValue/1.0",bi._jsonSchema={type:Be("string",bi._jsonSchemaVersion),vectorValues:Be("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=/^__.*__$/;function Wv(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dt(40011,{Ac:r})}}class Id{constructor(e,i,s,o,f,d){this.settings=e,this.databaseId=i,this.serializer=s,this.ignoreUndefinedProperties=o,f===void 0&&this.Rc(),this.fieldTransforms=f||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Id({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const i=this.path?.child(e),s=this.Vc({path:i,fc:!1});return s.gc(e),s}yc(e){const i=this.path?.child(e),s=this.Vc({path:i,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ed(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((i=>e.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>e.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Wv(this.Ac)&&DS.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class xS{constructor(e,i,s){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=s||mc(e)}Cc(e,i,s,o=!1){return new Id({Ac:e,methodName:i,Dc:s,path:hn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function NS(r){const e=r._freezeSettings(),i=mc(r._databaseId);return new xS(r._databaseId,!!e.ignoreUndefinedProperties,i)}function VS(r,e,i,s=!1){return Od(i,r.Cc(s?4:3,e))}function Od(r,e){if(t0(r=io(r)))return OS("Unsupported field value:",e,r),IS(r,e);if(r instanceof Jv)return(function(s,o){if(!Wv(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const f=s._toFieldTransform(o);f&&o.fieldTransforms.push(f)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const f=[];let d=0;for(const p of s){let g=Od(p,o.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),f.push(g),d++}return{arrayValue:{values:f}}})(r,e)}return(function(s,o){if((s=io(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Mb(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const f=_e.fromDate(s);return{timestampValue:Yh(o.serializer,f)}}if(s instanceof _e){const f=new _e(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Yh(o.serializer,f)}}if(s instanceof Ti)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Yn)return{bytesValue:wv(o.serializer,s._byteString)};if(s instanceof dn){const f=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(f))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${f.projectId}/${f.database}`);return{referenceValue:Rv(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof bi)return(function(d,p){return{mapValue:{fields:{[iv]:{stringValue:av},[Ju]:{arrayValue:{values:d.toArray().map((v=>{if(typeof v!="number")throw p.Sc("VectorValues must only contain numeric values.");return pd(p.serializer,v)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${ac(s)}`)})(r,e)}function IS(r,e){const i={};return Z_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ps(r,((s,o)=>{const f=Od(o,e.mc(s));f!=null&&(i[s]=f)})),{mapValue:{fields:i}}}function t0(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof _e||r instanceof Ti||r instanceof Yn||r instanceof dn||r instanceof Jv||r instanceof bi)}function OS(r,e,i){if(!t0(i)||!$_(i)){const s=ac(i);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}const MS=new RegExp("[~\\*/\\[\\]]");function kS(r,e,i){if(e.search(MS)>=0)throw ed(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,i);try{return new Zv(...e.split("."))._internalPath}catch{throw ed(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,i)}}function ed(r,e,i,s,o){const f=s&&!s.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;i&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(f||d)&&(g+=" (found",f&&(g+=` in field ${s}`),d&&(g+=` in document ${o}`),g+=")"),new ht(nt.INVALID_ARGUMENT,p+r+g)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,i,s,o,f){this._firestore=e,this._userDataWriter=i,this._key=s,this._document=o,this._converter=f}get id(){return this._key.path.lastSegment()}get ref(){return new dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(Md("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class zS extends e0{data(){return super.data()}}function Md(r,e){return typeof e=="string"?kS(r,e):e instanceof Zv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ht(nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kd{}class n0 extends kd{}function LS(r,e,...i){let s=[];e instanceof kd&&s.push(e),s=s.concat(i),(function(f){const d=f.filter((g=>g instanceof Ud)).length,p=f.filter((g=>g instanceof zd)).length;if(d>1||d>0&&p>0)throw new ht(nt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class zd extends n0{constructor(e,i,s){super(),this._field=e,this._op=i,this._value=s,this.type="where"}static _create(e,i,s){return new zd(e,i,s)}_apply(e){const i=this._parse(e);return i0(e._query,i),new Dr(e.firestore,e.converter,jh(e._query,i))}_parse(e){const i=NS(e.firestore);return(function(f,d,p,g,v,T,A){let M;if(v.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ht(nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){S_(A,T);const at=[];for(const ot of A)at.push(A_(g,f,ot));M={arrayValue:{values:at}}}else M=A_(g,f,A)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||S_(A,T),M=VS(p,d,A,T==="in"||T==="not-in");return Pe.create(v,T,M)})(e._query,"where",i,e.firestore._databaseId,this._field,this._op,this._value)}}class Ud extends kd{constructor(e,i){super(),this.type=e,this._queryConstraints=i}static _create(e,i){return new Ud(e,i)}_parse(e){const i=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return i.length===1?i[0]:ii.create(i,this._getOperator())}_apply(e){const i=this._parse(e);return i.getFilters().length===0?e:((function(o,f){let d=o;const p=f.getFlattenedFilters();for(const g of p)i0(d,g),d=jh(d,g)})(e._query,i),new Dr(e.firestore,e.converter,jh(e._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ld extends n0{constructor(e,i){super(),this._field=e,this._direction=i,this.type="orderBy"}static _create(e,i){return new Ld(e,i)}_apply(e){const i=(function(o,f,d){if(o.startAt!==null)throw new ht(nt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ht(nt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new co(f,d)})(e._query,this._field,this._direction);return new Dr(e.firestore,e.converter,(function(o,f){const d=o.explicitOrderBy.concat([f]);return new Bs(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,i))}}function PS(r,e="asc"){const i=e,s=Md("orderBy",r);return Ld._create(s,i)}function A_(r,e,i){if(typeof(i=io(i))=="string"){if(i==="")throw new ht(nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fv(e)&&i.indexOf("/")!==-1)throw new ht(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const s=e.path.child(ye.fromString(i));if(!vt.isDocumentKey(s))throw new ht(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Uy(r,new vt(s))}if(i instanceof dn)return Uy(r,i._key);throw new ht(nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ac(i)}.`)}function S_(r,e){if(!Array.isArray(r)||r.length===0)throw new ht(nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function i0(r,e){const i=(function(o,f){for(const d of o)for(const p of d.getFlattenedFilters())if(f.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(i!==null)throw i===e.op?new ht(nt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ht(nt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${i.toString()}' filters.`)}class BS{convertValue(e,i="none"){switch(za(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(ka(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw Dt(62114,{value:e})}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const s={};return Ps(e,((o,f)=>{s[o]=this.convertValue(f,i)})),s}convertVectorValue(e){const i=e.fields?.[Ju].arrayValue?.values?.map((s=>Ve(s.doubleValue)));return new bi(i)}convertGeoPoint(e){return new Ti(Ve(e.latitude),Ve(e.longitude))}convertArray(e,i){return(e.values||[]).map((s=>this.convertValue(s,i)))}convertServerTimestamp(e,i){switch(i){case"previous":const s=oc(e);return s==null?null:this.convertValue(s,i);case"estimate":return this.convertTimestamp(lo(e));default:return null}}convertTimestamp(e){const i=Ma(e);return new _e(i.seconds,i.nanos)}convertDocumentKey(e,i){const s=ye.fromString(e);be(Iv(s),9688,{name:e});const o=new oo(s.get(1),s.get(3)),f=new vt(s.popFirst(5));return o.isEqual(i)||Qi(`Document ${f} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),f}}class Xl{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wr extends e0{constructor(e,i,s,o,f,d){super(e,i,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=f}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new Hu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const s=this._document.data.field(Md("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ht(nt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,i={};return i.type=wr._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}wr._jsonSchemaVersion="firestore/documentSnapshot/1.0",wr._jsonSchema={type:Be("string",wr._jsonSchemaVersion),bundleSource:Be("string","DocumentSnapshot"),bundleName:Be("string"),bundle:Be("string")};class Hu extends wr{data(e={}){return super.data(e)}}class Ds{constructor(e,i,s,o){this._firestore=e,this._userDataWriter=i,this._snapshot=o,this.metadata=new Xl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((i=>e.push(i))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach((s=>{e.call(i,new Hu(this._firestore,this._userDataWriter,s.key,s,new Xl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new ht(nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(o,f){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const g=new Hu(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Xl(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>f||p.type!==3)).map((p=>{const g=new Hu(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Xl(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,T=-1;return p.type!==0&&(v=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),T=d.indexOf(p.doc.key)),{type:qS(p.type),doc:g,oldIndex:v,newIndex:T}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ht(nt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ds._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=K_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],s=[],o=[];return this.docs.forEach((f=>{f._document!==null&&(i.push(f._document),s.push(this._userDataWriter.convertObjectMap(f._document.data.value.mapValue.fields,"previous")),o.push(f.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function qS(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dt(61501,{type:r})}}Ds._jsonSchemaVersion="firestore/querySnapshot/1.0",Ds._jsonSchema={type:Be("string",Ds._jsonSchemaVersion),bundleSource:Be("string","QuerySnapshot"),bundleName:Be("string"),bundle:Be("string")};class a0 extends BS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new dn(this.firestore,null,i)}}function jS(r,...e){r=io(r);let i={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||b_(e[s])||(i=e[s++]);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(b_(e[s])){const g=e[s];e[s]=g.next?.bind(g),e[s+1]=g.error?.bind(g),e[s+2]=g.complete?.bind(g)}let f,d,p;if(r instanceof dn)d=Bu(r.firestore,td),p=md(r._key.path),f={next:g=>{e[s]&&e[s](FS(d,r,g))},error:e[s+1],complete:e[s+2]};else{const g=Bu(r,Dr);d=Bu(g.firestore,td),p=g._query;const v=new a0(d);f={next:T=>{e[s]&&e[s](new Ds(d,v,g,T))},error:e[s+1],complete:e[s+2]},US(r._query)}return(function(v,T,A,M){const F=new vS(M),at=new aS(T,F,A);return v.asyncQueue.enqueueAndForget((async()=>tS(await p_(v),at))),()=>{F.Nu(),v.asyncQueue.enqueueAndForget((async()=>eS(await p_(v),at)))}})(RS(d),p,o,f)}function FS(r,e,i){const s=i.docs.get(e._key),o=new a0(r);return new wr(r,o,e._key,s,new Xl(i.hasPendingWrites,i.fromCache),e.converter)}(function(e,i=!0){(function(o){Us=o})(x1),$u(new ao("firestore",((s,{instanceIdentifier:o,options:f})=>{const d=s.getProvider("app").getImmediate(),p=new td(new G1(s.getProvider("auth-internal")),new K1(d,s.getProvider("app-check-internal")),(function(v,T){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new ht(nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oo(v.options.projectId,T)})(d,o),d);return f={useFetchStreams:i,...f},p._setSettings(f),p}),"PUBLIC").setMultipleInstances(!0)),As(wy,Ry,e),As(wy,Ry,"esm2020")})();const HS={apiKey:"AIzaSyCjk0dG1CjZECHzwT9cr9S19XhnMnTYgmI",authDomain:"burkolmetal-726f3.firebaseapp.com",projectId:"burkolmetal-726f3",storageBucket:"burkolmetal-726f3.appspot.com",messagingSenderId:"271422310075",appId:"1:271422310075:web:0f466fc8deeed58f4d4b9e",measurementId:"G-25LT6XSH60"},GS=U_(HS),QS=wS(GS),Lu=x_||function(r,e="TL"){return`₺${(typeof r=="number"?r:parseFloat(r)||0).toFixed(2)}`};function YS(r){const e=[{id:"date",label:"Tarih",type:"date"},{id:"name",label:"Müşteri",type:"text"},{id:"company",label:"Şirket",type:"text"},{id:"proj",label:"Proje",type:"text"},{id:"phone",label:"Telefon",type:"phone"},{id:"email",label:"E-posta",type:"email"}],s=(r?.fields||r?.formStructure?.fields||[]).filter(f=>f.display?.showInTable).sort((f,d)=>(f.display?.tableOrder||0)-(d.display?.tableOrder||0)),o=[{id:"price",label:"Tahmini Fiyat",type:"currency"},{id:"due",label:"Termine Kalan",type:"text"},{id:"status",label:"Durum",type:"text"}];return[...e,...s,...o]}function KS(r,e){return["date","name","company","proj","phone","email","price","due","status"].includes(e)?e==="date"?r.createdAt||r.date||"":r[e]||"":r.customFields?.[e]||""}function $S(r,e,i,s){if(s){const{getPriceChangeType:o,setPriceReview:f,calculatePrice:d,statusLabel:p,t:g}=s;switch(e.id){case"date":return(r||"").slice(0,10);case"customer":return(i.name||"")+(i.company?" — "+i.company:"");case"project":const v=r||"";return v.length>15?v.substring(0,15)+"...":v;case"price":const T=o(i);return T==="no-change"?Lu(parseFloat(r)||0):D.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},D.createElement("span",null,Lu(parseFloat(r)||0)),D.createElement("button",{onClick:F=>{F.stopPropagation();const at=parseFloat(i.price)||0;let ot=at;i.pendingCalculatedPrice!==void 0?ot=parseFloat(i.pendingCalculatedPrice)||0:typeof d=="function"&&(ot=parseFloat(d(i))||0),f({item:i,originalPrice:at,newPrice:ot})},style:{backgroundColor:T==="price-changed"?"#dc3545":"#ffc107",color:T==="price-changed"?"white":"#000",border:"none",padding:"2px 6px",borderRadius:"4px",fontSize:"10px",cursor:"pointer",fontWeight:"bold"},title:T==="price-changed"?"Fiyat değişti":"Formül değişti"},T==="price-changed"?"!":"~"));case"due":const A=r||"";return A.includes("Gecikti")?D.createElement("span",{style:{color:"#dc3545",fontWeight:"bold"}},A):A.includes("gün")&&parseInt(A.match(/\d+/)?.[0]||"0")<=3?D.createElement("span",{style:{color:"#ffc107",fontWeight:"bold"}},A):A;case"status":const M=p(r||"new",g);return D.createElement("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"bold",backgroundColor:XS(r),color:ZS(r)}},M);default:return e.type==="currency"?Lu(parseFloat(r)||0):e.type==="email"?D.createElement("a",{href:`mailto:${r}`,style:{color:"#007bff"}},r):e.type==="phone"?D.createElement("a",{href:`tel:${r}`,style:{color:"#007bff"}},r):r||""}}return e.type==="currency"?Lu(parseFloat(r)||0):e.type==="date"?(r||"").slice(0,10):r||""}function XS(r){switch(r){case"new":return"#e3f2fd";case"pending":return"#fff3e0";case"approved":return"#e8f5e8";case"rejected":return"#ffebee";case"completed":return"#f3e5f5";default:return"#f5f5f5"}}function ZS(r){switch(r){case"new":return"#1976d2";case"pending":return"#f57c00";case"approved":return"#388e3c";case"rejected":return"#d32f2f";case"completed":return"#7b1fa2";default:return"#666"}}function r0(r,e){if(!e||!e.parameters||!e.formula)return r.calculatedPrice||r.price||0;try{const i={};e.parameters.forEach(d=>{if(!(!d||!d.id)){if(d.type==="fixed")i[d.id]=parseFloat(d.value)||0;else if(d.type==="form"){let p=0;if(d.formField==="qty")p=parseFloat(r.qty)||0;else if(d.formField==="thickness")p=parseFloat(r.thickness)||0;else if(d.formField==="dimensions"){const g=parseFloat(r.dimsL),v=parseFloat(r.dimsW);if(!isNaN(g)&&!isNaN(v))p=g*v;else{const T=r.dims||"",A=String(T).match(/(\d+(?:\.\d+)?)\s*[x×]\s*(\d+(?:\.\d+)?)/i);A&&(p=(parseFloat(A[1])||0)*(parseFloat(A[2])||0))}}else{let g=r[d.formField];if(g===void 0&&r.customFields&&(g=r.customFields[d.formField]),Array.isArray(g))g.forEach(v=>{if(d.lookupTable&&Array.isArray(d.lookupTable)){const T=d.lookupTable.find(A=>A.option===v);T&&(p+=parseFloat(T.value)||0)}});else if(d.lookupTable&&Array.isArray(d.lookupTable)){const v=d.lookupTable.find(T=>T.option===g);v?p=parseFloat(v.value)||0:p=parseFloat(g)||0}else p=parseFloat(g)||0}i[d.id]=p}}}),console.log("🔍 PRICE CALCULATION DEBUG:",{quoteId:r.id,paramValues:i,originalFormula:e.formula,customFields:r.customFields});let s=e.formula;if(Object.keys(i).sort((d,p)=>p.length-d.length).forEach(d=>{const p=new RegExp("\\b"+d+"\\b","g");s=s.replace(p,i[d])}),console.log("🔍 FORMULA AFTER REPLACEMENT:",s),s.startsWith("=")&&(s=s.substring(1),console.log("🔍 FORMULA AFTER = REMOVAL:",s)),!/^[\d\s+\-*/().]+$/.test(s))return console.warn("❌ Invalid formula characters detected:",s),r.calculatedPrice||r.price||0;const f=Function('"use strict"; return ('+s+")")();return isNaN(f)?0:Math.max(0,f)}catch(i){return console.error("Price calculation error:",i),r.calculatedPrice||r.price||0}}function JS(r,e){try{const i=r.price||0,s=r0(r,e);return Math.abs(s-i)>.01?"price-changed":r.needsPriceUpdate===!0||r.calculatedPrice!==void 0&&Math.abs(s-r.calculatedPrice)>.01?"formula-changed":"no-change"}catch(i){return console.error("Price change type calculation error:",i),"no-change"}}function WS(r,e){const i=[];if(!r.priceHistory||!Array.isArray(r.priceHistory))return i;const s=r.priceHistory[r.priceHistory.length-1];if(!s)return i;if(["qty","thickness","material","process","finish","dims"].forEach(f=>{const d=r[f],p=s.quoteSnapshot?.[f];JSON.stringify(d)!==JSON.stringify(p)&&i.push({field:f,from:p,to:d})}),s.priceSettings){const f=e?.formula,d=s.priceSettings.formula;f!==d&&i.push({field:"formula",from:d,to:f});const p=e?.parameters||[],g=s.priceSettings.parameters||[];JSON.stringify(p)!==JSON.stringify(g)&&i.push({field:"parameters",from:g,to:p})}return i}function tw(r,e,i=null){function s(d){if(i&&i.formStructure&&i.formStructure.fields){const p=i.formStructure.fields.find(g=>g.id===d);if(p&&p.label)return p.label}return d}if(Array.isArray(r.priceUpdateReasons)&&r.priceUpdateReasons.length>0)return r.priceUpdateReasons.join("; ");if(r.formStructureChanged===!0)return"User form güncellendi";const o=WS(r,e);if(o.length===0)return r.priceUpdateReason==="Form structure changed"||r.previousFormVersion!==void 0?"User form güncellendi":"Fiyat güncelleme gerekli (sebep belirtilmemiş)";const f=[];return o.forEach(d=>{switch(d.field){case"qty":f.push(`Adet değişti: ${d.from} → ${d.to}`);break;case"thickness":f.push(`Kalınlık değişti: ${d.from} → ${d.to}`);break;case"material":f.push(`Malzeme değişti: ${d.from} → ${d.to}`);break;case"process":const p=Array.isArray(d.from)?d.from.join(", "):d.from,g=Array.isArray(d.to)?d.to.join(", "):d.to;f.push(`İşlem türü değişti: ${p} → ${g}`);break;case"finish":f.push(`Yüzey işlemi değişti: ${d.from} → ${d.to}`);break;case"dims":f.push(`Boyutlar değişti: ${d.from} → ${d.to}`);break;case"formula":f.push("Fiyat formülü güncellendi");break;case"parameters":f.push("Fiyat parametreleri güncellendi");break;default:const v=s(d.field);f.push(`${v} değişti`)}}),f.join("; ")}async function ew(r,e,i){try{const s=await e.applyNewPrice(r.id);return s?(i("Fiyat güncellendi!","success"),s):(i("Fiyat güncellenirken hata oluştu","error"),null)}catch(s){return console.error("Price update error:",s),i("Fiyat güncellenirken hata oluştu","error"),null}}const{useMemo:s0}=D;function nw(r,e,i,s){return s0(()=>r.filter(o=>{if(i){const f=i.toLowerCase(),d=[o.name,o.company,o.proj,o.email,o.phone,o.material,o.finish,o.status,o.country,o.dims,o.dimsL,o.dimsW,o.thickness,o.qty,o.notes,o.createdBy,o.price,o.calculatedPrice],p=Array.isArray(o.process)?o.process:[o.process].filter(Boolean),g=o.customFields?Object.values(o.customFields):[],v=o.files?o.files.map(A=>A.name||A.originalName||""):[];if(![...d,...p,...g,...v].filter(Boolean).join(" ").toLowerCase().includes(f))return!1}if(e.status&&e.status.length>0&&!e.status.includes(o.status))return!1;if(s&&s.steps){for(const f of s.steps)for(const d of f.fields)if(d.filterable&&e[d.id]&&e[d.id].length>0){const p=o[d.id];if(d.type==="multiselect"){const g=Array.isArray(p)?p:typeof p=="string"?p.split(",").map(T=>T.trim()):[];if(!e[d.id].some(T=>g.includes(T)))return!1}else if(!e[d.id].includes(p))return!1}}if(e.dateRange&&(e.dateRange.from||e.dateRange.to)){const f=new Date(o.createdAt);if(e.dateRange.from){const d=new Date(e.dateRange.from);if(f<d)return!1}if(e.dateRange.to){const d=new Date(e.dateRange.to);if(d.setHours(23,59,59,999),f>d)return!1}}if(e.qtyRange&&(e.qtyRange.min||e.qtyRange.max)){const f=parseFloat(o.qty)||0;if(e.qtyRange.min&&f<parseFloat(e.qtyRange.min)||e.qtyRange.max&&f>parseFloat(e.qtyRange.max))return!1}return!0}),[r,e,i])}function iw(r,e){return s0(()=>{const i={status:[...new Set(r.map(s=>s.status).filter(Boolean))]};return e&&e.steps&&e.steps.forEach(s=>{s.fields.forEach(o=>{o.filterable&&o.type!=="textarea"&&o.type!=="date"&&o.type!=="number"&&(o.type==="multiselect"?i[o.id]=[...new Set(r.flatMap(f=>Array.isArray(f[o.id])?f[o.id]:typeof f[o.id]=="string"?f[o.id].split(",").map(d=>d.trim()):[]).filter(Boolean))]:o.type==="radio"&&o.options?i[o.id]=[...new Set(r.map(f=>f[o.id]).filter(Boolean))]:i[o.id]=[...new Set(r.map(f=>f[o.id]).filter(Boolean))])})}),i},[r,e])}function aw(r,e,i,s,o="toggle"){e(f=>{const d={...f};if(i==="dateRange"||i==="qtyRange")d[i]={...f[i],...s};else{const p=f[i]||[];o==="toggle"?p.includes(s)?d[i]=p.filter(g=>g!==s):d[i]=[...p,s]:o==="add"?p.includes(s)||(d[i]=[...p,s]):o==="remove"&&(d[i]=p.filter(g=>g!==s))}return d})}function rw(r,e){r({status:[],material:[],process:[],dateRange:{from:"",to:""},qtyRange:{min:"",max:""},country:[]}),e("")}function sw(r,e){r(i=>{const s={...i};return s[e]=[],s})}function xh(r){let e=0;return Object.keys(r).forEach(i=>{(Array.isArray(r[i])&&r[i].length>0||i==="dateRange"&&(r[i].from||r[i].to)||i==="qtyRange"&&(r[i].min||r[i].max))&&e++}),e}function w_(r,e="count"){const i={total:r.length,byStatus:{},byMaterial:{},byProcess:{},byMonth:{},totalValue:0,avgValue:0};let s=0;r.forEach(f=>{const d=parseFloat(f.price)||0;s+=d}),i.totalValue=s,i.avgValue=r.length>0?s/r.length:0,r.forEach(f=>{const d=f.status||"unknown";i.byStatus[d]||(i.byStatus[d]={count:0,value:0}),i.byStatus[d].count++,i.byStatus[d].value+=parseFloat(f.price)||0}),r.forEach(f=>{const d=f.material||"unknown";i.byMaterial[d]||(i.byMaterial[d]={count:0,value:0}),i.byMaterial[d].count++,i.byMaterial[d].value+=parseFloat(f.price)||0}),r.forEach(f=>{const d=Array.isArray(f.process)?f.process:[f.process].filter(Boolean);d.forEach(p=>{i.byProcess[p]||(i.byProcess[p]={count:0,value:0}),i.byProcess[p].count++,i.byProcess[p].value+=(parseFloat(f.price)||0)/d.length})}),r.forEach(f=>{const p=(f.createdAt||f.date||"").slice(0,7);p&&(i.byMonth[p]||(i.byMonth[p]={count:0,value:0}),i.byMonth[p].count++,i.byMonth[p].value+=parseFloat(f.price)||0)});const o=f=>Object.entries(f).map(([d,p])=>({label:d,count:p.count,value:p.value})).sort((d,p)=>e==="value"?p.value-d.value:p.count-d.count);return i.byStatus=o(i.byStatus),i.byMaterial=o(i.byMaterial),i.byProcess=o(i.byProcess),i.byMonth=o(i.byMonth).sort((f,d)=>f.label.localeCompare(d.label)),i}function Nh({data:r,xLabel:e,yLabel:i,byKeyAlpha:s=!1}){if(!r||r.length===0)return D.createElement("div",{style:{padding:"20px",textAlign:"center",color:"#666",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#f9f9f9"}},"Veri bulunamadı");const o=s?[...r].sort((T,A)=>T.label.localeCompare(A.label)):r,f=Math.max(...o.map(T=>i.includes("Toplam")?T.value:T.count)),d=200,p=400,g={top:20,right:20,bottom:60,left:60},v=Math.max(20,(p-g.left-g.right)/o.length-10);return D.createElement("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"16px",backgroundColor:"white"}},D.createElement("h4",{style:{margin:"0 0 16px 0",fontSize:"14px",color:"#333",textAlign:"center"}},`${e} - ${i}`),D.createElement("div",{style:{position:"relative",height:d+g.top+g.bottom,overflow:"auto"}},D.createElement("svg",{width:Math.max(p,o.length*(v+10)+g.left+g.right),height:d+g.top+g.bottom,style:{display:"block"}},D.createElement("line",{x1:g.left,y1:g.top,x2:g.left,y2:d+g.top,stroke:"#333",strokeWidth:1}),D.createElement("line",{x1:g.left,y1:d+g.top,x2:o.length*(v+10)+g.left,y2:d+g.top,stroke:"#333",strokeWidth:1}),...o.map((T,A)=>{const M=i.includes("Toplam")?T.value:T.count,F=f>0?M/f*d:0,at=g.left+A*(v+10)+5,ot=g.top+d-F;return D.createElement("g",{key:T.label},D.createElement("rect",{x:at,y:ot,width:v,height:F,fill:lw(A),stroke:"#333",strokeWidth:1}),D.createElement("text",{x:at+v/2,y:ot-5,textAnchor:"middle",fontSize:"10px",fill:"#333"},i.includes("Toplam")?x_(M):M),D.createElement("text",{x:at+v/2,y:d+g.top+15,textAnchor:"middle",fontSize:"10px",fill:"#333",transform:`rotate(-45, ${at+v/2}, ${d+g.top+15})`},T.label.length>10?T.label.substring(0,10)+"...":T.label))}),D.createElement("text",{x:15,y:g.top+d/2,textAnchor:"middle",fontSize:"12px",fill:"#333",transform:`rotate(-90, 15, ${g.top+d/2})`},i))))}function lw(r){const e=["#007bff","#28a745","#ffc107","#dc3545","#6c757d","#17a2b8","#fd7e14","#e83e8c","#6f42c1","#20c997"];return e[r%e.length]}const{useState:Te,useEffect:nd,useMemo:_w}=D;function ow(r,e){let i=r;return e&&e.formStructure&&e.formStructure.fields&&e.formStructure.fields.forEach(s=>{const o=new RegExp(s.id,"g");i=i.replace(o,s.label||s.id)}),i=i.replace(/([^→]+)→([^;,]+)/g,'<span style="background-color: #ffebee; color: #c62828; padding: 2px 4px; border-radius: 3px;">$1</span>→<span style="background-color: #e8f5e8; color: #2e7d32; padding: 2px 4px; border-radius: 3px;">$2</span>'),i}function uw({t:r,onLogout:e,showNotification:ce,SettingsModal:s,DetailModal:o,FilterPopup:f}){const[d,p]=Te([]),[g,v]=Te(null),[T,A]=Te(!1),[M,F]=Te(new Set),[at,ot]=Te(!1),[it,St]=Te(null),[Nt,Tt]=Te("count"),[Xt,gt]=Te(!1),[kt,I]=Te(""),[S,C]=Te(null),[O,N]=Te({}),[z,R]=Te(!1),[Jt,Wt]=Te(null),[Q,st]=Te({currentPage:1,itemsPerPage:10,totalItems:0}),[mt,Lt]=Te("quotes"),[x,J]=Te([]),[lt,k]=Te(!1),[Y,W]=Te({email:"",password:"",role:"admin"}),[q,ut]=Te({status:[],dateRange:{from:"",to:""},qtyRange:{min:"",max:""}}),[yt,Bt]=Te(!0),[En,Oe]=Te(null);nd(()=>{Bt(!0);const et=SS(QS,"quotes"),bt=LS(et,PS("createdAt","desc")),ae=jS(bt,Ge=>{const zn=Ge.docs.map(Yi=>({id:Yi.id,...Yi.data()}));p(zn),Bt(!1)},Ge=>{console.error("Firestore listener error:",Ge),Oe("Veriler yüklenirken bir hata oluştu."),Bt(!1)});return()=>ae()},[]),nd(()=>{It(),tt(),mt==="users"&&Pa()},[mt]);async function Me(){console.log("🔧 DEBUG: refresh() called");try{console.log("🔧 DEBUG: Calling API.listQuotes()...");const et=await nn.listQuotes();console.log("🔧 DEBUG: API.listQuotes() returned:",et.length,"quotes"),p(et),console.log("🔧 DEBUG: setList() called with quotes"),await It(),await tt(),mt==="users"&&await Pa(),console.log("🔧 DEBUG: refresh() completed successfully")}catch(et){console.error("🔧 DEBUG: refresh() error:",et)}}async function ue(et){console.log("🔧 DEBUG: handleAddRecord called with:",et);try{console.log("🔧 DEBUG: Calling API.addQuote...");const bt=await nn.addQuote(et);console.log("🔧 DEBUG: API.addQuote result:",bt),console.log("🔧 DEBUG: Refreshing list..."),await Me(),console.log("🔧 DEBUG: Showing success notification..."),ce("Kayıt başarıyla eklendi","success"),console.log("🔧 DEBUG: Add record completed successfully")}catch(bt){console.error("🔧 DEBUG: Error adding record:",bt),ce("Kayıt eklenirken hata oluştu: "+bt.message,"error")}}function ce(et,bt="info"){Wt({message:et,type:bt}),setTimeout(()=>{Wt(null)},3e3)}async function Pa(){try{const et=await nn.listUsers();J(et)}catch(et){console.error("Users load error:",et),ce("Kullanıcılar yüklenemedi","error")}}async function It(){try{if(typeof nn.getPriceSettings!="function"){console.warn("API.getPriceSettings is not available, using defaults"),N({currency:"USD",margin:20,discountThreshold:1e3,discountPercent:5});return}const et=await nn.getPriceSettings();N(et)}catch(et){console.error("Price settings load error:",et),N({currency:"USD",margin:20,discountThreshold:1e3,discountPercent:5})}}async function tt(){try{const et=await nn.getFormConfig();C(et.formConfig)}catch(et){console.error("Form config load error:",et)}}async function xt(){try{await nn.logout(),e()}catch(et){console.error("Logout error:",et),e()}}const ct=nw(d,q,kt,S),wt=iw(d,S),te=ct.length,Tn=Math.ceil(te/Q.itemsPerPage),ai=(Q.currentPage-1)*Q.itemsPerPage,Ba=ai+Q.itemsPerPage,Si=ct.slice(ai,Ba);D.useEffect(()=>{st(et=>({...et,totalItems:te}))},[te]);const kn=w_(d,Nt);w_(ct,Nt);function ke(){return Nt==="value"?"Toplam Değer (₺)":"Adet"}async function mn(et,bt){await nn.updateStatus(et,bt),Me(),ce("Kayıt durumu güncellendi!","success")}async function Ze(et){await nn.remove(et),Me()}function js(et,bt){F(ae=>{const Ge=new Set(ae);return bt?Ge.add(et):Ge.delete(et),Ge})}function xr(et){F(et?new Set(ct.map(bt=>bt.id)):new Set)}async function Nr(){if(!it)return;await ew(it.item,nn,ce)&&(Me(),St(null))}const Rn=YS(S);return D.createElement("div",{className:"admin-panel"},Jt&&D.createElement("div",{style:{position:"fixed",top:"20px",left:"50%",transform:"translateX(-50%)",backgroundColor:Jt.type==="success"?"#4caf50":Jt.type==="error"?"#f44336":"#2196f3",color:"white",padding:"12px 24px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:1e4,fontSize:"14px",fontWeight:"500",maxWidth:"400px",textAlign:"center",animation:"slideInDown 0.3s ease-out"}},Jt.message),D.createElement("div",{className:"header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"}},D.createElement("h1",null,r.a_title||"Admin Panel"),D.createElement("div",{style:{display:"flex",gap:"10px"}},D.createElement("a",{href:"./settings.html",className:"btn",style:{backgroundColor:"#007bff",color:"white",border:"none",padding:"8px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"16px",transition:"all 0.2s ease",textDecoration:"none",display:"inline-flex",alignItems:"center",gap:"5px"},onMouseOver:et=>et.target.style.backgroundColor="#0056b3",onMouseOut:et=>et.target.style.backgroundColor="#007bff",title:"Sistem Ayarları"},"⚙️ Ayarlar"),D.createElement("button",{onClick:xt,className:"btn",style:{backgroundColor:"#ff3b30",color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer"}},r.logout_btn||"Çıkış Yap"))),D.createElement("div",{className:"card",style:{marginBottom:12}},D.createElement("label",null,r.a_charts),D.createElement("div",{className:"row wrap",style:{gap:12,marginTop:6,display:"flex",flexWrap:"wrap",justifyContent:"space-between"}},D.createElement("div",{style:{flex:"1 1 calc(33.333% - 8px)",minWidth:250,maxWidth:"100%"}},D.createElement(Nh,{data:kn.byStatus,xLabel:r.dim_status,yLabel:ke(),byKeyAlpha:!1})),D.createElement("div",{style:{flex:"1 1 calc(33.333% - 8px)",minWidth:250,maxWidth:"100%"}},D.createElement(Nh,{data:kn.byProcess,xLabel:r.dim_process,yLabel:ke(),byKeyAlpha:!1})),D.createElement("div",{style:{flex:"1 1 calc(33.333% - 8px)",minWidth:250,maxWidth:"100%"}},D.createElement(Nh,{data:kn.byMaterial,xLabel:r.dim_material,yLabel:ke(),byKeyAlpha:!1})))),D.createElement("div",{className:"card",style:{marginTop:16}},D.createElement("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"}},D.createElement("label",{style:{fontSize:"16px",fontWeight:"600",margin:0,minWidth:"120px"}},r.a_list),D.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"}},D.createElement("input",{type:"text",placeholder:"Tüm veriler içinde arama...",value:kt,onChange:et=>I(et.target.value),style:{padding:"6px 12px",border:"1px solid #ddd",borderRadius:"4px",minWidth:"200px"}}),D.createElement("button",{onClick:()=>gt(!0),className:"btn",style:{backgroundColor:xh(q)>0?"#28a745":"#6c757d",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",position:"relative"}},"🔍 Filtreler",xh(q)>0&&D.createElement("span",{style:{position:"absolute",top:"-6px",right:"-6px",backgroundColor:"#dc3545",color:"white",borderRadius:"50%",width:"20px",height:"20px",fontSize:"11px",display:"flex",alignItems:"center",justifyContent:"center"}},xh(q))),D.createElement("button",{onClick:()=>rw(ut,I),className:"btn",style:{backgroundColor:"#dc3545",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer"}},"Temizle"),D.createElement("button",{onClick:()=>{console.log("🔧 DEBUG: Kayıt Ekle button clicked"),R(!0),console.log("🔧 DEBUG: showAddModal set to true")},className:"btn",style:{backgroundColor:"#28a745",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer"}},"Kayıt Ekle"),(function(){const et=M.size,bt=d.filter(zn=>zn.needsPriceUpdate).length;if(et===0&&bt===0)return null;const ae=et>0?"Seçilen kayıtların fiyatlarını güncelle":"Tümü güncelle",Ge=async()=>{try{et>0?await nn.applyPricesBulk(Array.from(M)):await nn.applyPricesAll(),F(new Set),await Me(),ce("Fiyatlar güncellendi","success")}catch(zn){console.error("Bulk update error",zn),ce("Toplu fiyat güncelleme başarısız","error")}};return D.createElement("button",{onClick:Ge,className:"btn",style:{backgroundColor:"#17a2b8",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer"}},ae)})())),D.createElement("div",{style:{marginTop:"12px",display:"flex",flexWrap:"wrap",gap:"8px"}},q.status.length>0&&D.createElement("span",{style:{backgroundColor:"#007bff",color:"white",padding:"4px 8px",borderRadius:"16px",fontSize:"11px",position:"relative",cursor:"pointer",transition:"all 0.2s ease",paddingRight:"20px"},onMouseOver:et=>et.target.style.backgroundColor="#0056b3",onMouseOut:et=>et.target.style.backgroundColor="#007bff",title:"Durum filtresini kaldır"},`Durum: ${q.status.join(", ")}`,D.createElement("span",{style:{position:"absolute",right:"4px",top:"50%",transform:"translateY(-50%)",cursor:"pointer",fontWeight:"bold",fontSize:"12px"},onClick:et=>{et.stopPropagation(),sw(ut,"status")}},"×"))),D.createElement("div",{style:{marginTop:"12px",fontSize:"14px",color:"#666"}},`${ct.length} kayıt gösteriliyor${ct.length!==d.length?` (toplam ${d.length} kayıttan)`:""}`)),D.createElement("div",{className:"table-container",style:{marginTop:"16px",overflowX:"auto"}},D.createElement("table",{className:"table"},D.createElement("thead",null,D.createElement("tr",null,D.createElement("th",null,D.createElement("input",{type:"checkbox",checked:M.size===ct.length&&ct.length>0,onChange:et=>xr(et.target.checked),onClick:et=>et.stopPropagation()})),...Rn.map(et=>D.createElement("th",{key:et.id},et.label)),D.createElement("th",null,"İşlemler"))),D.createElement("tbody",null,Si.map(et=>D.createElement("tr",{key:et.id,onClick:()=>v(et),style:{cursor:"pointer"}},D.createElement("td",null,D.createElement("input",{type:"checkbox",checked:M.has(et.id),onChange:bt=>{bt.stopPropagation(),js(et.id,bt.target.checked)},onClick:bt=>bt.stopPropagation()})),...Rn.map(bt=>D.createElement("td",{key:bt.id},$S(KS(et,bt.id),bt,et,{getPriceChangeType:ae=>JS(ae,O),setPriceReview:St,calculatePrice:ae=>r0(ae,O),statusLabel:C_,t:r}))),D.createElement("td",null,D.createElement("div",{style:{display:"flex",gap:"4px"}},D.createElement("button",{onClick:bt=>{bt.stopPropagation(),v(et)},className:"btn btn-sm",style:{fontSize:"12px",padding:"2px 6px"}},"Detay"),D.createElement("button",{onClick:bt=>{bt.stopPropagation(),Ze(et.id)},className:"btn btn-sm btn-danger",style:{fontSize:"12px",padding:"2px 6px"}},"Sil")))))))),Tn>1&&D.createElement("div",{className:"pagination-container",style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"10px",marginTop:"20px",padding:"20px 0"}},D.createElement("button",{onClick:()=>st(et=>({...et,currentPage:Math.max(1,et.currentPage-1)})),disabled:Q.currentPage===1,className:"btn btn-sm",style:{padding:"5px 10px"}},"← Önceki"),D.createElement("span",{style:{color:"var(--text)",fontSize:"14px",margin:"0 15px"}},`Sayfa ${Q.currentPage} / ${Tn} (${te} kayıt)`),D.createElement("button",{onClick:()=>st(et=>({...et,currentPage:Math.min(Tn,et.currentPage+1)})),disabled:Q.currentPage===Tn,className:"btn btn-sm",style:{padding:"5px 10px"}},"Sonraki →"),D.createElement("select",{value:Q.itemsPerPage,onChange:et=>st(bt=>({...bt,itemsPerPage:parseInt(et.target.value),currentPage:1})),style:{marginLeft:"20px",padding:"5px",borderRadius:"4px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(255,255,255,0.1)",color:"var(--text)"}},D.createElement("option",{value:5},"5 kayıt"),D.createElement("option",{value:10},"10 kayıt"),D.createElement("option",{value:25},"25 kayıt"),D.createElement("option",{value:50},"50 kayıt"))),at&&D.createElement(s,{onClose:()=>ot(!1),onSettingsUpdated:Me,t:r,showNotification:ce}),g&&D.createElement(o,{item:g,onClose:()=>v(null),setItemStatus:mn,onSaved:Me,formConfig:S,t:r,showNotification:ce}),Xt&&D.createElement(f,{filters:q,filterOptions:wt,formConfig:S,onFilterChange:(et,bt,ae)=>aw(q,ut,et,bt,ae),onClose:()=>gt(!1),t:r}),it&&it.item&&D.createElement("div",{className:"modal-overlay",onClick:()=>St(null),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3}},D.createElement("div",{className:"card detail-modal",onClick:et=>et.stopPropagation(),style:{width:"min(500px, 90vw)",maxHeight:"85vh",overflowY:"auto",position:"relative",padding:"20px",margin:"20px"}},D.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"10px",borderBottom:"1px solid rgba(255,255,255,0.1)"}},D.createElement("h3",{style:{margin:0}},"Fiyat Güncelleme"),D.createElement("button",{onClick:()=>St(null),style:{background:"none",border:"none",color:"#888",fontSize:"24px",cursor:"pointer",padding:"0",width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center"}},"×")),D.createElement("div",{style:{marginBottom:"20px"}},D.createElement("p",{style:{margin:"8px 0"}},`Müşteri: ${it.item.name||"N/A"}`),D.createElement("p",{style:{margin:"8px 0"}},`Proje: ${it.item.proj||"N/A"}`),D.createElement("p",{style:{margin:"8px 0"}},`Mevcut Fiyat: ${Number.isFinite(Number(it.originalPrice))?`₺${Number(it.originalPrice).toFixed(2)}`:"N/A"}`),D.createElement("p",{style:{margin:"8px 0"}},`Yeni Fiyat: ${Number.isFinite(Number(it.newPrice))?`₺${Number(it.newPrice).toFixed(2)}`:"N/A"}`),D.createElement("div",{style:{margin:"8px 0"}},[D.createElement("span",{key:"label"},"Değişiklik Nedeni: "),D.createElement("span",{key:"reason",style:{fontFamily:"monospace"},dangerouslySetInnerHTML:{__html:ow(tw(it.item,O,S)||"N/A",S)}})])),D.createElement("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:"15px"}},D.createElement("button",{onClick:()=>St(null),className:"btn btn-secondary"},"İptal"),D.createElement("button",{onClick:Nr,className:"btn btn-primary"},"Fiyatı Güncelle")))),D.createElement(cw,{isOpen:z,onClose:()=>R(!1),formConfig:S,onSave:ue}))}function cw({isOpen:r,onClose:e,formConfig:i,onSave:s}){const[o,f]=Te({}),[d,p]=Te(!1);console.log("🔧 DEBUG: AddRecordModal render - isOpen:",r,"formConfig:",!!i),nd(()=>{if(r&&i){const A={name:"",email:"",phone:"",company:"",proj:"",status:"new",createdAt:new Date().toISOString(),customFields:{}};i.formStructure&&i.formStructure.fields&&i.formStructure.fields.forEach(M=>{M.type==="multiselect"||M.type==="checkbox"?A.customFields[M.id]=[]:(M.type,A.customFields[M.id]="")}),f(A)}},[r,i]);function g(A,M,F){["name","email","phone","company","proj"].includes(A)?f(ot=>({...ot,[A]:M})):f(ot=>({...ot,customFields:{...ot.customFields,[A]:F==="multiselect"&&typeof M=="string"?M.split(",").map(it=>it.trim()).filter(Boolean):M}}))}async function v(){if(!d){p(!0);try{const A={...o,createdAt:new Date().toISOString(),status:o.status||"new"};console.log("🔧 DEBUG: Submitting record data:",A),await s(A),console.log("🔧 DEBUG: Record saved successfully"),e(),f({})}catch(A){console.error("🔧 DEBUG: Error saving record:",A),alert("Kayıt kaydedilirken hata oluştu: "+A.message)}finally{p(!1)}}}function T(A){const M=o.customFields?.[A.id]||"";switch(A.type){case"textarea":return D.createElement("textarea",{value:M,onChange:F=>g(A.id,F.target.value,A.type),style:{width:"100%",minHeight:"80px",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",resize:"vertical"},placeholder:A.label});case"radio":return D.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"8px"}},...(A.options||[]).map(F=>D.createElement("label",{key:F,style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"}},D.createElement("input",{type:"radio",name:A.id,value:F,checked:M===F,onChange:at=>g(A.id,at.target.value,A.type)}),F)));case"multiselect":return D.createElement("input",{type:"text",value:Array.isArray(M)?M.join(", "):M,onChange:F=>g(A.id,F.target.value,A.type),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"},placeholder:`${A.label} (virgülle ayırın)`});case"number":return D.createElement("input",{type:"number",value:M,onChange:F=>g(A.id,parseFloat(F.target.value)||0,A.type),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"},placeholder:A.label});case"date":return D.createElement("input",{type:"date",value:M,onChange:F=>g(A.id,F.target.value,A.type),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"}});case"email":return D.createElement("input",{type:"email",value:M,onChange:F=>g(A.id,F.target.value,A.type),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"},placeholder:A.label});default:return D.createElement("input",{type:"text",value:M,onChange:F=>g(A.id,F.target.value,A.type),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"},placeholder:A.label})}}return r?(console.log("🔧 DEBUG: AddRecordModal rendering modal content"),D.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:e},D.createElement("div",{className:"card detail-modal",style:{width:"min(600px, 90vw)",maxHeight:"85vh",overflowY:"auto",position:"relative",padding:"20px",margin:"20px"},onClick:A=>A.stopPropagation()},D.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"10px",borderBottom:"1px solid rgba(255,255,255,0.1)"}},D.createElement("h3",{style:{margin:0}},"Yeni Kayıt Ekle"),D.createElement("button",{onClick:e,className:"btn",style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer",color:"#999"}},"×")),D.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"20px"}},D.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"6px"}},D.createElement("label",{style:{fontWeight:"bold",fontSize:"14px",color:"#333"}},"Müşteri Adı *"),D.createElement("input",{type:"text",value:o.name||"",onChange:A=>g("name",A.target.value),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"},placeholder:"Müşteri adı"})),D.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"6px"}},D.createElement("label",{style:{fontWeight:"bold",fontSize:"14px",color:"#333"}},"E-posta *"),D.createElement("input",{type:"email",value:o.email||"",onChange:A=>g("email",A.target.value),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"},placeholder:"E-posta adresi"})),D.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"6px"}},D.createElement("label",{style:{fontWeight:"bold",fontSize:"14px",color:"#333"}},"Telefon"),D.createElement("input",{type:"tel",value:o.phone||"",onChange:A=>g("phone",A.target.value),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"},placeholder:"Telefon numarası"})),D.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"6px"}},D.createElement("label",{style:{fontWeight:"bold",fontSize:"14px",color:"#333"}},"Şirket"),D.createElement("input",{type:"text",value:o.company||"",onChange:A=>g("company",A.target.value),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"},placeholder:"Şirket adı"})),D.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"6px"}},D.createElement("label",{style:{fontWeight:"bold",fontSize:"14px",color:"#333"}},"Proje"),D.createElement("input",{type:"text",value:o.proj||"",onChange:A=>g("proj",A.target.value),style:{width:"100%",padding:"8px",border:"1px solid #ddd",borderRadius:"4px"},placeholder:"Proje adı"})),...i&&i.formStructure&&i.formStructure.fields?i.formStructure.fields.map(A=>D.createElement("div",{key:A.id,style:{display:"flex",flexDirection:"column",gap:"6px"}},D.createElement("label",{style:{fontWeight:"bold",fontSize:"14px",color:"#333"}},A.label+(A.required?" *":"")),T(A))):[]),D.createElement("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px",paddingTop:"20px",borderTop:"1px solid rgba(255,255,255,0.1)"}},D.createElement("button",{onClick:e,className:"btn",style:{padding:"10px 20px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"}},"İptal"),D.createElement("button",{onClick:v,disabled:d,className:"btn",style:{padding:"10px 20px",backgroundColor:d?"#999":"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:d?"not-allowed":"pointer"}},d?"Kaydediliyor...":"Kaydet"))))):(console.log("🔧 DEBUG: AddRecordModal not rendering - isOpen is false"),null)}function fw({message:r,type:e="success",onClose:i}){const s={position:"fixed",top:"20px",left:"50%",transform:"translateX(-50%)",backgroundColor:e==="success"?"#28a745":e==="error"?"#dc3545":e==="warning"?"#ffc107":"#17a2b8",color:e==="warning"?"#212529":"white",padding:"12px 20px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",zIndex:9999,minWidth:"300px",maxWidth:"500px",display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"14px",fontWeight:"500",animation:"slideInDown 0.3s ease-out"};return D.createElement("div",{style:s},D.createElement("span",null,r),D.createElement("button",{onClick:i,style:{background:"none",border:"none",color:"inherit",fontSize:"16px",fontWeight:"bold",cursor:"pointer",marginLeft:"12px",padding:"0 4px",opacity:.8},onMouseOver:o=>o.target.style.opacity="1",onMouseOut:o=>o.target.style.opacity="0.8"},"×"))}function hw(){const[r,e]=D.useState([]);return{notifications:r,showNotification:(o,f="success",d=4e3)=>{const p=Date.now()+Math.random(),g={id:p,message:o,type:f};e(v=>[...v,g]),setTimeout(()=>{e(v=>v.filter(T=>T.id!==p))},d)},removeNotification:o=>{e(f=>f.filter(d=>d.id!==o))}}}const{useState:bs,useEffect:dw}=D,id=window.location.pathname.includes("panel-gizli.html")?"admin":"quote";function mw({onLang:r,lang:e,t:i}){const s=id==="admin";return Qt.jsx("div",{className:"nav",children:Qt.jsxs("div",{className:"nav-inner container",children:[Qt.jsxs("div",{className:"brand",children:[Qt.jsx("div",{className:"dot"}),Qt.jsx("a",{href:s?"./panel-gizli.html":"./index.html",children:"BURKOL"})]}),Qt.jsxs("div",{className:"row wrap",children:[Qt.jsx("div",{className:"tabs"}),Qt.jsx("div",{style:{width:12}}),Qt.jsxs("select",{value:e,onChange:o=>r(o.target.value),children:[Qt.jsx("option",{value:"tr",children:"Türkçe"}),Qt.jsx("option",{value:"en",children:"English"})]})]})]})})}function pw(){const{t:r,lang:e,setLang:i}=XE(),[s,o]=bs(!1),{notifications:f,showNotification:d,removeNotification:p}=hw();dw(()=>{async function A(){try{localStorage.getItem("bk_admin_token")&&(await nn.me(),o(!0))}catch{localStorage.removeItem("bk_admin_token"),o(!1)}}id==="admin"&&A()},[]);function g(){o(!0)}function v(){o(!1)}async function T(A){try{await nn.createQuote(A),d("Teklif başarıyla gönderildi!","success")}catch(M){throw console.error("Quote submission error:",M),M}}return Qt.jsxs(D.Fragment,{children:[f.map(A=>Qt.jsx(fw,{message:A.message,type:A.type,onClose:()=>p(A.id)},A.id)),Qt.jsx(mw,{onLang:i,lang:e,t:r}),id==="admin"?s?Qt.jsx(uw,{t:r,onLogout:v,showNotification:d}):Qt.jsx(gw,{onLogin:g,t:r}):Qt.jsx(iT,{onSubmit:T,showNotification:d,t:r})]})}function gw({onLogin:r,t:e}){const[i,s]=bs(""),[o,f]=bs(""),[d,p]=bs(!0),[g,v]=bs(""),[T,A]=bs(!1);async function M(F){if(F.preventDefault(),!i||!o){v("E-posta ve şifre gerekli");return}A(!0),v("");try{const at=await nn.login(i,o,d);at&&at.token?r():v("Giriş başarısız. Lütfen tekrar deneyin.")}catch(at){console.error(at),v(at.message||"Giriş başarısız. Sunucu hatası.")}finally{A(!1)}}return Qt.jsx("div",{className:"gate",children:Qt.jsxs("form",{className:"card",onSubmit:M,style:{maxWidth:400,width:"100%",margin:"0 auto",padding:16,borderRadius:8,boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},children:[Qt.jsx("h2",{className:"title",style:{marginBottom:16,fontSize:18,textAlign:"center"},children:"Admin Girişi"}),g&&Qt.jsx("div",{className:"notice",style:{marginBottom:12},children:g}),Qt.jsxs("div",{className:"field",style:{marginBottom:12},children:[Qt.jsx("label",{style:{marginBottom:4},children:"E-posta"}),Qt.jsx("input",{type:"email",name:"email",required:!0,value:i,onChange:F=>s(F.target.value)})]}),Qt.jsxs("div",{className:"field",style:{marginBottom:16},children:[Qt.jsx("label",{style:{marginBottom:4},children:"Şifre"}),Qt.jsx("input",{type:"password",name:"password",required:!0,value:o,onChange:F=>f(F.target.value)})]}),Qt.jsxs("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center",marginTop:10},children:[Qt.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",color:"white",fontSize:"14px"},children:[Qt.jsx("input",{type:"checkbox",checked:d,onChange:F=>p(F.target.checked)}),Qt.jsx("span",{style:{color:"white"},children:e.remember_me||"Beni hatırla"})]}),Qt.jsx("button",{type:"submit",className:"btn accent",onMouseOver:F=>F.target.style.backgroundColor="rgba(255,255,255,0.2)",onMouseOut:F=>F.target.style.backgroundColor="",style:{transition:"all 0.2s ease"},children:e.login_btn||"Giriş Yap"})]})]})})}HE.createRoot(document.getElementById("root")).render(Qt.jsx(pw,{}));
