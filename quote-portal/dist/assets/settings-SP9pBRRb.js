import{R as e,A as $,c as Ce,r as oe}from"./api-KmmqYYhL.js";function ie({formula:t,parameters:l,onValidation:a}){const[c,u]=e.useState(null),[n,m]=e.useState(!1);e.useEffect(()=>{t?v(t):(u(null),a&&a(null))},[t,l]);async function v(f){m(!0);try{const y=await k(f);u(y),a&&a(y)}catch(y){const B={isValid:!1,error:y.message,type:"VALIDATION_ERROR"};u(B),a&&a(B)}finally{m(!1)}}async function k(f){const y=N(f),B=g(y);if(!B.isValid)return B;const _=A(y);if(!_.isValid)return _;const d=b(y);return d.isValid?{isValid:!0,testValues:I(y),type:"SUCCESS",cleanFormula:y}:d}function N(f){let y=f.trim();return y.startsWith("=")&&(y=y.substring(1)),y}function g(f){const y=[],B=(f.match(/\(/g)||[]).length,_=(f.match(/\)/g)||[]).length;if(B!==_&&y.push("Unbalanced parentheses"),/[+\-*/]{2,}/.test(f)&&y.push("Invalid operator sequence"),f.trim()||y.push("Formula cannot be empty"),f.match(/IF\s*\(/gi)){const F=/IF\s*\([^)]*\)/gi;let T;for(;(T=F.exec(f))!==null;)(T[0].match(/,/g)||[]).length!==2&&y.push("IF statement requires exactly 3 parameters: condition, true_value, false_value")}return y.length>0?{isValid:!1,error:`Syntax Error: ${y.join(", ")}`,type:"SYNTAX_ERROR"}:{isValid:!0}}function A(f){const y=[];return(f.includes("/0")||f.includes("/ 0"))&&y.push("Division by zero detected"),(f.includes("SQRT(-")||f.includes("√(-"))&&y.push("Square root of negative number"),y.length>0?{isValid:!1,error:`Mathematical Logic Error: ${y.join(", ")}`,type:"MATH_ERROR"}:{isValid:!0}}function b(f){if(!l)return{isValid:!0};const y=f.match(/[A-Z]+/g)||[],B=l.map(d=>d.id),_=y.filter(d=>!B.includes(d)&&!["IF","AND","OR","MAX","MIN","ROUND","SQRT","ABS","POWER","POW","EXP","LN","LOG","LOG10","SIN","COS","TAN","ASIN","ACOS","ATAN","ATAN2","CEILING","CEIL","FLOOR","TRUNC","ROUNDUP","ROUNDDOWN","AVERAGE","SUM","COUNT","COUNTA","NOT","LEN","LEFT","RIGHT","MID","UPPER","LOWER","PI","E","MARGIN","DISCOUNT","VAT","MARKUP","SUMPRODUCT"].includes(d)&&!["qty","thickness","material","process"].includes(d.toLowerCase()));return _.length>0?{isValid:!1,error:`Undefined parameters: ${_.join(", ")}`,type:"PARAMETER_ERROR"}:{isValid:!0}}function I(f){return[{A:1,B:2,C:3,qty:1,thickness:1},{A:10,B:20,C:30,qty:10,thickness:3},{A:100,B:200,C:300,qty:100,thickness:5}].map(_=>{try{let d=f;Object.keys(_).forEach(T=>{const P=new RegExp(`\\b${T}\\b`,"g");d=d.replace(P,_[T])}),d=d.replace(/IF\s*\(\s*([^,]+)\s*,\s*([^,]+)\s*,\s*([^)]+)\s*\)/g,(T,P,R,i)=>{try{return Function(`"use strict"; return (${P})`)()?R:i}catch{return R}});const F=Function(`"use strict"; return (${d})`)();return{input:_,output:F,success:!0}}catch(d){return{input:_,error:d.message,success:!1}}})}function w(){return n?"⏳":c?c.isValid?"✅":"❌":"❓"}function r(){return n?"#ffc107":c?c.isValid?"#28a745":"#dc3545":"#6c757d"}const E={padding:"8px 12px",borderRadius:"6px",border:`1px solid ${r()}`,backgroundColor:c?.isValid?"#d4edda":"#f8d7da",marginTop:"8px",fontSize:"13px"};return!c&&!n?null:e.createElement("div",{style:E},e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:c?.details?"6px":"0"}},e.createElement("span",{style:{fontSize:"16px"}},w()),e.createElement("span",{style:{fontWeight:"500",color:r()}},n?"Validating formula...":c.isValid?"Formula is valid":"Formula has errors")),c?.error&&e.createElement("div",{style:{color:"#721c24",backgroundColor:"#f5c6cb",padding:"4px 8px",borderRadius:"4px",marginTop:"4px",fontSize:"12px"}},c.error),c?.isValid&&c.testValues&&e.createElement("div",{style:{marginTop:"8px"}},e.createElement("div",{style:{fontSize:"11px",fontWeight:"500",marginBottom:"4px"}},"Test Results:"),c.testValues.slice(0,2).map((f,y)=>e.createElement("div",{key:y,style:{fontSize:"10px",color:f.success?"#155724":"#721c24",marginBottom:"2px"}},`${JSON.stringify(f.input)} → ${f.success?f.output:f.error}`))))}ie.validateFormula=async function(t,l=[]){try{if(!t||typeof t!="string")return{isValid:!1,error:"Formula is required",type:"SYNTAX_ERROR"};if(!/^[a-zA-Z0-9_+\-*/().,\s<>=!&|IF|ELSE|THEN|AND|OR]*$/i.test(t))return{isValid:!1,error:"Formula contains invalid characters",type:"SYNTAX_ERROR"};const c=l.map(v=>v.name||v.id||v),u=/\{([^}]+)\}/g;let n;const m=[];for(;(n=u.exec(t))!==null;){const v=n[1];c.includes(v)||m.push(v)}return m.length>0?{isValid:!1,error:`Missing parameters: ${m.join(", ")}`,type:"PARAMETER_ERROR"}:{isValid:!0,error:null,type:"SUCCESS"}}catch(a){return{isValid:!1,error:a.message,type:"VALIDATION_ERROR"}}};function se(t){const l={backendToUser:{},userToBackend:{}};return t.forEach((a,c)=>{const u=String.fromCharCode(65+c);l.backendToUser[a.id]=u,l.userToBackend[u]=a.id}),l}function Ne(t,l){if(!t||!l)return t;let a=t;return Object.entries(l.backendToUser).forEach(([c,u])=>{const n=new RegExp(`\\b${c}\\b`,"g");a=a.replace(n,u)}),a}function we(t,l){if(!t||!l)return t;let a=t;return Object.entries(l.userToBackend).forEach(([c,u])=>{const n=new RegExp(`\\b${c}\\b`,"g");a=a.replace(n,u)}),a}function Te(t){return t.type==="form"&&t.formField}function Ae(t){return t.type==="fixed"&&typeof t.value=="number"}function _e(t){return!t||!Array.isArray(t)?[]:t.map(l=>({value:l.id,label:l.label,hasOptions:l.hasOptions,options:l.options||[],type:l.type}))}function Ie(t,l=[]){const a=[];return(!t.name||t.name.trim().length<2)&&a.push("Parametre adı en az 2 karakter olmalıdır"),(!t.type||!["fixed","form"].includes(t.type))&&a.push("Geçerli bir parametre türü seçilmelidir"),t.type==="fixed"&&(typeof t.value!="number"||isNaN(t.value))&&a.push("Sabit değer geçerli bir sayı olmalıdır"),t.type==="form"&&(t.formField?l.some(u=>u.value===t.formField)||a.push("Seçilen form alanı mevcut değil"):a.push("Form alanı seçilmelidir")),a}function Pe(t,l){if(!t)return{isValid:!0,errors:[]};const a=[],c=se(l),u=Object.values(c.backendToUser),n=t.match(/\b[A-Z]\b/g)||[],m=n.filter(v=>!u.includes(v));return m.length>0&&a.push(`Tanımlanmamış parametreler: ${m.join(", ")}`),{isValid:a.length===0,errors:a,usedLetters:[...new Set(n)],availableLetters:u}}const V={createUserFriendlyIdMapping:se,convertFormulaToUserFriendly:Ne,convertFormulaToBackend:we,isFormDataParameter:Te,isFixedValueParameter:Ae,extractFieldInfoFromFormConfig:_e,validateParameter:Ie,validateUserFriendlyFormula:Pe},{useState:X,useEffect:Je,useRef:Re}=e;function Oe({value:t="",onChange:l,parameters:a=[],placeholder:c="Örn: A * B + SQRT(C)",disabled:u=!1}){const[n,m]=X(0),[v,k]=X(!1),[N,g]=X([]),A=Re(null),b=[{name:"SQRT",description:"Karekök",example:"SQRT(A)"},{name:"ROUND",description:"Yuvarlama",example:"ROUND(A, 2)"},{name:"MAX",description:"Maksimum",example:"MAX(A, B)"},{name:"MIN",description:"Minimum",example:"MIN(A, B)"},{name:"ABS",description:"Mutlak değer",example:"ABS(A)"},{name:"POWER",description:"Üs alma",example:"POWER(A, 2)"},{name:"CEIL",description:"Yukarı yuvarlama",example:"CEIL(A)"},{name:"FLOOR",description:"Aşağı yuvarlama",example:"FLOOR(A)"},{name:"IF",description:"Koşul",example:"IF(A > 10, B, C)"},{name:"AND",description:"Ve",example:"AND(A > 5, B < 10)"},{name:"OR",description:"Veya",example:"OR(A > 5, B < 10)"},{name:"PI",description:"Pi sayısı",example:"PI"},{name:"E",description:"Euler sayısı",example:"E"}],I=[{symbol:"+",description:"Toplama"},{symbol:"-",description:"Çıkarma"},{symbol:"*",description:"Çarpma"},{symbol:"/",description:"Bölme"},{symbol:"(",description:"Parantez açma"},{symbol:")",description:"Parantez kapatma"},{symbol:">",description:"Büyüktür"},{symbol:"<",description:"Küçüktür"},{symbol:">=",description:"Büyük eşit"},{symbol:"<=",description:"Küçük eşit"},{symbol:"==",description:"Eşittir"},{symbol:"!=",description:"Eşit değil"}],w=V.createUserFriendlyIdMapping(a),r=Object.values(w.backendToUser);function E(d,F){const P=d.substring(0,F).split(/[^A-Za-z0-9_]/).pop();if(!P)return[];const R=[];return r.forEach(i=>{i.toLowerCase().startsWith(P.toLowerCase())&&R.push({type:"parameter",text:i,description:`Parametre ${i}`,insertText:i})}),b.forEach(i=>{i.name.toLowerCase().startsWith(P.toLowerCase())&&R.push({type:"function",text:i.name,description:i.description,insertText:i.name+"(",example:i.example})}),R.slice(0,8)}function f(d){const F=d.target.value,T=d.target.selectionStart;l(F),m(T);const P=E(F,T);g(P),k(P.length>0)}function y(d){const F=A.current;if(!F)return;const T=t.substring(0,n),P=t.substring(n),R=T.lastIndexOf(T.split(/[^A-Za-z0-9_]/).pop()),i=t.substring(0,R)+d.insertText+P;l(i),k(!1),setTimeout(()=>{const z=R+d.insertText.length;F.setSelectionRange(z,z),F.focus()},0)}function B(d){d.key==="Escape"&&k(!1),v&&N.length>0&&d.key==="Tab"&&(d.preventDefault(),y(N[0]))}function _(d){const F=A.current;if(!F)return;const T=F.selectionStart,P=F.selectionEnd,R=t.substring(0,T)+d+t.substring(P);l(R),setTimeout(()=>{const i=T+d.length;F.setSelectionRange(i,i),F.focus()},0)}return e.createElement("div",{className:"enhanced-formula-editor"},e.createElement("div",{className:"formula-editor-container"},e.createElement("textarea",{ref:A,value:t,onChange:f,onKeyDown:B,className:"form-control formula-textarea",placeholder:c,rows:3,disabled:u,style:{fontFamily:"Monaco, Consolas, monospace",fontSize:"14px",position:"relative",zIndex:2}}),v&&N.length>0&&e.createElement("div",{className:"formula-suggestions",style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #ddd",borderRadius:"4px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",zIndex:1e3,maxHeight:"200px",overflowY:"auto"}},...N.map((d,F)=>e.createElement("div",{key:F,className:"suggestion-item",style:{padding:"8px 12px",cursor:"pointer",borderBottom:F<N.length-1?"1px solid #eee":"none"},onClick:()=>y(d),onMouseEnter:T=>T.target.style.backgroundColor="#f8f9fa",onMouseLeave:T=>T.target.style.backgroundColor="white"},e.createElement("div",{style:{fontWeight:"bold",color:d.type==="parameter"?"#007bff":"#28a745"}},d.text),e.createElement("div",{style:{fontSize:"0.8em",color:"#666"}},d.description),d.example&&e.createElement("div",{style:{fontSize:"0.75em",color:"#999",fontFamily:"monospace"}},d.example))))),e.createElement("div",{className:"formula-quick-actions",style:{marginTop:"10px",display:"flex",flexWrap:"wrap",gap:"5px"}},e.createElement("div",{style:{fontSize:"0.9em",fontWeight:"bold",width:"100%",marginBottom:"5px"}},"⚡ Hızlı Ekleme:"),r.length>0&&e.createElement("div",{style:{display:"flex",gap:"3px",flexWrap:"wrap"}},...r.map(d=>e.createElement("button",{key:d,type:"button",onClick:()=>_(d),className:"btn btn-sm btn-outline-primary",style:{fontSize:"0.75em"}},d))),e.createElement("div",{style:{display:"flex",gap:"3px",flexWrap:"wrap",marginTop:"5px"}},...I.slice(0,6).map(d=>e.createElement("button",{key:d.symbol,type:"button",onClick:()=>_(d.symbol),className:"btn btn-sm btn-outline-secondary",style:{fontSize:"0.75em"},title:d.description},d.symbol))),e.createElement("div",{style:{display:"flex",gap:"3px",flexWrap:"wrap",marginTop:"5px"}},...["SQRT(","ROUND(","IF(","MAX(","MIN("].map(d=>e.createElement("button",{key:d,type:"button",onClick:()=>_(d),className:"btn btn-sm btn-outline-success",style:{fontSize:"0.75em"}},d)))),e.createElement("style",null,`
      .enhanced-formula-editor {
        position: relative;
      }
      
      .formula-editor-container {
        position: relative;
      }
      
      .formula-textarea {
        resize: vertical;
        min-height: 80px;
      }
      
      .formula-parameter {
        color: #007bff;
        font-weight: bold;
      }
      
      .formula-function {
        color: #28a745;
        font-weight: bold;
      }
      
      .formula-suggestions {
        margin-top: 2px;
      }
      
      .suggestion-item:hover {
        background-color: #f8f9fa !important;
      }
    `))}const{useState:O,useEffect:Z}=e;function Be({t,showNotification:l}){const[a,c]=O([]),[u,n]=O(""),[m,v]=O(""),[k,N]=O(""),[g,A]=O(""),[b,I]=O(""),[w,r]=O(""),[E,f]=O([]),[y,B]=O(""),[_,d]=O(""),[F,T]=O(null),[P,R]=O(!0),[i,z]=O(!1),[M,s]=O({backendToUser:{},userToBackend:{}}),[x,S]=O([]),[L,j]=O(!0),[Q,ee]=O(null),[K,H]=O({name:"",value:"",formField:""}),[G,J]=O([]);Z(()=>{ce(),me()},[]);async function ce(){j(!0);try{const o=await $.getFormFields(),h=V.extractFieldInfoFromFormConfig(o.fields);S(h)}catch(o){console.error("Form fields load error:",o),l("Form alanları yüklenemedi!","error"),S([])}finally{j(!1)}}Z(()=>{if(!w)return;const o=x.find(D=>D.value===w);if(!o||!o.hasOptions||!o.options)return;const h=E.map(D=>D.option),p=o.options,C=[...E];p.forEach(D=>{h.includes(D)||C.push({option:D,value:""})}),C.length!==E.length&&f(C)},[w,x,E]);async function me(){try{const o=await $.getPriceSettings(),h=o.parameters||[];c(h),n(o.formula||"");const p=V.createUserFriendlyIdMapping(h);s(p);const C=V.convertFormulaToUserFriendly(o.formula||"",p);v(C)}catch(o){console.error("Price settings load error:",o)}}async function de(){try{if(a.some(p=>Array.isArray(p.lookupTable)&&p.lookupTable.some(C=>C.value===""||Number.isNaN(Number(C.value))))){l("Eşleştirme tablosunda boş veya geçersiz değerler var. Lütfen tüm değerleri doldurun.","error");return}const h=V.convertFormulaToBackend(m,M);await $.savePriceSettings({parameters:a,formula:h}),l("Fiyat ayarları kaydedildi!","success")}catch(o){console.error("Price settings save error:",o),l("Fiyat ayarları kaydedilemedi!","error")}}function ue(){const o=x.find(Se=>Se.value===w),h=o?o.label||o.value:"",p=k==="form"?h:g,C=V.validateParameter({name:p,type:k,value:k==="fixed"?parseFloat(b):void 0,formField:k==="form"?w:void 0},x);if(C.length>0){l(C[0],"error");return}const D={id:k==="form"?o?o.value:p.toLowerCase().replace(/[^a-z0-9]/g,"_"):p.toLowerCase().replace(/[^a-z0-9]/g,"_"),name:p,type:k};k==="fixed"?D.value=parseFloat(b)||0:k==="form"&&(D.formField=w,E.length>0&&(D.lookupTable=[...E]));const q=[...a,D];c(q);const ae=V.createUserFriendlyIdMapping(q);s(ae);const ke=V.convertFormulaToBackend(m,M),Fe=V.convertFormulaToUserFriendly(ke,ae);v(Fe),fe()}function pe(o){const h=a.filter(q=>q.id!==o);c(h);const p=V.createUserFriendlyIdMapping(h);s(p);const C=V.convertFormulaToBackend(m,M),D=V.convertFormulaToUserFriendly(C,p);v(D)}function fe(){A(""),I(""),r(""),f([]),N(""),B(""),d("")}function ge(o,h){const p=[...E],C=h===""||isNaN(parseFloat(h))?"":parseFloat(h);p[o]={...p[o],value:C},f(p)}function ye(o){v(o);const h=V.convertFormulaToBackend(o,M);n(h)}function be(o){ee(o.id),H({name:o.name||"",value:o.type==="fixed"?o.value??"":"",formField:o.type==="form"&&o.formField||""});const h=x.find(p=>p.value===o.formField);o.type==="form"&&h&&h.hasOptions?J([...o.lookupTable||[]]):J([])}function te(){ee(null),H({name:"",value:"",formField:""}),J([]),setParamLookupEditIndex(null),setParamLookupDraft({value:""})}function Ee(o){const h=a.map(p=>{if(p.id!==o.id)return p;const C={...p,name:K.name};return p.type==="fixed"?C.value=K.value===""?0:parseFloat(K.value)||0:p.type==="form"&&(C.formField=p.formField,C.lookupTable=G),C});c(h),te()}function xe(o,h){const p=[...G],C=h===""||isNaN(parseFloat(h))?"":parseFloat(h);p[o]={...p[o],value:C},J(p)}async function he(){if(!m){T(null),R(!0);return}const o=V.validateUserFriendlyFormula(m,a);if(!o.isValid){T({isValid:!1,message:o.errors.join(", "),suggestions:[`${t.formula_validate_params||"Kullanılabilir parametreler:"} ${o.availableLetters.join(", ")}`]}),R(!1);return}const h=V.convertFormulaToBackend(m,M),C=await ie.validateFormula(h,a);T(C),R(C.isValid)}Z(()=>{he()},[m,a]);function ve(o,h){return M.backendToUser[o.id]||String.fromCharCode(65+h)}return e.createElement(e.Fragment,null,e.createElement("div",{className:"card",style:{marginBottom:"20px",backgroundColor:"#f8f9fa"}},e.createElement("h2",null,"🔧 Dinamik Fiyatlandırma Sistemi"),e.createElement("p",{style:{margin:"10px 0",color:"#666"}},"Form verilerinize dayalı dinamik fiyatlandırma parametreleri oluşturun. Parametreler otomatik olarak A, B, C... harfleriyle etiketlenir.")),e.createElement("div",{className:"card",style:{marginBottom:"12px"}},e.createElement("h3",null,"📊 Fiyat Parametreleri"),L&&e.createElement("div",{className:"alert alert-info"},"Form alanları yükleniyor..."),!L&&e.createElement(e.Fragment,null,e.createElement("div",{className:"form-group"},e.createElement("label",null,t.pricing_param_type||"Parametre Türü"),e.createElement("select",{value:k,onChange:o=>N(o.target.value),className:"form-control"},e.createElement("option",{value:""},t.pricing_select||"Seçiniz..."),e.createElement("option",{value:"fixed"},"🔢 "+(t.pricing_fixed_param||"Sabit Değer")),e.createElement("option",{value:"form"},"📝 "+(t.pricing_form_param||"Form Verisinden")))),k==="fixed"&&e.createElement("div",{className:"form-group"},e.createElement("label",null,t.pricing_param_name||"Parametre Adı"),e.createElement("input",{type:"text",value:g,onChange:o=>A(o.target.value),className:"form-control",placeholder:"Örn: materyalKatsayisi, islemFiyati"})),k==="fixed"&&e.createElement("div",{className:"form-group"},e.createElement("label",null,t.pricing_fixed_value||"Sabit Değer"),e.createElement("input",{type:"number",value:b,onChange:o=>I(o.target.value),className:"form-control",placeholder:"0",step:"0.01"})),k==="form"&&e.createElement("div",null,e.createElement("div",{className:"form-group"},e.createElement("label",null,t.pricing_form_field||"Form Alanı"),x.length===0?e.createElement("div",{className:"alert alert-warning"},t.pricing_no_form_fields||"Henüz form alanı bulunmuyor. Önce Form Düzenleme menüsünden form alanları oluşturun."):e.createElement("select",{value:w,onChange:o=>r(o.target.value),className:"form-control"},e.createElement("option",{value:""},t.pricing_select||"Seçiniz..."),...x.map(o=>e.createElement("option",{key:o.value,value:o.value},`${o.label} (${o.type})`)))),w&&e.createElement("div",{className:"form-group"},e.createElement("label",null,t.pricing_param_name_auto||"Parametre Adı (otomatik)"),e.createElement("input",{type:"text",value:x.find(o=>o.value===w)?.label||"",readOnly:!0,className:"form-control"})),w&&x.find(o=>o.value===w)?.hasOptions&&e.createElement("div",{className:"form-group"},e.createElement("label",null,"🔗 Değer Eşleştirme Tablosu"),e.createElement("div",{style:{marginBottom:"8px",fontSize:"13px",color:"#666"}},"Form alanındaki seçenekler otomatik olarak listelenmiştir. Sadece değerlerini güncelleyin."),E.length>0&&e.createElement("table",{className:"table table-sm"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Seçenek"),e.createElement("th",null,"Değer"))),e.createElement("tbody",null,...E.map((o,h)=>e.createElement("tr",{key:h},e.createElement("td",null,o.option),e.createElement("td",null,e.createElement("input",{type:"number",value:o.value===0?"":o.value??"",onChange:p=>ge(h,p.target.value),className:"form-control",step:"0.01",style:{width:"100px"}})))))))),k&&e.createElement("button",{onClick:ue,className:"btn btn-primary",style:{marginTop:"6px"},disabled:x.length===0&&k==="form"},"➕ Parametre Ekle")),a.length>0&&e.createElement("div",{style:{marginTop:"12px"}},e.createElement("h4",null,"📋 Mevcut Parametreler"),e.createElement("div",{className:"alert alert-info",style:{fontSize:"0.9em"}},"Parametreler formülde A, B, C... harfleri ile kullanılır"),e.createElement("table",{className:"table"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Formül ID"),e.createElement("th",null,"Ad"),e.createElement("th",null,"Tür"),e.createElement("th",null,"Değer/Alan"),e.createElement("th",null,"İşlem"))),e.createElement("tbody",null,...a.map((o,h)=>e.createElement("tr",{key:o.id},e.createElement("td",null,e.createElement("strong",{style:{color:"#007bff",fontSize:"1.1em"}},ve(o,h))),e.createElement("td",null,Q===o.id?e.createElement("input",{type:"text",value:K.name,onChange:p=>H({...K,name:p.target.value}),className:"form-control",placeholder:"Parametre adı"}):o.name),e.createElement("td",null,o.type==="fixed"?"🔢 Sabit":"📝 Form"),e.createElement("td",null,Q===o.id?o.type==="fixed"?e.createElement("input",{type:"number",value:K.value,onChange:p=>H({...K,value:p.target.value}),className:"form-control",step:"0.01",style:{width:"140px"}}):e.createElement("select",{className:"form-control",value:K.formField,onChange:p=>H({...K,formField:p.target.value})},e.createElement("option",{value:""},"Seçiniz..."),...x.map(p=>e.createElement("option",{key:p.value,value:p.value},`${p.label} (${p.type})`))):o.type==="fixed"?o.value:x.find(p=>p.value===o.formField)?.label||o.formField),e.createElement("td",null,(()=>{const p=x.find(D=>D.value===o.formField),C=o.type==="fixed"||o.type==="form"&&p&&p.hasOptions;return Q===o.id?e.createElement(e.Fragment,null,e.createElement("button",{onClick:()=>Ee(o),className:"btn btn-sm btn-success",style:{marginRight:"6px"}},"Kaydet"),e.createElement("button",{onClick:te,className:"btn btn-sm btn-secondary"},"İptal")):e.createElement(e.Fragment,null,C&&e.createElement("button",{onClick:()=>be(o),className:"btn btn-sm btn-primary",style:{marginRight:"6px"}},"Düzenle"),e.createElement("button",{onClick:()=>pe(o.id),className:"btn btn-sm btn-danger"},"Sil"))})())))),...a.map(o=>{const h=x.find(C=>C.value===o.formField);return Q===o.id&&o.type==="form"&&h&&h.hasOptions?e.createElement("tr",{key:o.id+"-lookup"},e.createElement("td",{colSpan:5},e.createElement("div",{className:"card",style:{marginTop:"8px"}},e.createElement("h4",null,"🔗 Değer Eşleştirme (Düzenleme)"),G&&G.length>0?e.createElement("table",{className:"table table-sm"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",null,"Seçenek"),e.createElement("th",null,"Değer"))),e.createElement("tbody",null,...G.map((C,D)=>e.createElement("tr",{key:D},e.createElement("td",null,C.option),e.createElement("td",null,e.createElement("input",{type:"number",value:C.value===0?"":C.value??"",onChange:q=>xe(D,q.target.value),className:"form-control",step:"0.01",style:{width:"120px"}})))))):e.createElement("div",{className:"alert alert-warning"},"Eşleştirme tablosu boş")))):null})))),e.createElement("div",{className:"card"},e.createElement("h3",null,"🧮 Fiyat Hesaplama Formülü"),a.length>0&&e.createElement("div",{className:"alert alert-success",style:{fontSize:"0.9em"}},e.createElement("strong",null,"Kullanılabilir Parametreler: "),Object.values(M.backendToUser).join(", ")),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Formül (A, B, C... kullanın)"),e.createElement(Oe,{value:m,onChange:ye,parameters:a,placeholder:"Örn: A * B * SQRT(C) + 100",disabled:!1}),e.createElement("div",{style:{display:"flex",gap:"6px",marginTop:"4px"}},e.createElement("button",{onClick:()=>z(!i),className:"btn btn-link",style:{padding:"5px 0"}},i?"❌ Yardımı Gizle":"❓ Formül Yardımı"),a.length>0&&e.createElement("button",{onClick:()=>v("A * B"),className:"btn btn-link",style:{padding:"5px 0"}},"📝 Örnek Formül Ekle"))),F&&e.createElement("div",{className:`alert ${F.isValid?"alert-success":"alert-danger"}`,style:{marginTop:"8px"}},e.createElement("strong",null,F.isValid?"✅ Formül Geçerli":"❌ Formül Hatası"),F.message&&e.createElement("div",null,F.message),F.suggestions&&F.suggestions.length>0&&e.createElement("ul",{style:{marginTop:"5px",marginBottom:0}},...F.suggestions.map((o,h)=>e.createElement("li",{key:h},o)))),i&&e.createElement("div",{className:"alert alert-info",style:{marginTop:"8px"}},e.createElement("h5",null,"📚 Kullanılabilir Fonksiyonlar:"),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"8px"}},e.createElement("div",null,e.createElement("strong",null,"Matematik:"),e.createElement("br",null),"SQRT, ROUND, MAX, MIN, ABS, POWER"),e.createElement("div",null,e.createElement("strong",null,"Yuvarlama:"),e.createElement("br",null),"CEIL, FLOOR, ROUNDUP, ROUNDDOWN"),e.createElement("div",null,e.createElement("strong",null,"Mantık:"),e.createElement("br",null),"IF, AND, OR, NOT"),e.createElement("div",null,e.createElement("strong",null,"Sabitler:"),e.createElement("br",null),"PI, E")),e.createElement("div",{style:{marginTop:"8px",padding:"8px",backgroundColor:"#e9ecef",borderRadius:"4px"}},e.createElement("strong",null,"Örnek Formüller:"),e.createElement("ul",{style:{marginBottom:0,marginTop:"4px"}},e.createElement("li",null,"Basit: A * B + C"),e.createElement("li",null,"Karmaşık: A * SQRT(B) + IF(C > 10, 50, 0)"),e.createElement("li",null,"Yüzde: A * (1 + B/100)")))),e.createElement("button",{onClick:de,className:"btn btn-success btn-lg",style:{marginTop:"10px",width:"100%"},disabled:!P||a.length===0},"💾 Fiyat Ayarlarını Kaydet")))}const U={generateFieldId:()=>"field_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),fieldTypes:{text:{label:"Metin",icon:"📝",hasOptions:!1,hasPlaceholder:!0,hasValidation:!0,defaultProps:{type:"text",required:!1,placeholder:"",validation:{min:0,max:255}}},textarea:{label:"Uzun Metin",icon:"📄",hasOptions:!1,hasPlaceholder:!0,hasValidation:!0,defaultProps:{type:"textarea",required:!1,placeholder:"",validation:{min:0,max:1e3}}},number:{label:"Sayı",icon:"🔢",hasOptions:!1,hasPlaceholder:!0,hasValidation:!0,defaultProps:{type:"number",required:!1,placeholder:"",validation:{min:0,max:999999}}},email:{label:"E-posta",icon:"📧",hasOptions:!1,hasPlaceholder:!0,hasValidation:!1,defaultProps:{type:"email",required:!1,placeholder:"ornek@email.com"}},phone:{label:"Telefon",icon:"📞",hasOptions:!1,hasPlaceholder:!0,hasValidation:!0,defaultProps:{type:"phone",required:!1,placeholder:"+90 555 123 45 67",validation:{min:10,max:15}}},dropdown:{label:"Açılır Liste",icon:"📋",hasOptions:!0,hasPlaceholder:!1,hasValidation:!1,defaultProps:{type:"dropdown",required:!1,options:["Seçenek 1","Seçenek 2","Seçenek 3"]}},multiselect:{label:"Çoklu Seçim",icon:"☑️",hasOptions:!0,hasPlaceholder:!1,hasValidation:!1,defaultProps:{type:"multiselect",required:!1,options:["Seçenek 1","Seçenek 2","Seçenek 3"]}},radio:{label:"Seçenek Butonları",icon:"🔘",hasOptions:!0,hasPlaceholder:!1,hasValidation:!1,defaultProps:{type:"radio",required:!1,options:["Seçenek 1","Seçenek 2","Seçenek 3"]}},checkbox:{label:"Onay Kutusu",icon:"☑️",hasOptions:!1,hasPlaceholder:!0,hasValidation:!1,defaultProps:{type:"checkbox",required:!1,placeholder:"Şartları kabul ediyorum"}},date:{label:"Tarih",icon:"📅",hasOptions:!1,hasPlaceholder:!1,hasValidation:!1,defaultProps:{type:"date",required:!1}},file:{label:"Dosya",icon:"📎",hasOptions:!1,hasPlaceholder:!1,hasValidation:!1,defaultProps:{type:"file",required:!1}}},createNewField:(t,l={})=>{const a=U.fieldTypes[t];if(!a)throw new Error(`Desteklenmeyen alan türü: ${t}`);return{id:U.generateFieldId(),label:`Yeni ${a.label}`,...a.defaultProps,display:{showInTable:!0,showInFilter:!1,order:0},...l}},validateField:t=>{const l=[];t.id||l.push("Alan ID'si gereklidir"),(!t.label||t.label.trim()==="")&&l.push("Alan etiketi gereklidir"),t.type||l.push("Alan türü gereklidir");const a=U.fieldTypes[t.type];return a||l.push(`Desteklenmeyen alan türü: ${t.type}`),a?.hasOptions&&(!t.options||t.options.length===0)&&l.push("Bu alan türü için seçenekler gereklidir"),t.validation&&t.validation.min!==void 0&&t.validation.max!==void 0&&t.validation.min>t.validation.max&&l.push("Minimum değer maksimum değerden büyük olamaz"),l},validateForm:t=>{const l=[],a=new Set;return!t||t.length===0?(l.push("Form en az bir alan içermelidir"),l):(t.forEach((c,u)=>{a.has(c.id)?l.push(`Alan ${u+1}: Dublicate ID "${c.id}"`):a.add(c.id),U.validateField(c).forEach(m=>{l.push(`Alan ${u+1} (${c.label}): ${m}`)})}),l)},exportFormConfig:(t,l={})=>{const a={version:"1.0",createdAt:new Date().toISOString(),settings:{title:l.title||"Yeni Form",description:l.description||"",submitButtonText:l.submitButtonText||"Gönder",...l},fields:t.map(c=>({...c,display:{showInTable:!0,showInFilter:!1,order:0,...c.display}}))};return JSON.stringify(a,null,2)},importFormConfig:t=>{try{const l=JSON.parse(t);if(!l.fields||!Array.isArray(l.fields))throw new Error("Geçersiz form yapılandırması: fields array bulunamadı");const a=U.validateForm(l.fields);if(a.length>0)throw new Error(`İçe aktarılan form geçersiz:
`+a.join(`
`));return{fields:l.fields,settings:l.settings||{}}}catch(l){throw new Error(`Form içe aktarılırken hata: ${l.message}`)}},reorderFields:(t,l,a)=>{const c=[...t],[u]=c.splice(l,1);return c.splice(a,0,u),c.map((n,m)=>({...n,display:{...n.display,order:m}}))},cloneField:t=>({...t,id:U.generateFieldId(),label:`${t.label} (Kopya)`}),getFieldSummary:t=>({id:t.id,label:t.label,type:t.type,typeLabel:U.fieldTypes[t.type]?.label||t.type,required:t.required,hasOptions:t.options&&t.options.length>0,optionsCount:t.options?t.options.length:0,showInTable:t.display?.showInTable,showInFilter:t.display?.showInFilter}),getFormStatistics:t=>{const l={totalFields:t.length,requiredFields:t.filter(a=>a.required).length,optionalFields:t.filter(a=>!a.required).length,tableFields:t.filter(a=>a.display?.showInTable).length,filterFields:t.filter(a=>a.display?.showInFilter).length,fieldTypes:{}};return t.forEach(a=>{const c=U.fieldTypes[a.type]?.label||a.type;l.fieldTypes[c]=(l.fieldTypes[c]||0)+1}),l},hasUnsavedChanges:(t,l)=>JSON.stringify(t)!==JSON.stringify(l)},{useState:le,useEffect:ze}=e;function De({field:t,onSave:l,onCancel:a,fieldTypes:c=[],showNotification:u}){const[n,m]=le({id:"",label:"",type:"text",required:!1,options:[],placeholder:"",validation:{min:null,max:null,pattern:null},display:{showInTable:!0,showInFilter:!1,tableOrder:10,formOrder:10}}),[v,k]=le("");ze(()=>{t&&m({...t,options:t.options||[],validation:t.validation||{min:null,max:null,pattern:null},display:t.display||{showInTable:!0,showInFilter:!1,tableOrder:10,formOrder:10}})},[t]);function N(r,E){m(f=>({...f,[r]:E}))}function g(r,E,f){m(y=>({...y,[r]:{...y[r]||{},[E]:f}}))}function A(){if(!v.trim()){u("Seçenek değeri boş olamaz","error");return}if(n.options.includes(v.trim())){u("Bu seçenek zaten mevcut","error");return}m(r=>({...r,options:[...r.options,v.trim()]})),k("")}function b(r){m(E=>({...E,options:E.options.filter((f,y)=>y!==r)}))}function I(){if(!n.label.trim()){u("Alan etiketi zorunludur","error");return}if(n.id||(n.id=n.label.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"_")),["dropdown","multiselect","radio"].includes(n.type)&&n.options.length===0){u("Seçenek listesi boş olamaz","error");return}l(n)}const w=["dropdown","multiselect","radio"].includes(n.type);return e.createElement("div",{className:"field-editor"},e.createElement("div",{className:"modal-overlay",onClick:r=>{r.target===r.currentTarget&&a()}},e.createElement("div",{className:"modal-content",style:{maxWidth:"900px",width:"90vw",maxHeight:"85vh",overflow:"auto",padding:"24px"},onClick:r=>r.stopPropagation()},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"}},e.createElement("h3",{style:{margin:0}},t?"Alan Düzenle":"Yeni Alan Ekle"),e.createElement("button",{onClick:a,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"var(--text)",padding:"0",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",transition:"background-color 0.2s"},onMouseEnter:r=>r.target.style.backgroundColor="rgba(255,255,255,0.1)",onMouseLeave:r=>r.target.style.backgroundColor="transparent"},"×")),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",marginBottom:"20px"}},e.createElement("div",{className:"form-column"},e.createElement("div",{className:"form-group"},e.createElement("label",null,"Alan Etiketi *"),e.createElement("input",{type:"text",value:n.label,onChange:r=>N("label",r.target.value),placeholder:"Örn: Müşteri Adı",className:"form-control"})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Alan ID"),e.createElement("input",{type:"text",value:n.id,onChange:r=>N("id",r.target.value),placeholder:"Otomatik oluşturulur",className:"form-control"})),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Alan Türü"),e.createElement("select",{value:n.type,onChange:r=>N("type",r.target.value),className:"form-control"},...Object.entries(U.fieldTypes).map(([r,E])=>e.createElement("option",{key:r,value:r},E.label)))),e.createElement("div",{className:"form-group"},e.createElement("label",null,"Placeholder"),e.createElement("input",{type:"text",value:n.placeholder,onChange:r=>N("placeholder",r.target.value),placeholder:"Alan için ipucu metni",className:"form-control"})),e.createElement("div",{className:"form-group"},e.createElement("label",null,e.createElement("input",{type:"checkbox",checked:n.required,onChange:r=>N("required",r.target.checked)})," Zorunlu alan"))),e.createElement("div",{className:"form-column"},e.createElement("div",{className:"form-group"},e.createElement("h4",null,"Doğrulama Kuralları"),e.createElement("div",{style:{display:"flex",gap:"12px",marginBottom:"12px"}},e.createElement("div",{style:{flex:1}},e.createElement("label",null,n.type==="number"?"Min Değer":"Min Uzunluk"),e.createElement("input",{type:"number",value:n.validation&&(n.validation.min??n.validation.minLength)||"",onChange:r=>{const E=n.type==="number"?"min":"minLength";g("validation",E,r.target.value?parseInt(r.target.value):null)},className:"form-control"})),e.createElement("div",{style:{flex:1}},e.createElement("label",null,n.type==="number"?"Max Değer":"Max Uzunluk"),e.createElement("input",{type:"number",value:n.validation&&(n.validation.max??n.validation.maxLength)||"",onChange:r=>{const E=n.type==="number"?"max":"maxLength";g("validation",E,r.target.value?parseInt(r.target.value):null)},className:"form-control"}))),n.type==="number"&&e.createElement("div",{style:{display:"flex",gap:"12px",marginBottom:"12px",flexWrap:"wrap"}},e.createElement("label",{style:{display:"flex",alignItems:"center",gap:"4px"}},e.createElement("input",{type:"checkbox",checked:n.validation?.integer||!1,onChange:r=>g("validation","integer",r.target.checked)}),"Sadece tam sayı"),e.createElement("label",{style:{display:"flex",alignItems:"center",gap:"4px"}},e.createElement("input",{type:"checkbox",checked:n.validation?.positive||!1,onChange:r=>g("validation","positive",r.target.checked)}),"Sadece pozitif sayı")),(n.type==="text"||n.type==="textarea")&&e.createElement("div",{style:{display:"flex",gap:"12px",marginBottom:"12px",flexWrap:"wrap"}},e.createElement("label",{style:{display:"flex",alignItems:"center",gap:"4px"}},e.createElement("input",{type:"checkbox",checked:n.validation?.onlyLetters||!1,onChange:r=>g("validation","onlyLetters",r.target.checked)}),"Sadece harf"),e.createElement("label",{style:{display:"flex",alignItems:"center",gap:"4px"}},e.createElement("input",{type:"checkbox",checked:n.validation?.noNumbers||!1,onChange:r=>g("validation","noNumbers",r.target.checked)}),"Sayı yok"),e.createElement("label",{style:{display:"flex",alignItems:"center",gap:"4px"}},e.createElement("input",{type:"checkbox",checked:n.validation?.alphanumeric||!1,onChange:r=>g("validation","alphanumeric",r.target.checked)}),"Alfanumerik")),n.type==="textarea"&&e.createElement("div",{style:{display:"flex",gap:"12px",marginBottom:"12px"}},e.createElement("div",{style:{flex:1}},e.createElement("label",null,"Min Kelime Sayısı"),e.createElement("input",{type:"number",value:n.validation?.minWords||"",onChange:r=>g("validation","minWords",r.target.value?parseInt(r.target.value):null),className:"form-control"})),e.createElement("div",{style:{flex:1}},e.createElement("label",null,"Max Kelime Sayısı"),e.createElement("input",{type:"number",value:n.validation?.maxWords||"",onChange:r=>g("validation","maxWords",r.target.value?parseInt(r.target.value):null),className:"form-control"}))),n.type==="email"&&e.createElement("div",{style:{marginBottom:"12px"}},e.createElement("label",null,"İzin verilen domainler (virgülle ayırın)"),e.createElement("input",{type:"text",value:n.validation?.allowedDomains?.join(", ")||"",onChange:r=>{const E=r.target.value.split(",").map(f=>f.trim()).filter(f=>f);g("validation","allowedDomains",E.length>0?E:null)},placeholder:"örn: example.com, company.org",className:"form-control"})),n.type==="date"&&e.createElement("div",null,e.createElement("div",{style:{display:"flex",gap:"12px",marginBottom:"12px",flexWrap:"wrap"}},e.createElement("label",{style:{display:"flex",alignItems:"center",gap:"4px"}},e.createElement("input",{type:"checkbox",checked:n.validation?.futureOnly||!1,onChange:r=>g("validation","futureOnly",r.target.checked)}),"Sadece gelecek tarihleri"),e.createElement("label",{style:{display:"flex",alignItems:"center",gap:"4px"}},e.createElement("input",{type:"checkbox",checked:n.validation?.pastOnly||!1,onChange:r=>g("validation","pastOnly",r.target.checked)}),"Sadece geçmiş tarihleri")),e.createElement("div",{style:{display:"flex",gap:"12px",marginBottom:"12px"}},e.createElement("div",{style:{flex:1}},e.createElement("label",null,"En erken tarih"),e.createElement("input",{type:"date",value:n.validation?.minDate||"",onChange:r=>g("validation","minDate",r.target.value||null),className:"form-control"})),e.createElement("div",{style:{flex:1}},e.createElement("label",null,"En geç tarih"),e.createElement("input",{type:"date",value:n.validation?.maxDate||"",onChange:r=>g("validation","maxDate",r.target.value||null),className:"form-control"})))),(n.type==="multiselect"||n.type==="checkbox")&&e.createElement("div",{style:{display:"flex",gap:"12px",marginBottom:"12px"}},e.createElement("div",{style:{flex:1}},e.createElement("label",null,"Min Seçim Sayısı"),e.createElement("input",{type:"number",value:n.validation?.minSelections||"",onChange:r=>g("validation","minSelections",r.target.value?parseInt(r.target.value):null),className:"form-control"})),e.createElement("div",{style:{flex:1}},e.createElement("label",null,"Max Seçim Sayısı"),e.createElement("input",{type:"number",value:n.validation?.maxSelections||"",onChange:r=>g("validation","maxSelections",r.target.value?parseInt(r.target.value):null),className:"form-control"}))),e.createElement("div",{style:{marginBottom:"12px"}},e.createElement("label",null,"Özel Pattern (Regex)"),e.createElement("input",{type:"text",value:n.validation?.pattern||"",onChange:r=>g("validation","pattern",r.target.value||null),placeholder:"örn: ^[A-Z]{2}\\d{6}$ (2 harf + 6 rakam)",className:"form-control"})),n.validation?.pattern&&e.createElement("div",{style:{marginBottom:"12px"}},e.createElement("label",null,"Pattern Hata Mesajı"),e.createElement("input",{type:"text",value:n.validation?.patternMessage||"",onChange:r=>g("validation","patternMessage",r.target.value||null),placeholder:"örn: Format: 2 harf + 6 rakam",className:"form-control"}))),e.createElement("div",{className:"form-group"},e.createElement("h4",null,"Görünüm Ayarları"),e.createElement("div",{style:{display:"flex",gap:"12px",marginBottom:"12px"}},e.createElement("label",null,e.createElement("input",{type:"checkbox",checked:n.display?.showInTable||!1,onChange:r=>g("display","showInTable",r.target.checked)})," Tabloda göster"),e.createElement("label",null,e.createElement("input",{type:"checkbox",checked:n.display?.showInFilter||!1,onChange:r=>g("display","showInFilter",r.target.checked)})," Filtrede göster")),e.createElement("div",{style:{display:"flex",gap:"12px"}},e.createElement("div",{style:{flex:1}},e.createElement("label",null,"Form Sırası"),e.createElement("input",{type:"number",value:n.display?.formOrder||0,onChange:r=>g("display","formOrder",parseInt(r.target.value)||0),className:"form-control"})),e.createElement("div",{style:{flex:1}},e.createElement("label",null,"Tablo Sırası"),e.createElement("input",{type:"number",value:n.display?.tableOrder||0,onChange:r=>g("display","tableOrder",parseInt(r.target.value)||0),className:"form-control"})))))),w&&e.createElement("div",{className:"form-group"},e.createElement("label",null,"Seçenekler"),e.createElement("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"}},e.createElement("input",{type:"text",value:v,onChange:r=>k(r.target.value),placeholder:"Yeni seçenek",className:"form-control",style:{flex:1}}),e.createElement("button",{type:"button",onClick:A,className:"btn btn-primary"},"Ekle")),n.options&&n.options.length>0&&e.createElement("ul",{className:"options-list"},...n.options.map((r,E)=>e.createElement("li",{key:E},e.createElement("span",null,r),e.createElement("button",{type:"button",onClick:()=>b(E),className:"option-remove-btn"},"Sil"))))),e.createElement("div",{className:"modal-actions",style:{marginTop:"20px",textAlign:"right"}},e.createElement("button",{type:"button",onClick:a,className:"btn btn-secondary",style:{marginRight:"10px"}},"İptal"),e.createElement("button",{type:"button",onClick:I,className:"btn btn-primary"},"Kaydet")))))}const{useState:Ue}=e;function Le({fields:t,onEditField:l,onDeleteField:a,onDuplicateField:c,onReorderField:u,showNotification:n}){const[m,v]=Ue(null);function k(b,I){v(I),b.dataTransfer.effectAllowed="move"}function N(b){b.preventDefault(),b.dataTransfer.dropEffect="move"}function g(b,I){b.preventDefault(),m!==null&&m!==I&&u(m,I),v(null)}function A(b,I){window.confirm(`"${I}" alanını silmek istediğinizden emin misiniz?`)&&a(b)}return t.length===0?e.createElement("div",{className:"empty-state",style:{textAlign:"center",padding:"40px",color:"#666",border:"2px dashed #ddd",borderRadius:"8px"}},e.createElement("p",null,"Henüz form alanı eklenmemiş."),e.createElement("p",null,'"Yeni Alan Ekle" butonunu kullanarak başlayın.')):e.createElement("div",{className:"field-list",style:{display:"flex",flexDirection:"column",minHeight:"auto"}},e.createElement("h4",{style:{margin:"0 0 16px 0"}},`Form Alanları (${t.length})`),e.createElement("div",{className:"field-cards",style:{display:"flex",flexDirection:"column",gap:"12px"}},t.map((b,I)=>e.createElement("div",{key:b.id,className:"field-card",draggable:!0,onDragStart:w=>k(w,I),onDragOver:N,onDrop:w=>g(w,I),style:{border:"1px solid #ddd",borderRadius:"8px",padding:"16px",backgroundColor:m===I?"#f0f0f0":"white",cursor:"move",transition:"all 0.2s ease"}},e.createElement("div",{className:"field-header",style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"}},e.createElement("div",{style:{flex:1}},e.createElement("h5",{style:{margin:"0 0 4px 0",color:"#333"}},b.label),e.createElement("div",{style:{fontSize:"12px",color:"#666"}},`ID: ${b.id} | Tür: ${Me(b.type)}`)),e.createElement("div",{className:"field-actions",style:{display:"flex",gap:"4px"}},e.createElement("button",{onClick:()=>l(b),className:"btn btn-sm btn-primary",style:{fontSize:"12px",padding:"4px 8px"}},"Düzenle"),e.createElement("button",{onClick:()=>A(b.id,b.label),className:"btn btn-sm btn-danger",style:{fontSize:"12px",padding:"4px 8px"}},"Sil"))),e.createElement("div",{className:"field-details",style:{marginTop:"12px"}},b.placeholder&&e.createElement("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"}},`Placeholder: "${b.placeholder}"`),b.options&&b.options.length>0&&e.createElement("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"}},`Seçenekler: ${b.options.slice(0,3).join(", ")}${b.options.length>3?"...":""}`),e.createElement("div",{style:{fontSize:"11px",color:"#999",display:"flex",gap:"12px"}},e.createElement("span",null,b.display?.showInTable?"✓ Tabloda":"✗ Tabloda"),e.createElement("span",null,b.display?.showInFilter?"✓ Filtrede":"✗ Filtrede"),b.validation?.min&&e.createElement("span",null,`Min: ${b.validation.min}`),b.validation?.max&&e.createElement("span",null,`Max: ${b.validation.max}`)))))))}function Me(t){return{text:"Metin",textarea:"Uzun Metin",number:"Sayı",email:"E-posta",phone:"Telefon",dropdown:"Açılır Liste",multiselect:"Çoklu Seçim",radio:"Seçenek Butonları",checkbox:"Onay Kutusu",date:"Tarih",file:"Dosya"}[t]||t}const{useState:Y,useEffect:Ve}=e;function $e({isDarkMode:t,t:l,showNotification:a}){const[c,u]=Y([]),[n,m]=Y(null),[v,k]=Y(!1),[N,g]=Y("builder"),[A,b]=Y({title:"Yeni Form",description:"",submitButtonText:"Gönder"}),[I,w]=Y([]);Ve(()=>{console.log("FormBuilderUtils.fieldTypes:",U.fieldTypes),r()},[]);async function r(){try{const s=await $.getFormConfig();if(s.formConfig&&s.formConfig.formStructure&&s.formConfig.formStructure.fields)u(s.formConfig.formStructure.fields),w(s.formConfig.formStructure.fields),(s.formConfig.formStructure.title||s.formConfig.formStructure.description)&&b({title:s.formConfig.formStructure.title||"Yeni Form",description:s.formConfig.formStructure.description||"",submitButtonText:s.formConfig.formStructure.submitButtonText||"Gönder"});else{const x=localStorage.getItem("formBuilder_config");if(x){const S=JSON.parse(x);S.fields&&(u(S.fields),w(S.fields)),S.settings&&b(S.settings)}}}catch(s){console.error("Form yüklenirken hata:",s);const x=localStorage.getItem("formBuilder_config");if(x)try{const S=JSON.parse(x);S.fields&&(u(S.fields),w(S.fields)),S.settings&&b(S.settings)}catch(S){console.error("Local storage yüklenirken hata:",S),a("Kaydedilmiş form yüklenemedi","error")}}}async function E(){try{const s={formStructure:{title:A.title,description:A.description,submitButtonText:A.submitButtonText,fields:c},version:Date.now(),lastModified:new Date().toISOString()},x=await $.saveFormConfig(s);localStorage.setItem("formBuilder_config",JSON.stringify({fields:c,settings:A,savedAt:new Date().toISOString()})),w([...c]),x.structuralChange?a(`Form yapılandırması kaydedildi. ${x.quotesMarkedForUpdate||0} teklif fiyat güncellemesi için işaretlendi.`,"success"):a("Form yapılandırması kaydedildi","success")}catch(s){console.error("Form kaydedilirken hata:",s),a("Form kaydedilemedi: "+(s.message||"Bilinmeyen hata"),"error")}}function f(){console.log("handleAddNewField called");try{const s=U.createNewField("text");console.log("New field created:",s),m(s),k(!0)}catch(s){console.error("Error in handleAddNewField:",s),a(s.message,"error")}}function y(s){m({...s}),k(!0)}function B(s){try{const x=U.validateField(s);if(x.length>0){a(x[0],"error");return}const S=c.findIndex(L=>L.id===s.id);if(S>=0){const L=[...c];L[S]=s,u(L),a("Alan güncellendi","success")}else u(L=>[...L,s]),a("Yeni alan eklendi","success");k(!1),m(null)}catch(x){a(x.message,"error")}}function _(s){u(x=>x.filter(S=>S.id!==s)),a("Alan silindi","success")}function d(s,x){const S=U.reorderFields(c,s,x);u(S),a("Alan sıralaması değiştirildi","info")}function F(s){const x=U.cloneField(s);u(S=>[...S,x]),a("Alan kopyalandı","success")}function T(s){F(s)}function P(){try{const s=U.exportFormConfig(c,A),x=new Blob([s],{type:"application/json"}),S=URL.createObjectURL(x),L=document.createElement("a");L.href=S,L.download=`form-config-${Date.now()}.json`,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(S),a("Form yapılandırması dışa aktarıldı","success")}catch{a("Dışa aktarma başarısız","error")}}function R(s){const x=s.target.files[0];if(!x)return;const S=new FileReader;S.onload=L=>{try{const j=U.importFormConfig(L.target.result);u(j.fields),b({...A,...j.settings}),a("Form yapılandırması içe aktarıldı","success")}catch(j){a(j.message,"error")}},S.readAsText(x)}function i(){window.confirm("Tüm alanları silmek istediğinizden emin misiniz?")&&(u([]),a("Tüm alanlar silindi","info"))}const z=U.hasUnsavedChanges(c,I),M=U.getFormStatistics(c);return e.createElement("div",{className:"form-builder-container"},e.createElement("div",{className:"form-builder-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",backgroundColor:"white",borderBottom:"1px solid #ddd",marginBottom:"20px"}},e.createElement("div",null,e.createElement("h2",{style:{margin:"0 0 4px 0"}},"Form Oluşturucu"),e.createElement("div",{style:{fontSize:"14px",color:"#666"}},`${M.totalFields} alan • ${M.requiredFields} zorunlu`,z&&e.createElement("span",{style:{color:"#dc3545",marginLeft:"8px"}},"• Kaydedilmemiş değişiklikler"))),e.createElement("div",{style:{display:"flex",gap:"8px"}},e.createElement("button",{onClick:E,className:"btn btn-success",disabled:!z,style:{opacity:z?1:.6,cursor:z?"pointer":"not-allowed"}},"Kaydet"),e.createElement("button",{onClick:P,className:"btn btn-primary"},"Dışa Aktar"),e.createElement("label",{className:"btn btn-secondary",style:{cursor:"pointer"}},"İçe Aktar",e.createElement("input",{type:"file",accept:".json",onChange:R,style:{display:"none"}})),e.createElement("button",{onClick:i,className:"btn btn-danger"},"Temizle"))),e.createElement("div",{className:"tab-navigation",style:{display:"flex",borderBottom:"1px solid #ddd",marginBottom:"20px"}},["builder","preview"].map(s=>e.createElement("button",{key:s,onClick:()=>g(s),className:`tab-button ${N===s?"active":""}`,style:{padding:"12px 24px",border:"none",backgroundColor:N===s?"#007bff":"transparent",color:N===s?"white":"#666",borderBottom:N===s?"2px solid #007bff":"2px solid transparent",cursor:"pointer",fontSize:"14px",fontWeight:N===s?"bold":"normal"}},s==="builder"?"Form Tasarımı":"Önizleme"))),e.createElement("div",{className:"tab-content"},N==="builder"&&e.createElement("div",{className:"builder-content",style:{display:"flex",flexDirection:"column",gap:"8px",minHeight:"auto",height:"auto"}},e.createElement("div",{style:{flex:"0 0 auto"}},e.createElement(Le,{fields:c,onEditField:y,onDeleteField:_,onDuplicateField:T,onReorderFields:d})),e.createElement("div",{style:{flex:"0 0 auto",padding:"8px 16px",borderTop:"2px dashed #dee2e6",textAlign:"center",marginTop:"0"}},e.createElement("button",{onClick:f,className:"btn btn-primary",style:{padding:"12px 24px",fontSize:"14px",fontWeight:"600",display:"inline-flex",alignItems:"center",gap:"8px"}},e.createElement("span",{style:{fontSize:"18px"}},"+"),"Yeni Alan Ekle"))),N==="preview"&&e.createElement(e.Fragment,null,e.createElement("h3",{style:{marginTop:"0",marginBottom:"20px",paddingBottom:"10px",borderBottom:"2px solid #007bff",color:"#333"}},"Form Önizlemesi"),e.createElement("form",null,...c.map(s=>e.createElement("div",{key:s.id,className:"preview-field",style:{marginBottom:"20px",padding:"12px",border:"1px solid #ddd",borderRadius:"6px",backgroundColor:"white"}},e.createElement("label",{style:{display:"block",marginBottom:"6px",fontWeight:"500",color:"#333"}},s.label),s.type==="text"&&e.createElement("input",{type:"text",placeholder:s.placeholder,className:"form-control",style:{width:"100%",padding:"8px 12px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"14px"}}),s.type==="number"&&e.createElement("input",{type:"number",placeholder:s.placeholder,min:s.validation?.min||void 0,max:s.validation?.max||void 0,className:"form-control",style:{width:"100%",padding:"8px 12px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"14px"}}),s.type==="textarea"&&e.createElement("textarea",{placeholder:s.placeholder,className:"form-control",rows:3,style:{width:"100%",padding:"8px 12px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"14px",resize:"vertical"}}),s.type==="dropdown"&&e.createElement("select",{className:"form-control",style:{width:"100%",padding:"8px 12px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"14px"}},e.createElement("option",{value:""},s.placeholder||"Seçiniz..."),...s.options.map((x,S)=>e.createElement("option",{key:S,value:x},x))))),e.createElement("div",{style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid #eee",display:"flex",gap:"12px"}},e.createElement("button",{type:"submit",className:"btn btn-primary",style:{backgroundColor:"#007bff",color:"white",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer"}},"Formu Doğrula"),e.createElement("button",{type:"button",className:"btn btn-secondary",style:{backgroundColor:"#6c757d",color:"white",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer"}},"Temizle"))))),v&&e.createElement(De,{field:n,onSave:B,onCancel:()=>{k(!1),m(null)},showNotification:a}))}const{useState:ne,useEffect:Ke}=e;function We({t,showNotification:l}){const[a,c]=ne(null),[u,n]=ne(!0);Ke(()=>{m()},[]);async function m(){try{n(!0);const v=await $.getFormConfig();c(v.formConfig)}catch(v){console.error("Form config load error:",v),l("Form yapılandırması yüklenemedi!","error")}finally{n(!1)}}return u?e.createElement("div",{className:"form-tab loading"},e.createElement("div",{style:{textAlign:"center",padding:"40px"}},e.createElement("div",{className:"spinner"}),e.createElement("p",null,t.settings_form_loading||"Form yapılandırması yükleniyor..."))):e.createElement(e.Fragment,null,e.createElement("h3",null,t.settings_form_config||"Form Yapılandırması"),e.createElement("p",{style:{color:"#666",marginBottom:"20px"}},t.settings_form_subtitle||"Müşteri teklif formunda gösterilecek alanları ve seçenekleri yönetin."),e.createElement($e,{isDarkMode:!1,t,showNotification:l}))}const{useState:W,useEffect:je}=e;function qe({t,showNotification:l}){const[a,c]=W([]),[u,n]=W(!1),[m,v]=W({email:"",password:"",role:"admin"}),[k,N]=W(!1),[g,A]=W(null),[b,I]=W(null),[w,r]=W(!1),[E,f]=W({email:"",password:""}),[y,B]=W(!1);je(()=>{if(!y){r(!0);return}_()},[y]);async function _(){try{n(!0);const i=await $.listUsers();c(i)}catch(i){console.error("Users load error:",i),l(t.users_load_error||"Kullanıcılar yüklenemedi","error")}finally{n(!1)}}async function d(){try{if(!E.email||!E.password){l(t.admin_access_required||"Email ve şifre gerekli","error");return}n(!0);const i=await $.login(E.email,E.password,!0);if(!i||!i.user){l(t.admin_access_invalid||"Geçersiz kullanıcı bilgileri","error");return}if(i.user.role!=="admin"){l(t.admin_access_denied||"Bu panele erişim yetkiniz yok. Sadece admin kullanıcıları bu bölüme erişebilir.","error");return}B(!0),r(!1),f({email:"",password:""}),l(t.admin_access_granted||"Admin erişimi onaylandı","success"),await _()}catch(i){console.error("Admin access error:",i),l(t.admin_access_error||"Erişim doğrulama hatası","error")}finally{n(!1)}}async function F(){try{if(!m.email||!m.password){l(t.users_email_required||"Email ve şifre gerekli","error");return}if(m.password.length<6){l(t.users_password_min||"Şifre en az 6 karakter olmalı","error");return}n(!0),await $.addUser(m.email,m.password,m.role),v({email:"",password:"",role:"admin"}),N(!1),await _(),l(t.users_added||"Kullanıcı eklendi","success")}catch(i){console.error("Add user error:",i),l(i.message||t.users_add_error||"Kullanıcı eklenemedi","error")}finally{n(!1)}}async function T(i){const z=a.find(s=>s.email===i),M=z&&z.active?t.users_deactivate||"devre dışı bırakmak":t.users_activate||"aktifleştirmek";if(confirm(`${i} ${t.users_confirm_action||"kullanıcısını"} ${M} ${t.users_confirm_suffix||"istediğinizden emin misiniz?"}`))try{n(!0),await $.deleteUser(i),await _();const s=z&&z.active?t.users_deactivated||"Kullanıcı devre dışı bırakıldı":t.users_activated||"Kullanıcı aktifleştirildi";l(s,"success")}catch(s){console.error("Toggle user status error:",s),l(s.message||t.users_toggle_error||"Kullanıcı durumu değiştirilemedi","error")}finally{n(!1)}}async function P(i,z){try{n(!0),await $.updateUser(i,z),A(null),await _(),l(t.users_updated||"Kullanıcı güncellendi","success")}catch(M){console.error("Update user error:",M),l(M.message||t.users_update_error||"Kullanıcı güncellenemedi","error")}finally{n(!1)}}function R(i){return i==="admin"?t.users_role_admin||"Admin":i==="user"?t.users_role_user||"Kullanıcı":i}return e.createElement(e.Fragment,null,y&&e.createElement(e.Fragment,null,e.createElement("h3",null,t.users_title||"Kullanıcı Yönetimi"),e.createElement("button",{onClick:()=>N(!k),className:"btn btn-primary",style:{marginBottom:"20px"}},k?t.users_cancel||"İptal":t.users_new_user||"Yeni Kullanıcı"),k&&e.createElement("div",{style:{marginBottom:"20px",padding:"20px",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#f9f9f9"}},e.createElement("h4",null,t.users_new_user||"Yeni Kullanıcı Ekle"),e.createElement("div",{className:"form-group"},e.createElement("label",null,t.users_email||"Email"),e.createElement("input",{type:"email",value:m.email,onChange:i=>v({...m,email:i.target.value}),className:"form-control",placeholder:t.users_email_placeholder||"kullanici@domain.com"})),e.createElement("div",{className:"form-group"},e.createElement("label",null,t.users_password||"Şifre"),e.createElement("input",{type:"password",value:m.password,onChange:i=>v({...m,password:i.target.value}),className:"form-control",placeholder:t.users_password_placeholder||"En az 6 karakter"})),e.createElement("div",{className:"form-group"},e.createElement("label",null,t.users_role||"Rol"),e.createElement("select",{value:m.role,onChange:i=>v({...m,role:i.target.value}),className:"form-control"},e.createElement("option",{value:"admin"},t.users_role_admin||"Admin"),e.createElement("option",{value:"user"},t.users_role_user||"Kullanıcı"))),e.createElement("button",{onClick:F,className:"btn btn-primary",disabled:!m.email||!m.password||u},t.users_add_user||"Kullanıcı Ekle")),a.length===0?e.createElement("p",null,t.users_no_users||"Henüz kullanıcı eklenmemiş."):e.createElement("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"}},e.createElement("thead",null,e.createElement("tr",{style:{backgroundColor:"#f5f5f5"}},e.createElement("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"}},t.users_email||"Email"),e.createElement("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"}},t.users_password||"Şifre"),e.createElement("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"}},t.users_role||"Rol"),e.createElement("th",{style:{padding:"12px",textAlign:"center",borderBottom:"1px solid #ddd"}},t.users_status||"Durum"),e.createElement("th",{style:{padding:"12px",textAlign:"center",borderBottom:"1px solid #ddd"}},t.users_actions||"İşlemler"))),e.createElement("tbody",null,a.map(i=>e.createElement("tr",{key:i.email,style:{borderBottom:"1px solid #eee"}},e.createElement("td",{style:{padding:"12px"}},i.email),e.createElement("td",{style:{padding:"12px"}},e.createElement("span",{style:{fontFamily:"monospace",backgroundColor:"#f0f0f0",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",cursor:i.hasPlainPassword&&i.password!=="••••••••"?"pointer":"default",userSelect:"text",transition:"all 0.2s ease",minWidth:"80px",display:"inline-block"},onMouseEnter:()=>{i.hasPlainPassword&&i.password!=="••••••••"&&I(i.email)},onMouseLeave:()=>I(null),title:i.hasPlainPassword&&i.password!=="••••••••"?"Fare ile üzerine gelin ve kopyalayın":"Hashlenmiş şifre - görüntülenemez"},b===i.email&&i.hasPlainPassword&&i.password!=="••••••••"?i.password:"••••••••")),e.createElement("td",{style:{padding:"12px"}},R(i.role)),e.createElement("td",{style:{padding:"12px",textAlign:"center"}},e.createElement("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",backgroundColor:i.active?"#d4edda":"#f8d7da",color:i.active?"#155724":"#721c24"}},i.active?t.users_active||"Aktif":t.users_inactive||"Pasif")),e.createElement("td",{style:{padding:"12px",textAlign:"center"}},e.createElement("div",{style:{display:"flex",gap:"8px",justifyContent:"center"}},e.createElement("button",{onClick:()=>A(i),className:"btn btn-warning",style:{fontSize:"12px",padding:"4px 8px"},disabled:u},t.users_edit||"Düzenle"),e.createElement("button",{onClick:()=>T(i.email),className:i.active?"btn btn-warning":"btn btn-success",style:{fontSize:"12px",padding:"4px 8px"},disabled:u},i.active?t.users_deactivate||"Devre Dışı":t.users_activate||"Aktifleştir"))))))),g&&e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3}},e.createElement("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",width:"400px",maxWidth:"90vw"}},e.createElement("h4",null,t.users_edit_user||"Kullanıcı Düzenle"),e.createElement("div",{className:"form-group"},e.createElement("label",null,t.users_email||"Email"),e.createElement("input",{type:"email",value:g.email,disabled:!0,className:"form-control",style:{backgroundColor:"#f5f5f5"}})),e.createElement("div",{className:"form-group"},e.createElement("label",null,t.users_new_password||"Yeni Şifre (Boş bırakılırsa değişmez)"),e.createElement("input",{type:"password",value:g.newPassword||"",onChange:i=>A({...g,newPassword:i.target.value}),className:"form-control",placeholder:t.users_password_placeholder||"En az 6 karakter"})),e.createElement("div",{className:"form-group"},e.createElement("label",null,t.users_role||"Rol"),e.createElement("select",{value:g.role,onChange:i=>A({...g,role:i.target.value}),className:"form-control"},e.createElement("option",{value:"admin"},t.users_role_admin||"Admin"),e.createElement("option",{value:"user"},t.users_role_user||"Kullanıcı"))),e.createElement("div",{style:{display:"flex",gap:"10px",marginTop:"20px"}},e.createElement("button",{onClick:()=>{const i={role:g.role};g.newPassword&&g.newPassword.length>=6&&(i.password=g.newPassword),P(g.email,i)},className:"btn btn-primary",disabled:u||g.newPassword&&g.newPassword.length<6},t.users_save||"Kaydet"),e.createElement("button",{onClick:()=>A(null),className:"btn btn-secondary"},t.users_cancel||"İptal"))))),w&&e.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3}},e.createElement("div",{style:{backgroundColor:"white",padding:"30px",borderRadius:"8px",width:"400px",maxWidth:"90vw",textAlign:"center"}},e.createElement("h3",{style:{marginBottom:"20px",color:"#d32f2f"}},"🔐 "+(t.admin_access_title||"Admin Erişim Kontrolü")),e.createElement("p",{style:{marginBottom:"20px",color:"#666"}},t.admin_access_desc||"Kullanıcı yönetimi bölümüne erişmek için admin kimlik bilgilerinizi girin:"),e.createElement("div",{className:"form-group",style:{marginBottom:"15px"}},e.createElement("label",null,t.users_email||"Email"),e.createElement("input",{type:"email",className:"form-control",value:E.email,onChange:i=>f({...E,email:i.target.value}),placeholder:t.admin_access_email_placeholder||"admin@example.com"})),e.createElement("div",{className:"form-group",style:{marginBottom:"20px"}},e.createElement("label",null,t.users_password||"Şifre"),e.createElement("input",{type:"password",className:"form-control",value:E.password,onChange:i=>f({...E,password:i.target.value}),placeholder:t.admin_access_password_placeholder||"Admin şifreniz",onKeyPress:i=>i.key==="Enter"&&d()})),e.createElement("div",{style:{display:"flex",gap:"10px",justifyContent:"center"}},e.createElement("button",{onClick:d,className:"btn btn-primary",disabled:u||!E.email||!E.password},u?t.loading||"Yükleniyor...":t.admin_access_verify||"Doğrula"),e.createElement("button",{onClick:()=>r(!1),className:"btn btn-secondary"},t.users_cancel||"İptal")))))}function Ye(){const[t,l]=oe.useState([]);return{notifications:t,showNotification:(u,n="info")=>{const m=Date.now(),v={id:m,message:u,type:n};l(k=>[...k,v]),setTimeout(()=>{l(k=>k.filter(N=>N.id!==m))},4e3)},removeNotification:u=>{l(n=>n.filter(m=>m.id!==u))}}}function He({notifications:t,onRemove:l}){return t.length===0?null:e.createElement("div",{style:{position:"fixed",top:"1rem",right:"1rem",zIndex:9999,display:"flex",flexDirection:"column",gap:"0.5rem"}},t.map(a=>e.createElement("div",{key:a.id,style:{background:a.type==="error"?"#dc3545":a.type==="success"?"#28a745":"#007bff",color:"white",padding:"0.75rem 1rem",borderRadius:"0.375rem",boxShadow:"0 0.25rem 0.5rem rgba(0,0,0,0.1)",cursor:"pointer",maxWidth:"300px"},onClick:()=>l(a.id)},a.message)))}function Ge(){const[t,l]=oe.useState("pricing"),{notifications:a,showNotification:c,removeNotification:u}=Ye(),n={settings_title:"Sistem Ayarları",pricing:"Fiyatlandırma",form_structure:"Form Yapısı",users:"Kullanıcılar",close:"Kapat",save:"Kaydet"};return e.createElement("div",{className:"settings-app"},e.createElement(He,{notifications:a,onRemove:u}),e.createElement("div",{className:"tab-navigation"},e.createElement("button",{className:`tab-button ${t==="pricing"?"active":""}`,onClick:()=>l("pricing")},"Fiyatlandırma"),e.createElement("button",{className:`tab-button ${t==="form"?"active":""}`,onClick:()=>l("form")},"Form Yapısı"),e.createElement("button",{className:`tab-button ${t==="users"?"active":""}`,onClick:()=>l("users")},"Kullanıcılar")),e.createElement("div",{className:"tab-content"},t==="pricing"&&e.createElement(Be,{t:n,showNotification:c}),t==="form"&&e.createElement(We,{t:n,showNotification:c}),t==="users"&&e.createElement(qe,{t:n,showNotification:c})))}const re=document.getElementById("settings-root");re&&Ce.createRoot(re).render(e.createElement(Ge));
