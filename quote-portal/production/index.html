<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ãœretim Paneli - Burkol MES</title>
  <script type="module" src="../components/BurkolNavigation.js"></script>
  <script type="module" src="../components/AuthGuard.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  <link rel="stylesheet" href="./styles/production.css">
</head>
<body>
  <div class="app-layout">
    <!-- Mobile Navigation Toggle -->
    <button class="mobile-nav-toggle" onclick="toggleMobileNav()">â˜°</button>
    <!-- Mobile Overlay -->
    <div class="mobile-overlay" onclick="closeMobileNav()"></div>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
      <div style="padding: 24px 0;">
        <!-- Logo Area -->
        <div style="padding: 0 16px 16px; border-bottom: 1px solid var(--border);">
          <div style="display: flex; align-items: center; gap: 12px;">
            <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #2563eb, #1d4ed8); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 18px;">ğŸ­</div>
            <div>
              <h2 style="font-size: 16px; font-weight: 600; color: var(--foreground); margin-bottom: 2px;">MES System</h2>
              <p style="font-size: 12px; color: var(--muted-foreground);">Manufacturing Execution</p>
            </div>
          </div>
        </div>

        <!-- Navigation Groups -->
        <div class="nav-group">
          <div class="nav-group-header">Monitoring & Tracking</div>
          <div class="nav-group-content">
            <button class="nav-item" onclick="navigateToView('dashboard')"><div class="nav-item-icon">ğŸ“Š</div><span>Dashboard</span></button>
            <button class="nav-item" onclick="navigateToView('approved-quotes')"><div class="nav-item-icon">âœ…</div><span>Work Orders</span></button>
            <button class="nav-item" onclick="navigateToView('worker-panel')"><div class="nav-item-icon">ï¿½</div><span>Work Packages</span></button>
          </div>
        </div>

        <div class="nav-group">
          <div class="nav-group-header">Production Planning</div>
          <div class="nav-group-content">
            <button class="nav-item" onclick="navigateToView('plan-designer')"><div class="nav-item-icon">ğŸ¨</div><span>Route Designer</span></button>
          </div>
        </div>

        <div class="nav-group">
          <div class="nav-group-header">Setup & Configuration</div>
          <div class="nav-group-content">
            <button class="nav-item" onclick="navigateToView('settings')"><div class="nav-item-icon">âš¡</div><span>Master Data</span><span class="nav-item-badge">Start here</span></button>
            <button class="nav-item" onclick="navigateToView('stations')"><div class="nav-item-icon">ğŸ­</div><span>Work Stations</span></button>
            <button class="nav-item" onclick="navigateToView('operations')"><div class="nav-item-icon">âš™ï¸</div><span>Operations</span></button>
            <button class="nav-item" onclick="navigateToView('workers')"><div class="nav-item-icon">ğŸ‘¥</div><span>Production Personnel</span></button>
          </div>
        </div>

        <!-- Footer -->
        <div style="padding: 16px; border-top: 1px solid var(--border); margin-top: auto;">
          <div style="font-size: 11px; color: var(--muted-foreground);">
            <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 4px;">
              <div style="width: 6px; height: 6px; background: #10b981; border-radius: 50%; animation: pulse 2s infinite;"></div>
              <span>System Online</span>
            </div>
            <p>Version 1.0.0</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <div id="content-area"></div>
    </div>
  </div>

  <!-- Help System -->
  <button class="help-button" onclick="openHelp()" title="Help & Guide">?</button>
  <div class="help-overlay" id="help-overlay" onclick="closeHelp()"></div>
  <div class="help-panel" id="help-panel">
    <div class="help-header">
      <div>
        <h2 class="help-title">ğŸ­ MES Sistemi KullanÄ±m Rehberi</h2>
        <p class="help-subtitle">Ãœretim YÃ¶netim Sistemi tam kullanÄ±m kÄ±lavuzu</p>
      </div>
      <button class="help-close" onclick="closeHelp()">Ã—</button>
    </div>
    <div class="help-content">
      <div class="help-tabs">
        <button class="help-tab active" onclick="switchHelpTab('setup')">ğŸš€ Kurulum</button>
        <button class="help-tab" onclick="switchHelpTab('usage')">ğŸ“Š KullanÄ±m</button>
        <button class="help-tab" onclick="switchHelpTab('features')">âš¡ Ã–zellikler</button>
        <button class="help-tab" onclick="switchHelpTab('faq')">â“ S.S.S</button>
      </div>
      <div class="help-section active" id="help-setup">
        <div class="help-step"><div class="help-step-header"><div class="help-step-number">1</div><h3 class="help-step-title">Master Data TanÄ±mlama</h3></div><p class="help-step-description">Sistemdeki temel veri yapÄ±larÄ±nÄ± oluÅŸturun. Bu adÄ±m tÃ¼m sistem iÃ§in kritiktir.</p><div class="help-step-details"><ul><li><strong>Skills (Yetenekler):</strong> CNC Programming, Welding, Assembly, Quality Control</li><li><strong>Operation Types:</strong> Machining, Welding, Painting, Assembly, Quality</li><li><strong>Material Types:</strong> Steel, Aluminum, Plastic vb.</li><li>Bu veriler tÃ¼m sistemde kullanÄ±lacak - Ã¶nce bunlarÄ± tanÄ±mlayÄ±n!</li></ul></div><button class="help-action-button" onclick="navigateToView('settings'); closeHelp();">Master Data'ya Git</button></div>
        <div class="help-step"><div class="help-step-header"><div class="help-step-number">2</div><h3 class="help-step-title">Ä°stasyonlarÄ± OluÅŸturun</h3></div><p class="help-step-description">Ãœretim istasyonlarÄ±nÄ± ve iÅŸ merkezlerini tanÄ±mlayÄ±n.</p><div class="help-step-details"><ul><li>Fabrikadaki her istasyonu ekleyin (CNC Mill 01, Welding Station A, vb.)</li><li>Her istasyon iÃ§in: Ä°sim, Tip, Kapasite, Durum belirleyin</li><li>Ã–rnek: 'CNC Mill 01' - Tip: 'CNC Milling Machine' - Kapasite: 1 worker</li><li>Station status: Active, Maintenance, Offline</li></ul></div><button class="help-action-button" onclick="navigateToView('stations'); closeHelp();">Ä°stasyonlara Git</button></div>
        <div class="help-step"><div class="help-step-header"><div class="help-step-number">3</div><h3 class="help-step-title">OperasyonlarÄ± TanÄ±mlayÄ±n</h3></div><p class="help-step-description">Ãœretim operasyonlarÄ±nÄ± yapÄ±landÄ±rÄ±n.</p><div class="help-step-details"><ul><li>Her Ã¼retim operasyonunu ekleyin (CNC Milling, Welding, Quality Control, vb.)</li><li><strong>Operation Type:</strong> Ã–nceki adÄ±mda tanÄ±mladÄ±ÄŸÄ±nÄ±z tiplerden seÃ§in</li><li><strong>Required Skills:</strong> Hangi yetenekler gerekli</li><li><strong>Required Station:</strong> Hangi istasyonda yapÄ±lacak</li><li><strong>Estimated Time:</strong> Tahmini sÃ¼re (dakika)</li></ul></div><button class="help-action-button" onclick="navigateToView('operations'); closeHelp();">Operasyonlara Git</button></div>
        <div class="help-step"><div class="help-step-header"><div class="help-step-number">4</div><h3 class="help-step-title">Ä°ÅŸÃ§ileri Sisteme Ekleyin</h3></div><p class="help-step-description">Ä°ÅŸÃ§ileri ve yeteneklerini tanÄ±mlayÄ±n.</p><div class="help-step-details"><ul><li><strong>Name & Email:</strong> Temel bilgiler</li><li><strong>Skills:</strong> Hangi yeteneklere sahip (master data'dan seÃ§in)</li><li><strong>Assigned Operations:</strong> Hangi operasyonlarÄ± yapabilir</li><li><strong>Assigned Stations:</strong> Hangi istasyonlarda Ã§alÄ±ÅŸabilir</li><li><strong>Shift:</strong> Day/Night vardiya</li></ul></div><button class="help-action-button" onclick="navigateToView('workers'); closeHelp();">Ä°ÅŸÃ§ilere Git</button></div>
      </div>
      <div class="help-section" id="help-usage">
        <div class="help-step"><div class="help-step-header"><div class="help-step-number">1</div><h3 class="help-step-title">Plan Tasarlama</h3></div><p class="help-step-description">Ãœretim planÄ±nÄ± oluÅŸturun - sistem sadece kurallarÄ± tanÄ±mlar, atama yapmaz.</p><div class="help-step-details"><ul><li><strong>Production Dashboard'a</strong> gidin ve "Yeni Plan OluÅŸtur" tÄ±klayÄ±n</li><li><strong>Plan bilgileri:</strong> Ä°sim, aÃ§Ä±klama, iÅŸ emri kodu (WO-XXXX), miktar</li><li><strong>Operasyon dÃ¼ÄŸÃ¼mleri:</strong> Her adÄ±m iÃ§in beceriler, tercih edilen istasyonlar, sÃ¼re, malzemeler</li><li><strong>BaÄŸÄ±mlÄ±lÄ±klar:</strong> Hangi operasyon hangi operasyondan sonra</li><li>âœ… <strong>Kaydet</strong> - Plan artÄ±k hazÄ±r ama henÃ¼z atama yapÄ±lmadÄ±!</li></ul></div><button class="help-action-button" onclick="navigateToView('plan-designer'); closeHelp();">Route Designer'a Git</button></div>
        <div class="help-step"><div class="help-step-header"><div class="help-step-number">2</div><h3 class="help-step-title">Teklif Onaylama</h3></div><p class="help-step-description">Ä°lgili teklifi onaylayÄ±n.</p><div class="help-step-details"><ul><li><strong>Quotes</strong> sayfasÄ±na gidin</li><li>Ä°lgili teklifi bulun ve <strong>"Onayla"</strong> butonuna tÄ±klayÄ±n</li><li>Teklif "OnaylandÄ±" durumuna geÃ§er</li></ul></div><button class="help-action-button" onclick="navigateToView('quotes'); closeHelp();">Quotes'a Git</button></div>
        <div class="help-step"><div class="help-step-header"><div class="help-step-number">3</div><h3 class="help-step-title">ğŸ Ãœretimi BaÅŸlatma</h3></div><p class="help-step-description">OnaylÄ± tekliften Ã¼retimi baÅŸlatÄ±n - Sistem otomatik atama yapar.</p><div class="help-step-details"><ul><li><strong>Work Orders</strong> sayfasÄ±na gidin</li><li>Ä°ÅŸ emrini bulun ve <strong>"ğŸ BaÅŸlat"</strong> butonuna tÄ±klayÄ±n</li><li><strong>Sistem otomatik olarak:</strong><ul><li>âœ… Malzeme kontrolÃ¼ yapar</li><li>âœ… Ã‡alÄ±ÅŸma sÄ±rasÄ±nÄ± belirler (topolojik sÄ±ralama)</li><li>âœ… Ä°ÅŸÃ§i ve istasyon atamasÄ± yapar</li><li>âœ… Work Packages (iÅŸ paketleri) oluÅŸturur</li></ul></li><li><strong>Hata durumlarÄ±:</strong> Malzeme eksikliÄŸi veya atama hatasÄ± detaylÄ± gÃ¶sterilir</li></ul></div><button class="help-action-button" onclick="navigateToView('approvedQuotes'); closeHelp();">Work Orders'a Git</button></div>
        <div class="help-step"><div class="help-step-header"><div class="help-step-number">4</div><h3 class="help-step-title">ğŸ“Š Work Packages - Takip</h3></div><p class="help-step-description">TÃ¼m aktif gÃ¶revleri tek yerden takip edin.</p><div class="help-step-details"><ul><li><strong>Dashboard'da "Work Packages"</strong> kartÄ±na bakÄ±n</li><li><strong>Filtreleme:</strong> WO kodu, durum, iÅŸÃ§i, istasyon</li><li><strong>GÃ¶receÄŸiniz bilgiler:</strong><ul><li>WO kodu + MÃ¼ÅŸteri (link ile detay)</li><li>ÃœrÃ¼n / Plan / Operasyon</li><li>Ä°ÅŸÃ§i ve Ä°stasyon</li><li>Durum (Beklemede / HazÄ±r / Devam Ediyor / TamamlandÄ± / DuraklatÄ±ldÄ±)</li><li>Malzeme durumu (âœ“ HazÄ±r / âš ï¸ Eksik)</li><li>Tahmini tamamlanma</li></ul></li><li>Otomatik yenileme ile anlÄ±k takip</li></ul></div><button class="help-action-button" onclick="navigateToView('dashboard'); closeHelp();">Dashboard'a Git</button></div>
        <div class="help-step"><div class="help-step-header"><div class="help-step-number">5</div><h3 class="help-step-title">ğŸ‘· Worker Portal - Ä°ÅŸÃ§i TarafÄ±</h3></div><p class="help-step-description">Ä°ÅŸÃ§iler atanan gÃ¶revleri buradan Ã§alÄ±ÅŸÄ±r.</p><div class="help-step-details"><ul><li><strong>Ä°ÅŸÃ§i hesabÄ±</strong> ile Worker Portal'a giriÅŸ yapÄ±n</li><li><strong>GÃ¶rev listesi:</strong> AtanmÄ±ÅŸ tÃ¼m gÃ¶revler</li><li><strong>GÃ¶rev bilgileri:</strong><ul><li>â¸ï¸ DuraklatÄ±ldÄ± bannerÄ± (admin durdurduysa)</li><li>ğŸ“¦ Malzeme durumu (âœ“/âš ï¸/?)</li><li>ğŸ”’ Ã–nkoÅŸullar (Ã¶nceki gÃ¶revler, istasyon, malzeme)</li><li>â±ï¸ Tahmini sÃ¼re</li></ul></li><li><strong>"BaÅŸlat"</strong> tÄ±klayÄ±n - Sistem tekrar malzeme kontrolÃ¼ yapar</li><li>âŒ Malzeme tÃ¼kendiyse detaylÄ± hata mesajÄ± gÃ¶sterilir</li><li>âœ… HazÄ±rsa gÃ¶rev baÅŸlar ve izleyebilirsiniz</li><li><strong>"Tamamla"</strong> ile gÃ¶revi bitirin</li></ul></div><button class="help-action-button" onclick="navigateToView('workerPortal'); closeHelp();">Worker Portal'a Git</button></div>
        <div class="help-step"><div class="help-step-header"><div class="help-step-number">6</div><h3 class="help-step-title">âš™ï¸ YÃ¶netim Kontrolleri</h3></div><p class="help-step-description">Admin kullanÄ±cÄ±lar Ã¼retimi kontrol edebilir.</p><div class="help-step-details"><ul><li><strong>â¸ï¸ Durdur (Pause):</strong> TÃ¼m atamalarÄ± duraklatÄ±r, iÅŸÃ§i portalÄ±nda kÄ±rmÄ±zÄ± banner gÃ¶sterir</li><li><strong>â–¶ï¸ Devam Et (Resume):</strong> DuraklatÄ±lmÄ±ÅŸ planÄ± aktifleÅŸtirir, kaldÄ±ÄŸÄ± yerden devam eder</li><li><strong>âŒ Ä°ptal Et (Cancel):</strong> KalÄ±cÄ± iÅŸlem! TÃ¼m atamalarÄ± iptal eder, teklif "Ä°ptal Edildi" durumuna geÃ§er</li><li>TÃ¼m iÅŸlemler <strong>Work Orders</strong> sayfasÄ±ndan yapÄ±lÄ±r</li></ul></div><button class="help-action-button" onclick="navigateToView('approvedQuotes'); closeHelp();">Work Orders'a Git</button></div>
      </div>
      <div class="help-section" id="help-features">
        <div class="help-step"><div class="help-step-header"><div class="help-step-number">âš¡</div><h3 class="help-step-title">Temel Ã–zellikler</h3></div><div class="help-step-details"><ul><li><strong>Real-time Dashboard:</strong> AnlÄ±k Ã¼retim takibi</li><li><strong>Work Order Management:</strong> Ä°ÅŸ emri yÃ¶netimi</li><li><strong>Resource Planning:</strong> Kaynak planlama</li><li><strong>Quality Control:</strong> Kalite kontrol entegrasyonu</li><li><strong>Reporting:</strong> DetaylÄ± raporlama sistemi</li><li><strong>Mobile Support:</strong> Mobil cihaz desteÄŸi</li></ul></div></div>
        <div class="help-step"><div class="help-step-header"><div class="help-step-number">ğŸ¨</div><h3 class="help-step-title">Route Designer</h3></div><p class="help-step-description">Ãœretim planlarÄ± oluÅŸturun ve optimize edin.</p><div class="help-step-details"><ul><li><strong>Drag & Drop:</strong> Kolay planlama arayÃ¼zÃ¼</li><li><strong>Resource Optimization:</strong> Kaynak optimizasyonu</li><li><strong>Timeline View:</strong> Zaman Ã§izelgesi gÃ¶rÃ¼nÃ¼mÃ¼</li><li><strong>Conflict Detection:</strong> Ã‡akÄ±ÅŸma tespiti</li><li><strong>Template Support:</strong> Åablon desteÄŸi</li></ul></div><button class="help-action-button" onclick="navigateToView('plan-designer'); closeHelp();">Route Designer'a Git</button></div>
      </div>
      <div class="help-section" id="help-faq">
        <div class="help-faq-item"><button class="help-faq-question" onclick="toggleFAQ(this)"><span>Yeni Ã¼retim akÄ±ÅŸÄ± nasÄ±l Ã§alÄ±ÅŸÄ±r?</span><span>â–¼</span></button><div class="help-faq-answer"><p><strong>6 adÄ±mda Ã¼retim:</strong><br>1. Plan tasarla (sadece kurallar, atama yok)<br>2. Teklifi onayla<br>3. Work Orders'tan ğŸ BaÅŸlat (otomatik atama)<br>4. Work Packages'tan takip et<br>5. Worker Portal'dan Ã§alÄ±ÅŸ<br>6. Admin kontrolleri (Durdur/Devam/Ä°ptal)</p></div></div>
        <div class="help-faq-item"><button class="help-faq-question" onclick="toggleFAQ(this)"><span>Route Designer artÄ±k atama yapmÄ±yor mu?</span><span>â–¼</span></button><div class="help-faq-answer"><p>HayÄ±r! Route Designer sadece <strong>kurallarÄ±</strong> tanÄ±mlar (beceriler, tercih edilen istasyonlar, malzemeler). GerÃ§ek atama "ğŸ BaÅŸlat" butonuna basÄ±ldÄ±ÄŸÄ±nda otomatik yapÄ±lÄ±r.</p></div></div>
        <div class="help-faq-item"><button class="help-faq-question" onclick="toggleFAQ(this)"><span>Malzeme eksiÄŸinde ne olur?</span><span>â–¼</span></button><div class="help-faq-answer"><p>Sistem 2 kez kontrol eder:<br>1. <strong>BaÅŸlatma sÄ±rasÄ±nda:</strong> Eksik malzeme varsa baÅŸlamaz, hangi malzemelerin eksik olduÄŸunu gÃ¶sterir ve plan dÃ¶kÃ¼manÄ±na kaydeder.<br>2. <strong>Ä°ÅŸÃ§i baÅŸlatÄ±rken:</strong> Malzemeler tÃ¼kendiyse "BaÅŸlat" butonu hata verir ve detaylÄ± eksiklik bilgisi gÃ¶sterir.</p></div></div>
        <div class="help-faq-item"><button class="help-faq-question" onclick="toggleFAQ(this)"><span>Ãœretimi nasÄ±l durdururum?</span><span>â–¼</span></button><div class="help-faq-answer"><p>Work Orders sayfasÄ±nda <strong>"â¸ï¸ Durdur"</strong> butonuna tÄ±klayÄ±n. Bu tÃ¼m atamalarÄ± duraklatÄ±r ve worker portal'da kÄ±rmÄ±zÄ± banner gÃ¶sterir. Ä°stediÄŸiniz zaman "â–¶ï¸ Devam Et" ile devam edebilirsiniz.</p></div></div>
        <div class="help-faq-item"><button class="help-faq-question" onclick="toggleFAQ(this)"><span>Ä°ptal ile Durdur arasÄ±ndaki fark nedir?</span><span>â–¼</span></button><div class="help-faq-answer"><p><strong>Durdur (â¸ï¸):</strong> GeÃ§ici - devam ettirilebilir<br><strong>Ä°ptal (âŒ):</strong> KalÄ±cÄ± - geri alÄ±namaz, teklif "Ä°ptal Edildi" durumuna geÃ§er, tÃ¼m atamalar silinir.</p></div></div>
        <div class="help-faq-item"><button class="help-faq-question" onclick="toggleFAQ(this)"><span>Work Packages nedir?</span><span>â–¼</span></button><div class="help-faq-answer"><p>TÃ¼m aktif gÃ¶revlerin (assignments) toplu gÃ¶rÃ¼nÃ¼mÃ¼. Dashboard'da filtreleme yaparak tÃ¼m Ã¼retimdeki gÃ¶revleri gÃ¶rebilir, durumlarÄ±nÄ± takip edebilirsiniz. Real-time gÃ¼ncellenir.</p></div></div>
        <div class="help-faq-item"><button class="help-faq-question" onclick="toggleFAQ(this)"><span>Sisteme nasÄ±l baÅŸlarÄ±m?</span><span>â–¼</span></button><div class="help-faq-answer"><p>1. Master Data'yÄ± tanÄ±mlayÄ±n (Skills, Operation Types)<br>2. Ä°stasyonlarÄ± oluÅŸturun<br>3. OperasyonlarÄ± tanÄ±mlayÄ±n<br>4. Ä°ÅŸÃ§ileri sisteme ekleyin<br>5. Teklif oluÅŸturup onaylayÄ±n<br>6. Plan tasarlayÄ±n<br>7. Work Orders'tan baÅŸlatÄ±n!</p></div></div>
        <div class="help-faq-item"><button class="help-faq-question" onclick="toggleFAQ(this)"><span>Veriler nerede saklanÄ±yor?</span><span>â–¼</span></button><div class="help-faq-answer"><p>Veriler Firebase Firestore'da saklanÄ±r. Collections: mes-production-plans, mes-worker-assignments, mes-workers, mes-stations, approved-quotes.</p></div></div>
        <div class="help-faq-item"><button class="help-faq-question" onclick="toggleFAQ(this)"><span>Mobile cihazlarda nasÄ±l kullanÄ±rÄ±m?</span><span>â–¼</span></button><div class="help-faq-answer"><p>Sistem tamamen responsive tasarlanmÄ±ÅŸtÄ±r. Tablette ve telefonda sidebar menÃ¼ ile tÃ¼m Ã¶zellikler kullanÄ±labilir. Worker Portal Ã¶zellikle mobil kullanÄ±m iÃ§in optimize edilmiÅŸtir.</p></div></div>
        <div class="help-faq-item"><button class="help-faq-question" onclick="toggleFAQ(this)"><span>Sistem nasÄ±l gÃ¼ncellenecek?</span><span>â–¼</span></button><div class="help-faq-answer"><p>Sistem BroadcastChannel ile real-time gÃ¼ncellemeler alÄ±r. Bir sekmede yapÄ±lan deÄŸiÅŸiklik diÄŸer sekmelere anÄ±nda yansÄ±r. Dashboard ve Work Packages otomatik yenilenir.</p></div></div>
        <div class="help-faq-item"><button class="help-faq-question" onclick="toggleFAQ(this)"><span>Hangi tarayÄ±cÄ±lar desteklenir?</span><span>â–¼</span></button><div class="help-faq-answer"><p>Modern tarayÄ±cÄ±lar: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+. Internet Explorer desteklenmez.</p></div></div>
      </div>
    </div>
  </div>

  <script type="module" src="./js/main.js"></script>
</body>
</html>
